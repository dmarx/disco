(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-106afe71"],{"0d74":function(e,t,n){},"10b3":function(e,t,n){"use strict";n("9e48")},"1ea6":function(e,t,n){"use strict";n("ca93")},"32e4":function(e,t,n){"use strict";n("4f03")},"3e8f":function(e,t){},4741:function(e,t,n){},"4f03":function(e,t,n){},"784b":function(e,t,n){"use strict";n("4741")},7929:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return Iu})),n.d(t,"b",(function(){return Jc})),n.d(t,"c",(function(){return su}));var i=n("7a23"),r=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&d(e,n,t[n]);if(s)for(var n of s(t))u.call(t,n)&&d(e,n,t[n]);return e},p=(e,t)=>a(e,l(t)),f=(e,t)=>{var n={};for(var o in e)c.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&s)for(var o of s(e))t.indexOf(o)<0&&u.call(e,o)&&(n[o]=e[o]);return n};function m(e,t){let n,o,r;const a=Object(i["ref"])(!0);return Object(i["watch"])(e,()=>{a.value=!0,r()},{flush:"sync"}),Object(i["customRef"])((e,i)=>(o=e,r=i,{get(){return a.value&&(n=t(),a.value=!1),o(),n},set(){}}))}function g(){const e=[],t=t=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)};return{on:n=>(e.push(n),{off:()=>t(n)}),off:t,trigger:t=>{e.forEach(e=>e(t))}}}function b(e){return!!Object(i["getCurrentScope"])()&&(Object(i["onScopeDispose"])(e),!0)}function v(e,t,{enumerable:n=!1,unwrap:o=!0}={}){for(const[r,a]of Object.entries(t))"value"!==r&&(Object(i["isRef"])(a)&&o?Object.defineProperty(e,r,{get(){return a.value},set(e){a.value=e},enumerable:n}):Object.defineProperty(e,r,{value:a,enumerable:n}));return e}const y="undefined"!=typeof window,w=e=>"string"==typeof e,O=()=>{};function j(e,t){function n(...n){e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})}return n}const x=e=>e();function k(e,t={}){let n,o;return r=>{const a=Object(i["unref"])(e),l=Object(i["unref"])(t.maxWait);if(n&&clearTimeout(n),a<=0||void 0!==l&&l<=0)return o&&(clearTimeout(o),o=null),r();l&&!o&&(o=setTimeout(()=>{n&&clearTimeout(n),o=null,r()},l)),n=setTimeout(()=>{o&&clearTimeout(o),o=null,r()},a)}}function _(e=x){const t=Object(i["ref"])(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:t,pause:n,resume:o,eventFilter:(...n)=>{t.value&&e(...n)}}}function E(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function S(e,t={}){let n,o,r=e;const a=Object(i["customRef"])((e,t)=>(n=e,o=t,{get(){return l()},set(e){s(e)}}));function l(e=!0){return e&&n(),r}function s(e,n=!0){var i,a;if(e===r)return;const l=r;!1!==(null==(i=t.onBeforeChange)?void 0:i.call(t,e,l))&&(r=e,null==(a=t.onChanged)||a.call(t,e,l),n&&o())}return v(a,{get:l,set:s,untrackedGet:()=>l(!1),silentSet:e=>s(e,!1),peek:()=>l(!1),lay:e=>s(e,!1)},{enumerable:!0})}const N=S;function B(e,t=!0){Object(i["getCurrentInstance"])()?Object(i["onMounted"])(e):t?e():Object(i["nextTick"])(e)}function C(e){let t=!1;function n(n,{flush:o="sync",deep:r=!1,timeout:a,throwOnTimeout:l}={}){let s=null;const c=[new Promise(a=>{s=Object(i["watch"])(e,e=>{n(e)===!t&&(null==s||s(),a())},{flush:o,deep:r,immediate:!0})})];return a&&c.push(E(a,l).finally(()=>{null==s||s()})),Promise.race(c)}function o(e,t){return n(t=>t===Object(i["unref"])(e),t)}function r(e){return n(e=>Boolean(e),e)}function a(e){return o(null,e)}function l(e){return o(void 0,e)}function s(e){return n(Number.isNaN,e)}function c(e,t){return n(t=>{const n=Array.from(t);return n.includes(e)||n.includes(Object(i["unref"])(e))},t)}function u(e){return d(1,e)}function d(e=1,t){let o=-1;return n(()=>(o+=1,o>=e),t)}return Array.isArray(Object(i["unref"])(e))?{toMatch:n,toContains:c,changed:u,changedTimes:d,get not(){return t=!t,this}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:a,toBeNaN:s,toBeUndefined:l,changed:u,changedTimes:d,get not(){return t=!t,this}}}var P=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,M=(e,t)=>{var n={};for(var o in e)V.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&P)for(var o of P(e))t.indexOf(o)<0&&A.call(e,o)&&(n[o]=e[o]);return n};function $(e,t,n={}){const o=n,{eventFilter:r=x}=o,a=M(o,["eventFilter"]);return Object(i["watch"])(e,j(r,t),a)}var z=Object.defineProperty,T=Object.defineProperties,D=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,Y=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))I.call(t,n)&&Y(e,n,t[n]);if(L)for(var n of L(t))F.call(t,n)&&Y(e,n,t[n]);return e},H=(e,t)=>T(e,D(t)),R=(e,t)=>{var n={};for(var o in e)I.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&L)for(var o of L(e))t.indexOf(o)<0&&F.call(e,o)&&(n[o]=e[o]);return n};function q(e,t,n={}){const o=n,{debounce:i=0}=o,r=R(o,["debounce"]);return $(e,t,H(X({},r),{eventFilter:k(i)}))}var U=Object.defineProperty,Z=Object.defineProperties,G=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,J=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ee=(e,t)=>{for(var n in t||(t={}))Q.call(t,n)&&J(e,n,t[n]);if(W)for(var n of W(t))K.call(t,n)&&J(e,n,t[n]);return e},te=(e,t)=>Z(e,G(t)),ne=(e,t)=>{var n={};for(var o in e)Q.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&W)for(var o of W(e))t.indexOf(o)<0&&K.call(e,o)&&(n[o]=e[o]);return n};function oe(e,t,n={}){const o=n,{eventFilter:i}=o,r=ne(o,["eventFilter"]),{eventFilter:a,pause:l,resume:s,isActive:c}=_(i);return{stop:$(e,t,te(ee({},r),{eventFilter:a})),pause:l,resume:s,isActive:c}}function ie(e){var t;const n=Object(i["unref"])(e);return null!=(t=null==n?void 0:n.$el)?t:n}const re=y?window:void 0;function ae(...e){let t,n,o,r;if(w(e[0])?([n,o,r]=e,t=re):[t,n,o,r]=e,!t)return O;let a=O;const l=Object(i["watch"])(()=>ie(t),e=>{a(),e&&(e.addEventListener(n,o,r),a=()=>{e.removeEventListener(n,o,r),a=O})},{immediate:!0,flush:"post"}),s=()=>{l(),a()};return b(s),s}var le=Object.defineProperty,se=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,pe=(e,t,n)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fe=(e,t)=>{for(var n in t||(t={}))de.call(t,n)&&pe(e,n,t[n]);if(ue)for(var n of ue(t))he.call(t,n)&&pe(e,n,t[n]);return e},me=(e,t)=>se(e,ce(t));const ge=e=>"function"==typeof e?e:"string"==typeof e?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):e?()=>!0:()=>!1;function be(e,t,n={}){const{target:o=re,eventName:i="keydown",passive:r=!1}=n,a=ge(e);return ae(o,i,e=>{a(e)&&t(e)},r)}function ve(e,t,n={}){return be(e,t,me(fe({},n),{eventName:"keydown"}))}function ye(e,t,n={}){return be(e,t,me(fe({},n),{eventName:"keypress"}))}function we(e,t,n={}){return be(e,t,me(fe({},n),{eventName:"keyup"}))}function Oe(e,t=null){const n=Object(i["getCurrentInstance"])();let o=()=>{};const r=Object(i["customRef"])((i,r)=>(o=r,{get(){var o,r;return i(),null!=(r=null==(o=null==n?void 0:n.proxy)?void 0:o.$refs[e])?r:t},set(){}}));return B(o),Object(i["onUpdated"])(o),r}const je="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},xe="__vueuse_ssr_handlers__";je[xe]=je[xe]||{},je[xe];var ke,_e,Ee=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Be=(e,t)=>{var n={};for(var o in e)Se.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&Ee)for(var o of Ee(e))t.indexOf(o)<0&&Ne.call(e,o)&&(n[o]=e[o]);return n};function Ce(e,t,n={}){const o=n,{window:r=re}=o,a=Be(o,["window"]);let l;const s=r&&"ResizeObserver"in r,c=()=>{l&&(l.disconnect(),l=void 0)},u=Object(i["watch"])(()=>ie(e),e=>{c(),s&&r&&e&&(l=new ResizeObserver(t),l.observe(e,a))},{immediate:!0,flush:"post"}),d=()=>{c(),u()};return b(d),{isSupported:s,stop:d}}function Pe(e,t={}){const{reset:n=!0,windowResize:o=!0,windowScroll:r=!0}=t,a=Object(i["ref"])(0),l=Object(i["ref"])(0),s=Object(i["ref"])(0),c=Object(i["ref"])(0),u=Object(i["ref"])(0),d=Object(i["ref"])(0),h=Object(i["ref"])(0),p=Object(i["ref"])(0);function f(){const t=ie(e);if(!t)return void(n&&(a.value=0,l.value=0,s.value=0,c.value=0,u.value=0,d.value=0,h.value=0,p.value=0));const o=t.getBoundingClientRect();a.value=o.height,l.value=o.bottom,s.value=o.left,c.value=o.right,u.value=o.top,d.value=o.width,h.value=o.x,p.value=o.y}return Ce(e,f),Object(i["watch"])(()=>ie(e),e=>!e&&f()),r&&ae("scroll",f,{passive:!0}),o&&ae("resize",f,{passive:!0}),{height:a,bottom:l,left:s,right:c,top:u,width:d,x:h,y:p,update:f}}function Ve(e,t,n,o={}){var r;const{passive:a=!1,eventName:l,deep:s=!1}=o,c=Object(i["getCurrentInstance"])(),u=n||(null==c?void 0:c.emit)||(null==(r=null==c?void 0:c.$emit)?void 0:r.bind(c));let d=l;if(t||(t="modelValue"),d=l||d||"update:"+t,a){const n=Object(i["ref"])(e[t]);return Object(i["watch"])(()=>e[t],e=>n.value=e),Object(i["watch"])(n,n=>{(n!==e[t]||s)&&u(d,n)},{deep:s}),n}return Object(i["computed"])({get(){return e[t]},set(e){u(d,e)}})}function Ae(e,t,n={}){const o={};for(const i in e)o[i]=Ve(e,i,t,n);return o}y&&(null==window?void 0:window.navigator)&&(null==(ke=null==window?void 0:window.navigator)?void 0:ke.platform)&&/iP(ad|hone|od)/.test(null==(_e=null==window?void 0:window.navigator)?void 0:_e.platform);var Me={value:()=>{}};function $e(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new ze(o)}function ze(e){this._=e}function Te(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function De(e,t){for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).name===t)return n.value}function Le(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Me,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}ze.prototype=$e.prototype={constructor:ze,on:function(e,t){var n,o=this._,i=Te(e+"",o),r=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++r<a;)if(n=(e=i[r]).type)o[n]=Le(o[n],e.name,t);else if(null==t)for(n in o)o[n]=Le(o[n],e.name,null);return this}for(;++r<a;)if((n=(e=i[r]).type)&&(n=De(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ze(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,n=o.length;r<n;++r)o[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};var Ie="http://www.w3.org/1999/xhtml",Fe={svg:"http://www.w3.org/2000/svg",xhtml:Ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ye(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Fe.hasOwnProperty(t)?{space:Fe[t],local:e}:e}function Xe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ie&&t.documentElement.namespaceURI===Ie?t.createElement(e):t.createElementNS(n,e)}}function He(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Re(e){var t=Ye(e);return(t.local?He:Xe)(t)}function qe(){}function Ue(e){return null==e?qe:function(){return this.querySelector(e)}}function Ze(e){"function"!=typeof e&&(e=Ue(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a,l=t[i],s=l.length,c=o[i]=new Array(s),u=0;u<s;++u)(r=l[u])&&(a=e.call(r,r.__data__,u,l))&&("__data__"in r&&(a.__data__=r.__data__),c[u]=a);return new Tn(o,this._parents)}function Ge(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function We(){return[]}function Qe(e){return null==e?We:function(){return this.querySelectorAll(e)}}function Ke(e){return function(){return Ge(e.apply(this,arguments))}}function Je(e){e="function"==typeof e?Ke(e):Qe(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a,l=t[r],s=l.length,c=0;c<s;++c)(a=l[c])&&(o.push(e.call(a,a.__data__,c,l)),i.push(a));return new Tn(o,i)}function et(e){return function(){return this.matches(e)}}function tt(e){return function(t){return t.matches(e)}}var nt=Array.prototype.find;function ot(e){return function(){return nt.call(this.children,e)}}function it(){return this.firstElementChild}function rt(e){return this.select(null==e?it:ot("function"==typeof e?e:tt(e)))}var at=Array.prototype.filter;function lt(){return Array.from(this.children)}function st(e){return function(){return at.call(this.children,e)}}function ct(e){return this.selectAll(null==e?lt:st("function"==typeof e?e:tt(e)))}function ut(e){"function"!=typeof e&&(e=et(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,s=o[i]=[],c=0;c<l;++c)(r=a[c])&&e.call(r,r.__data__,c,a)&&s.push(r);return new Tn(o,this._parents)}function dt(e){return new Array(e.length)}function ht(){return new Tn(this._enter||this._groups.map(dt),this._parents)}function pt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function ft(e){return function(){return e}}function mt(e,t,n,o,i,r){for(var a,l=0,s=t.length,c=r.length;l<c;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new pt(e,r[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function gt(e,t,n,o,i,r,a){var l,s,c,u=new Map,d=t.length,h=r.length,p=new Array(d);for(l=0;l<d;++l)(s=t[l])&&(p[l]=c=a.call(s,s.__data__,l,t)+"",u.has(c)?i[l]=s:u.set(c,s));for(l=0;l<h;++l)c=a.call(e,r[l],l,r)+"",(s=u.get(c))?(o[l]=s,s.__data__=r[l],u.delete(c)):n[l]=new pt(e,r[l]);for(l=0;l<d;++l)(s=t[l])&&u.get(p[l])===s&&(i[l]=s)}function bt(e){return e.__data__}function vt(e,t){if(!arguments.length)return Array.from(this,bt);var n=t?gt:mt,o=this._parents,i=this._groups;"function"!=typeof e&&(e=ft(e));for(var r=i.length,a=new Array(r),l=new Array(r),s=new Array(r),c=0;c<r;++c){var u=o[c],d=i[c],h=d.length,p=yt(e.call(u,u&&u.__data__,c,o)),f=p.length,m=l[c]=new Array(f),g=a[c]=new Array(f),b=s[c]=new Array(h);n(u,d,m,g,b,p,t);for(var v,y,w=0,O=0;w<f;++w)if(v=m[w]){for(w>=O&&(O=w+1);!(y=g[O])&&++O<f;);v._next=y||null}}return a=new Tn(a,o),a._enter=l,a._exit=s,a}function yt(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function wt(){return new Tn(this._exit||this._groups.map(dt),this._parents)}function Ot(e,t,n){var o=this.enter(),i=this,r=this.exit();return"function"==typeof e?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),null!=t&&(i=t(i),i&&(i=i.selection())),null==n?r.remove():n(r),o&&i?o.merge(i).order():i}function jt(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),l=new Array(i),s=0;s<a;++s)for(var c,u=n[s],d=o[s],h=u.length,p=l[s]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(p[f]=c);for(;s<i;++s)l[s]=n[s];return new Tn(l,this._parents)}function xt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,i=e[t],r=i.length-1,a=i[r];--r>=0;)(o=i[r])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this}function kt(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=_t);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a,l=n[r],s=l.length,c=i[r]=new Array(s),u=0;u<s;++u)(a=l[u])&&(c[u]=a);c.sort(t)}return new Tn(i,this._parents).order()}function _t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Et(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function St(){return Array.from(this)}function Nt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function Bt(){let e=0;for(const t of this)++e;return e}function Ct(){return!this.node()}function Pt(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i,r=t[n],a=0,l=r.length;a<l;++a)(i=r[a])&&e.call(i,i.__data__,a,r);return this}function Vt(e){return function(){this.removeAttribute(e)}}function At(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mt(e,t){return function(){this.setAttribute(e,t)}}function $t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Tt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dt(e,t){var n=Ye(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?At:Vt:"function"==typeof t?n.local?Tt:zt:n.local?$t:Mt)(n,t))}function Lt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function It(e){return function(){this.style.removeProperty(e)}}function Ft(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yt(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Xt(e,t,n){return arguments.length>1?this.each((null==t?It:"function"==typeof t?Yt:Ft)(e,t,null==n?"":n)):Ht(this.node(),e)}function Ht(e,t){return e.style.getPropertyValue(t)||Lt(e).getComputedStyle(e,null).getPropertyValue(t)}function Rt(e){return function(){delete this[e]}}function qt(e,t){return function(){this[e]=t}}function Ut(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Zt(e,t){return arguments.length>1?this.each((null==t?Rt:"function"==typeof t?Ut:qt)(e,t)):this.node()[e]}function Gt(e){return e.trim().split(/^|\s+/)}function Wt(e){return e.classList||new Qt(e)}function Qt(e){this._node=e,this._names=Gt(e.getAttribute("class")||"")}function Kt(e,t){for(var n=Wt(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Jt(e,t){for(var n=Wt(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function en(e){return function(){Kt(this,e)}}function tn(e){return function(){Jt(this,e)}}function nn(e,t){return function(){(t.apply(this,arguments)?Kt:Jt)(this,e)}}function on(e,t){var n=Gt(e+"");if(arguments.length<2){for(var o=Wt(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?nn:t?en:tn)(n,t))}function rn(){this.textContent=""}function an(e){return function(){this.textContent=e}}function ln(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function sn(e){return arguments.length?this.each(null==e?rn:("function"==typeof e?ln:an)(e)):this.node().textContent}function cn(){this.innerHTML=""}function un(e){return function(){this.innerHTML=e}}function dn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function hn(e){return arguments.length?this.each(null==e?cn:("function"==typeof e?dn:un)(e)):this.node().innerHTML}function pn(){this.nextSibling&&this.parentNode.appendChild(this)}function fn(){return this.each(pn)}function mn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gn(){return this.each(mn)}function bn(e){var t="function"==typeof e?e:Re(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function vn(){return null}function yn(e,t){var n="function"==typeof e?e:Re(e),o=null==t?vn:"function"==typeof t?t:Ue(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}function wn(){var e=this.parentNode;e&&e.removeChild(this)}function On(){return this.each(wn)}function jn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kn(e){return this.select(e?xn:jn)}function _n(e){return arguments.length?this.property("__data__",e):this.node().__data__}function En(e){return function(t){e.call(this,t,this.__data__)}}function Sn(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Nn(e){return function(){var t=this.__on;if(t){for(var n,o=0,i=-1,r=t.length;o<r;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Bn(e,t,n){return function(){var o,i=this.__on,r=En(t);if(i)for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=t);this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function Cn(e,t,n){var o,i,r=Sn(e+""),a=r.length;if(!(arguments.length<2)){for(l=t?Bn:Nn,o=0;o<a;++o)this.each(l(r[o],t,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(o=0,s=l[c];o<a;++o)if((i=r[o]).type===s.type&&i.name===s.name)return s.value}function Pn(e,t,n){var o=Lt(e),i=o.CustomEvent;"function"==typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Vn(e,t){return function(){return Pn(this,e,t)}}function An(e,t){return function(){return Pn(this,e,t.apply(this,arguments))}}function Mn(e,t){return this.each(("function"==typeof t?An:Vn)(e,t))}function*$n(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,i=e[t],r=0,a=i.length;r<a;++r)(o=i[r])&&(yield o)}pt.prototype={constructor:pt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Qt.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var zn=[null];function Tn(e,t){this._groups=e,this._parents=t}function Dn(){return new Tn([[document.documentElement]],zn)}function Ln(){return this}function In(e){return"string"==typeof e?new Tn([[document.querySelector(e)]],[document.documentElement]):new Tn([[e]],zn)}function Fn(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Yn(e,t){if(e=Fn(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}Tn.prototype=Dn.prototype={constructor:Tn,select:Ze,selectAll:Je,selectChild:rt,selectChildren:ct,filter:ut,data:vt,enter:ht,exit:wt,join:Ot,merge:jt,selection:Ln,order:xt,sort:kt,call:Et,nodes:St,node:Nt,size:Bt,empty:Ct,each:Pt,attr:Dt,style:Xt,property:Zt,classed:on,text:sn,html:hn,raise:fn,lower:gn,append:bn,insert:yn,remove:On,clone:kn,datum:_n,on:Cn,dispatch:Mn,[Symbol.iterator]:$n};const Xn={capture:!0,passive:!1};function Hn(e){e.preventDefault(),e.stopImmediatePropagation()}function Rn(e){var t=e.document.documentElement,n=In(e).on("dragstart.drag",Hn,Xn);"onselectstart"in t?n.on("selectstart.drag",Hn,Xn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qn(e,t){var n=e.document.documentElement,o=In(e).on("dragstart.drag",null);t&&(o.on("click.drag",Hn,Xn),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Un(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zn(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Gn(){}var Wn=.7,Qn=1/Wn,Kn="\\s*([+-]?\\d+)\\s*",Jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",to=/^#([0-9a-f]{3,8})$/,no=new RegExp(`^rgb\\(${Kn},${Kn},${Kn}\\)$`),oo=new RegExp(`^rgb\\(${eo},${eo},${eo}\\)$`),io=new RegExp(`^rgba\\(${Kn},${Kn},${Kn},${Jn}\\)$`),ro=new RegExp(`^rgba\\(${eo},${eo},${eo},${Jn}\\)$`),ao=new RegExp(`^hsl\\(${Jn},${eo},${eo}\\)$`),lo=new RegExp(`^hsla\\(${Jn},${eo},${eo},${Jn}\\)$`),so={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function co(){return this.rgb().formatHex()}function uo(){return this.rgb().formatHex8()}function ho(){return So(this).formatHsl()}function po(){return this.rgb().formatRgb()}function fo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=to.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?mo(t):3===n?new yo(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?go(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?go(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=no.exec(e))?new yo(t[1],t[2],t[3],1):(t=oo.exec(e))?new yo(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=io.exec(e))?go(t[1],t[2],t[3],t[4]):(t=ro.exec(e))?go(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ao.exec(e))?Eo(t[1],t[2]/100,t[3]/100,1):(t=lo.exec(e))?Eo(t[1],t[2]/100,t[3]/100,t[4]):so.hasOwnProperty(e)?mo(so[e]):"transparent"===e?new yo(NaN,NaN,NaN,0):null}function mo(e){return new yo(e>>16&255,e>>8&255,255&e,1)}function go(e,t,n,o){return o<=0&&(e=t=n=NaN),new yo(e,t,n,o)}function bo(e){return e instanceof Gn||(e=fo(e)),e?(e=e.rgb(),new yo(e.r,e.g,e.b,e.opacity)):new yo}function vo(e,t,n,o){return 1===arguments.length?bo(e):new yo(e,t,n,null==o?1:o)}function yo(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function wo(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}`}function Oo(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}${_o(255*(isNaN(this.opacity)?1:this.opacity))}`}function jo(){const e=xo(this.opacity);return`${1===e?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${1===e?")":`, ${e})`}`}function xo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _o(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function Eo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Bo(e,t,n,o)}function So(e){if(e instanceof Bo)return new Bo(e.h,e.s,e.l,e.opacity);if(e instanceof Gn||(e=fo(e)),!e)return new Bo;if(e instanceof Bo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,l=r-i,s=(r+i)/2;return l?(a=t===r?(n-o)/l+6*(n<o):n===r?(o-t)/l+2:(t-n)/l+4,l/=s<.5?r+i:2-r-i,a*=60):l=s>0&&s<1?0:a,new Bo(a,l,s,e.opacity)}function No(e,t,n,o){return 1===arguments.length?So(e):new Bo(e,t,n,null==o?1:o)}function Bo(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Co(e){return e=(e||0)%360,e<0?e+360:e}function Po(e){return Math.max(0,Math.min(1,e||0))}function Vo(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Un(Gn,fo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:co,formatHex:co,formatHex8:uo,formatHsl:ho,formatRgb:po,toString:po}),Un(yo,vo,Zn(Gn,{brighter(e){return e=null==e?Qn:Math.pow(Qn,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Wn:Math.pow(Wn,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yo(ko(this.r),ko(this.g),ko(this.b),xo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wo,formatHex:wo,formatHex8:Oo,formatRgb:jo,toString:jo})),Un(Bo,No,Zn(Gn,{brighter(e){return e=null==e?Qn:Math.pow(Qn,e),new Bo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Wn:Math.pow(Wn,e),new Bo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new yo(Vo(e>=240?e-240:e+120,i,o),Vo(e,i,o),Vo(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Bo(Co(this.h),Po(this.s),Po(this.l),xo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xo(this.opacity);return`${1===e?"hsl(":"hsla("}${Co(this.h)}, ${100*Po(this.s)}%, ${100*Po(this.l)}%${1===e?")":`, ${e})`}`}}));var Ao=e=>()=>e;function Mo(e,t){return function(n){return e+n*t}}function $o(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function zo(e){return 1==(e=+e)?To:function(t,n){return n-t?$o(t,n,e):Ao(isNaN(t)?n:t)}}function To(e,t){var n=t-e;return n?Mo(e,n):Ao(isNaN(e)?t:e)}var Do=function e(t){var n=zo(t);function o(e,t){var o=n((e=vo(e)).r,(t=vo(t)).r),i=n(e.g,t.g),r=n(e.b,t.b),a=To(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Lo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Io=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fo=new RegExp(Io.source,"g");function Yo(e){return function(){return e}}function Xo(e){return function(t){return e(t)+""}}function Ho(e,t){var n,o,i,r=Io.lastIndex=Fo.lastIndex=0,a=-1,l=[],s=[];for(e+="",t+="";(n=Io.exec(e))&&(o=Fo.exec(t));)(i=o.index)>r&&(i=t.slice(r,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,s.push({i:a,x:Lo(n,o)})),r=Fo.lastIndex;return r<t.length&&(i=t.slice(r),l[a]?l[a]+=i:l[++a]=i),l.length<2?s[0]?Xo(s[0].x):Yo(t):(t=s.length,function(e){for(var n,o=0;o<t;++o)l[(n=s[o]).i]=n.x(e);return l.join("")})}var Ro,qo=180/Math.PI,Uo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zo(e,t,n,o,i,r){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*qo,skewX:Math.atan(s)*qo,scaleX:a,scaleY:l}}function Go(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Uo:Zo(t.a,t.b,t.c,t.d,t.e,t.f)}function Wo(e){return null!=e&&(Ro||(Ro=document.createElementNS("http://www.w3.org/2000/svg","g")),Ro.setAttribute("transform",e),e=Ro.transform.baseVal.consolidate())?(e=e.matrix,Zo(e.a,e.b,e.c,e.d,e.e,e.f)):Uo}function Qo(e,t,n,o){function i(e){return e.length?e.pop()+" ":""}function r(e,o,i,r,a,l){if(e!==i||o!==r){var s=a.push("translate(",null,t,null,n);l.push({i:s-4,x:Lo(e,i)},{i:s-2,x:Lo(o,r)})}else(i||r)&&a.push("translate("+i+t+r+n)}function a(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(i(n)+"rotate(",null,o)-2,x:Lo(e,t)})):t&&n.push(i(n)+"rotate("+t+o)}function l(e,t,n,r){e!==t?r.push({i:n.push(i(n)+"skewX(",null,o)-2,x:Lo(e,t)}):t&&n.push(i(n)+"skewX("+t+o)}function s(e,t,n,o,r,a){if(e!==n||t!==o){var l=r.push(i(r)+"scale(",null,",",null,")");a.push({i:l-4,x:Lo(e,n)},{i:l-2,x:Lo(t,o)})}else(1!==n||1!==o)&&r.push(i(r)+"scale("+n+","+o+")")}return function(t,n){var o=[],i=[];return t=e(t),n=e(n),r(t.translateX,t.translateY,n.translateX,n.translateY,o,i),a(t.rotate,n.rotate,o,i),l(t.skewX,n.skewX,o,i),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,o,i),t=n=null,function(e){for(var t,n=-1,r=i.length;++n<r;)o[(t=i[n]).i]=t.x(e);return o.join("")}}}var Ko=Qo(Go,"px, ","px)","deg)"),Jo=Qo(Wo,", ",")",")"),ei=1e-12;function ti(e){return((e=Math.exp(e))+1/e)/2}function ni(e){return((e=Math.exp(e))-1/e)/2}function oi(e){return((e=Math.exp(2*e))-1)/(e+1)}var ii,ri,ai=function e(t,n,o){function i(e,i){var r,a,l=e[0],s=e[1],c=e[2],u=i[0],d=i[1],h=i[2],p=u-l,f=d-s,m=p*p+f*f;if(m<ei)a=Math.log(h/c)/t,r=function(e){return[l+e*p,s+e*f,c*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),b=(h*h-c*c+o*m)/(2*c*n*g),v=(h*h-c*c-o*m)/(2*h*n*g),y=Math.log(Math.sqrt(b*b+1)-b),w=Math.log(Math.sqrt(v*v+1)-v);a=(w-y)/t,r=function(e){var o=e*a,i=ti(y),r=c/(n*g)*(i*oi(t*o+y)-ni(y));return[l+r*p,s+r*f,c*i/ti(t*o+y)]}}return r.duration=1e3*a*t/Math.SQRT2,r}return i.rho=function(t){var n=Math.max(.001,+t),o=n*n,i=o*o;return e(n,o,i)},i}(Math.SQRT2,2,4),li=0,si=0,ci=0,ui=1e3,di=0,hi=0,pi=0,fi="object"==typeof performance&&performance.now?performance:Date,mi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gi(){return hi||(mi(bi),hi=fi.now()+pi)}function bi(){hi=0}function vi(){this._call=this._time=this._next=null}function yi(e,t,n){var o=new vi;return o.restart(e,t,n),o}function wi(){gi(),++li;for(var e,t=ii;t;)(e=hi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--li}function Oi(){hi=(di=fi.now())+pi,li=si=0;try{wi()}finally{li=0,xi(),hi=0}}function ji(){var e=fi.now(),t=e-di;t>ui&&(pi-=t,di=e)}function xi(){for(var e,t,n=ii,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ii=t);ri=e,ki(o)}function ki(e){if(!li){si&&(si=clearTimeout(si));var t=e-hi;t>24?(e<1/0&&(si=setTimeout(Oi,e-fi.now()-pi)),ci&&(ci=clearInterval(ci))):(ci||(di=fi.now(),ci=setInterval(ji,ui)),li=1,mi(Oi))}}function _i(e,t,n){var o=new vi;return t=null==t?0:+t,o.restart(n=>{o.stop(),e(n+t)},t,n),o}vi.prototype=yi.prototype={constructor:vi,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?gi():+n)+(null==t?0:+t),!this._next&&ri!==this&&(ri?ri._next=this:ii=this,ri=this),this._call=e,this._time=n,ki()},stop:function(){this._call&&(this._call=null,this._time=1/0,ki())}};var Ei=$e("start","end","cancel","interrupt"),Si=[],Ni=0,Bi=1,Ci=2,Pi=3,Vi=4,Ai=5,Mi=6;function $i(e,t,n,o,i,r){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};Li(e,n,{name:t,index:o,group:i,on:Ei,tween:Si,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ni})}function zi(e,t){var n=Di(e,t);if(n.state>Ni)throw new Error("too late; already scheduled");return n}function Ti(e,t){var n=Di(e,t);if(n.state>Pi)throw new Error("too late; already running");return n}function Di(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Li(e,t,n){var o,i=e.__transition;function r(e){n.state=Bi,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(r){var c,u,d,h;if(n.state!==Bi)return s();for(c in i)if(h=i[c],h.name===n.name){if(h.state===Pi)return _i(a);h.state===Vi?(h.state=Mi,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=Mi,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(_i((function(){n.state===Pi&&(n.state=Vi,n.timer.restart(l,n.delay,n.time),l(r))})),n.state=Ci,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ci){for(n.state=Pi,o=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++u]=h);o.length=u+1}}function l(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=Ai,1),r=-1,a=o.length;++r<a;)o[r].call(e,i);n.state===Ai&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var o in n.state=Mi,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=yi(r,0,n.time)}function Ii(e,t){var n,o,i,r=e.__transition,a=!0;if(r){for(i in t=null==t?null:t+"",r)(n=r[i]).name===t?(o=n.state>Ci&&n.state<Ai,n.state=Mi,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]):a=!1;a&&delete e.__transition}}function Fi(e){return this.each((function(){Ii(this,e)}))}function Yi(e,t){var n,o;return function(){var i=Ti(this,e),r=i.tween;if(r!==n){o=n=r;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function Xi(e,t,n){var o,i;if("function"!=typeof n)throw new Error;return function(){var r=Ti(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:t,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===t){i[s]=l;break}s===c&&i.push(l)}r.tween=i}}function Hi(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,i=Di(this.node(),n).tween,r=0,a=i.length;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((null==t?Yi:Xi)(n,e,t))}function Ri(e,t,n){var o=e._id;return e.each((function(){var e=Ti(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Di(e,o).value[t]}}function qi(e,t){var n;return("number"==typeof t?Lo:t instanceof fo?Do:(n=fo(t))?(t=n,Do):Ho)(e,t)}function Ui(e){return function(){this.removeAttribute(e)}}function Zi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gi(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function Wi(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function Qi(e,t,n){var o,i,r;return function(){var a,l,s=n(this);return null==s?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function Ki(e,t,n){var o,i,r;return function(){var a,l,s=n(this);return null==s?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function Ji(e,t){var n=Ye(e),o="transform"===n?Jo:qi;return this.attrTween(e,"function"==typeof t?(n.local?Ki:Qi)(n,o,Ri(this,"attr."+e,t)):null==t?(n.local?Zi:Ui)(n):(n.local?Wi:Gi)(n,o,t))}function er(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tr(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nr(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&tr(e,i)),n}return i._value=t,i}function or(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&er(e,i)),n}return i._value=t,i}function ir(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=Ye(e);return this.tween(n,(o.local?nr:or)(o,t))}function rr(e,t){return function(){zi(this,e).delay=+t.apply(this,arguments)}}function ar(e,t){return t=+t,function(){zi(this,e).delay=t}}function lr(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?rr:ar)(t,e)):Di(this.node(),t).delay}function sr(e,t){return function(){Ti(this,e).duration=+t.apply(this,arguments)}}function cr(e,t){return t=+t,function(){Ti(this,e).duration=t}}function ur(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?sr:cr)(t,e)):Di(this.node(),t).duration}function dr(e,t){if("function"!=typeof t)throw new Error;return function(){Ti(this,e).ease=t}}function hr(e){var t=this._id;return arguments.length?this.each(dr(t,e)):Di(this.node(),t).ease}function pr(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Ti(this,e).ease=n}}function fr(e){if("function"!=typeof e)throw new Error;return this.each(pr(this._id,e))}function mr(e){"function"!=typeof e&&(e=et(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,s=o[i]=[],c=0;c<l;++c)(r=a[c])&&e.call(r,r.__data__,c,a)&&s.push(r);return new Hr(o,this._parents,this._name,this._id)}function gr(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var s,c=t[l],u=n[l],d=c.length,h=a[l]=new Array(d),p=0;p<d;++p)(s=c[p]||u[p])&&(h[p]=s);for(;l<o;++l)a[l]=t[l];return new Hr(a,this._parents,this._name,this._id)}function br(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function vr(e,t,n){var o,i,r=br(t)?zi:Ti;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(t,n),a.on=i}}function yr(e,t){var n=this._id;return arguments.length<2?Di(this.node(),n).on.on(e):this.each(vr(n,e,t))}function wr(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Or(){return this.on("end.remove",wr(this._id))}function jr(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Ue(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l,s,c=o[a],u=c.length,d=r[a]=new Array(u),h=0;h<u;++h)(l=c[h])&&(s=e.call(l,l.__data__,h,c))&&("__data__"in l&&(s.__data__=l.__data__),d[h]=s,$i(d[h],t,n,h,d,Di(l,n)));return new Hr(r,this._parents,t,n)}function xr(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Qe(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var s,c=o[l],u=c.length,d=0;d<u;++d)if(s=c[d]){for(var h,p=e.call(s,s.__data__,d,c),f=Di(s,n),m=0,g=p.length;m<g;++m)(h=p[m])&&$i(h,t,n,m,p,f);r.push(p),a.push(s)}return new Hr(r,a,t,n)}var kr=Dn.prototype.constructor;function _r(){return new kr(this._groups,this._parents)}function Er(e,t){var n,o,i;return function(){var r=Ht(this,e),a=(this.style.removeProperty(e),Ht(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function Sr(e){return function(){this.style.removeProperty(e)}}function Nr(e,t,n){var o,i,r=n+"";return function(){var a=Ht(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Br(e,t,n){var o,i,r;return function(){var a=Ht(this,e),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(e),s=l=Ht(this,e)),a===s?null:a===o&&s===i?r:(i=s,r=t(o=a,l))}}function Cr(e,t){var n,o,i,r,a="style."+t,l="end."+a;return function(){var s=Ti(this,e),c=s.on,u=null==s.value[a]?r||(r=Sr(t)):void 0;(c!==n||i!==u)&&(o=(n=c).copy()).on(l,i=u),s.on=o}}function Pr(e,t,n){var o="transform"===(e+="")?Ko:qi;return null==t?this.styleTween(e,Er(e,o)).on("end.style."+e,Sr(e)):"function"==typeof t?this.styleTween(e,Br(e,o,Ri(this,"style."+e,t))).each(Cr(this._id,e)):this.styleTween(e,Nr(e,o,t),n).on("end.style."+e,null)}function Vr(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ar(e,t,n){var o,i;function r(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Vr(e,r,n)),o}return r._value=t,r}function Mr(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,Ar(e,t,null==n?"":n))}function $r(e){return function(){this.textContent=e}}function zr(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function Tr(e){return this.tween("text","function"==typeof e?zr(Ri(this,"text",e)):$r(null==e?"":e+""))}function Dr(e){return function(t){this.textContent=e.call(this,t)}}function Lr(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Dr(o)),t}return o._value=e,o}function Ir(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Lr(e))}function Fr(){for(var e=this._name,t=this._id,n=Rr(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],s=l.length,c=0;c<s;++c)if(a=l[c]){var u=Di(a,t);$i(a,e,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Hr(o,this._parents,e,n)}function Yr(){var e,t,n=this,o=n._id,i=n.size();return new Promise((function(r,a){var l={value:a},s={value:function(){0==--i&&r()}};n.each((function(){var n=Ti(this,o),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),n.on=t})),0===i&&r()}))}var Xr=0;function Hr(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Rr(){return++Xr}var qr=Dn.prototype;function Ur(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Hr.prototype={constructor:Hr,select:jr,selectAll:xr,selectChild:qr.selectChild,selectChildren:qr.selectChildren,filter:mr,merge:gr,selection:_r,transition:Fr,call:qr.call,nodes:qr.nodes,node:qr.node,size:qr.size,empty:qr.empty,each:qr.each,on:yr,attr:Ji,attrTween:ir,style:Pr,styleTween:Mr,text:Tr,textTween:Ir,remove:Or,tween:Hi,delay:lr,duration:ur,ease:hr,easeVarying:fr,end:Yr,[Symbol.iterator]:qr[Symbol.iterator]};var Zr={time:null,delay:0,duration:250,ease:Ur};function Gr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Wr(e){var t,n;e instanceof Hr?(t=e._id,e=e._name):(t=Rr(),(n=Zr).time=gi(),e=null==e?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],s=l.length,c=0;c<s;++c)(a=l[c])&&$i(a,e,t,c,l,n||Gr(a,t));return new Hr(o,this._parents,e,t)}Dn.prototype.interrupt=Fi,Dn.prototype.transition=Wr;var Qr=e=>()=>e;function Kr(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Jr(e,t,n){this.k=e,this.x=t,this.y=n}Jr.prototype={constructor:Jr,scale:function(e){return 1===e?this:new Jr(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Jr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ea,ta,na,oa,ia,ra,aa=new Jr(1,0,0);function la(e){e.stopImmediatePropagation()}function sa(e){e.preventDefault(),e.stopImmediatePropagation()}function ca(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function ua(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function da(){return this.__zoom||aa}function ha(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function pa(){return navigator.maxTouchPoints||"ontouchstart"in this}function fa(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function ma(){var e,t,n,o=ca,i=ua,r=fa,a=ha,l=pa,s=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=ai,h=$e("start","zoom","end"),p=500,f=150,m=0,g=10;function b(e){e.property("__zoom",da).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",E).filter(l).on("touchstart.zoom",S).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return t=Math.max(s[0],Math.min(s[1],t)),t===e.k?e:new Jr(t,e.x,e.y)}function y(e,t,n){var o=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return o===e.x&&i===e.y?e:new Jr(e.k,o,i)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function O(e,t,n,o){e.on("start.zoom",(function(){j(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){j(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,r=arguments,a=j(e,r).event(o),l=i.apply(e,r),s=null==n?w(l):"function"==typeof n?n.apply(e,r):n,c=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),u=e.__zoom,h="function"==typeof t?t.apply(e,r):t,p=d(u.invert(s).concat(c/u.k),h.invert(s).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=p(e),n=c/t[2];e=new Jr(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}}))}function j(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function k(e,...t){if(o.apply(this,arguments)){var n=j(this,t).event(e),i=this.__zoom,l=Math.max(s[0],Math.min(s[1],i.k*Math.pow(2,a.apply(this,arguments)))),u=Yn(e);if(n.wheel)(n.mouse[0][0]!==u[0]||n.mouse[0][1]!==u[1])&&(n.mouse[1]=i.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(i.k===l)return;n.mouse=[u,i.invert(u)],Ii(this),n.start()}sa(e),n.wheel=setTimeout(d,f),n.zoom("mouse",r(y(v(i,l),n.mouse[0],n.mouse[1]),n.extent,c))}function d(){n.wheel=null,n.end()}}function _(e,...t){if(!n&&o.apply(this,arguments)){var i=e.currentTarget,a=j(this,t,!0).event(e),l=In(e.view).on("mousemove.zoom",h,!0).on("mouseup.zoom",p,!0),s=Yn(e,i),u=e.clientX,d=e.clientY;Rn(e.view),la(e),a.mouse=[s,this.__zoom.invert(s)],Ii(this),a.start()}function h(e){if(sa(e),!a.moved){var t=e.clientX-u,n=e.clientY-d;a.moved=t*t+n*n>m}a.event(e).zoom("mouse",r(y(a.that.__zoom,a.mouse[0]=Yn(e,i),a.mouse[1]),a.extent,c))}function p(e){l.on("mousemove.zoom mouseup.zoom",null),qn(e.view,a.moved),sa(e),a.event(e).end()}}function E(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Yn(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),s=n.k*(e.shiftKey?.5:2),d=r(y(v(n,s),a,l),i.apply(this,t),c);sa(e),u>0?In(this).transition().duration(u).call(O,d,a,e):In(this).call(b.transform,d,a,e)}}function S(n,...i){if(o.apply(this,arguments)){var r,a,l,s,c=n.touches,u=c.length,d=j(this,i,n.changedTouches.length===u).event(n);for(la(n),a=0;a<u;++a)l=c[a],s=Yn(l,this),s=[s,this.__zoom.invert(s),l.identifier],d.touch0?!d.touch1&&d.touch0[2]!==s[2]&&(d.touch1=s,d.taps=0):(d.touch0=s,r=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),r&&(d.taps<2&&(t=s[0],e=setTimeout((function(){e=null}),p)),Ii(this),d.start())}}function N(e,...t){if(this.__zooming){var n,o,i,a,l=j(this,t).event(e),s=e.changedTouches,u=s.length;for(sa(e),n=0;n<u;++n)o=s[n],i=Yn(o,this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=i:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=i);if(o=l.that.__zoom,l.touch1){var d=l.touch0[0],h=l.touch0[1],p=l.touch1[0],f=l.touch1[1],m=(m=p[0]-d[0])*m+(m=p[1]-d[1])*m,g=(g=f[0]-h[0])*g+(g=f[1]-h[1])*g;o=v(o,Math.sqrt(m/g)),i=[(d[0]+p[0])/2,(d[1]+p[1])/2],a=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!l.touch0)return;i=l.touch0[0],a=l.touch0[1]}l.zoom("touch",r(y(o,i,a),l.extent,c))}}function B(e,...o){if(this.__zooming){var i,r,a=j(this,o).event(e),l=e.changedTouches,s=l.length;for(la(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),i=0;i<s;++i)r=l[i],a.touch0&&a.touch0[2]===r.identifier?delete a.touch0:a.touch1&&a.touch1[2]===r.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(r=Yn(r,this),Math.hypot(t[0]-r[0],t[1]-r[1])<g)){var c=In(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return b.transform=function(e,t,n,o){var i=e.selection?e.selection():e;i.property("__zoom",da),e!==i?O(e,t,n,o):i.interrupt().each((function(){j(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},b.scaleBy=function(e,t,n,o){b.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,o)},b.scaleTo=function(e,t,n,o){b.transform(e,(function(){var e=i.apply(this,arguments),o=this.__zoom,a=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(a),s="function"==typeof t?t.apply(this,arguments):t;return r(y(v(o,s),a,l),e,c)}),n,o)},b.translateBy=function(e,t,n,o){b.transform(e,(function(){return r(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,o)},b.translateTo=function(e,t,n,o,a){b.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,l=null==o?w(e):"function"==typeof o?o.apply(this,arguments):o;return r(aa.translate(l[0],l[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),o,a)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=In(this.that).datum();h.call(e,this.that,new Kr(e,{sourceEvent:this.sourceEvent,target:b,type:e,transform:this.that.__zoom,dispatch:h}),t)}},b.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Qr(+e),b):a},b.filter=function(e){return arguments.length?(o="function"==typeof e?e:Qr(!!e),b):o},b.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Qr(!!e),b):l},b.extent=function(e){return arguments.length?(i="function"==typeof e?e:Qr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),b):i},b.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],b):[s[0],s[1]]},b.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],b):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},b.constrain=function(e){return arguments.length?(r=e,b):r},b.duration=function(e){return arguments.length?(u=+e,b):u},b.interpolate=function(e){return arguments.length?(d=e,b):d},b.on=function(){var e=h.on.apply(h,arguments);return e===h?b:e},b.clickDistance=function(e){return arguments.length?(m=(e=+e)*e,b):Math.sqrt(m)},b.tapDistance=function(e){return arguments.length?(g=+e,b):g},b}(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ea||(ea={})),function(e){e.Lines="lines",e.Dots="dots"}(ta||(ta={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"}(na||(na={})),function(e){e.Strict="strict",e.Loose="loose"}(oa||(oa={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(ia||(ia={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(ra||(ra={}));const ga=Symbol("vueFlow"),ba=Symbol("nodeId"),va=Symbol("slots"),ya=()=>({edgesChange:g(),nodesChange:g(),nodeDoubleClick:g(),nodeClick:g(),nodeMouseEnter:g(),nodeMouseMove:g(),nodeMouseLeave:g(),nodeContextMenu:g(),nodeDragStart:g(),nodeDrag:g(),nodeDragStop:g(),miniMapNodeClick:g(),miniMapNodeDoubleClick:g(),connect:g(),connectStart:g(),connectStop:g(),connectEnd:g(),paneReady:g(),move:g(),moveStart:g(),moveEnd:g(),selectionDragStart:g(),selectionDrag:g(),selectionDragStop:g(),selectionContextMenu:g(),paneScroll:g(),paneClick:g(),paneContextMenu:g(),edgeContextMenu:g(),edgeMouseEnter:g(),edgeMouseMove:g(),edgeMouseLeave:g(),edgeDoubleClick:g(),edgeClick:g(),edgeUpdateStart:g(),edgeUpdate:g(),edgeUpdateEnd:g()}),wa=(e,t)=>{for(const[n,o]of Object.entries(t))o.on(t=>{e(n,t)})};var Oa=(e,t)=>wa(e,t);const ja=["data-handleid","data-nodeid","data-handlepos"],xa={name:"Handle"};var ka;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ka||(ka={}));const _a=Object(i["defineComponent"])(p(h({},xa),{props:{id:null,type:{default:"source"},position:{default:"top"},isValidConnection:null,connectable:{type:Boolean,default:!0}},setup(e){const t=e,{id:n,hooks:o,connectionStartHandle:r,connectionMode:a}=Jc(),l=Object(i["inject"])(ba,""),s=Object(i["computed"])(()=>{var e;return null!=(e=t.id)?e:a.value===oa.Strict?null:`${l}__handle-${t.position}`}),{onMouseDown:c,onClick:u}=nu(),d=e=>c(e,s.value,l,"target"===t.type,t.isValidConnection,void 0),h=e=>{var n;return u(e,null!=(n=s.value)?n:null,l,t.type,t.isValidConnection)},p=Object(i["computed"])(()=>{var e,n,o;return["vue-flow__handle","vue-flow__handle-"+t.position,"vue-flow__handle-"+s.value,"nodrag",{source:"target"!==t.type,target:"target"===t.type,connectable:t.connectable,connecting:(null==(e=r.value)?void 0:e.nodeId)===l&&(null==(n=r.value)?void 0:n.handleId)===s.value&&(null==(o=r.value)?void 0:o.type)===t.type}]});return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{"data-handleid":Object(i["unref"])(s),"data-nodeid":Object(i["unref"])(l),"data-handlepos":t.position,class:Object(i["normalizeClass"])(Object(i["unref"])(p)),onMousedown:d,onClick:h},[Object(i["renderSlot"])(e.$slots,"default",Object(i["mergeProps"])({nodeId:Object(i["unref"])(l)},t))],42,ja))}})),Ea=["innerHTML"],Sa={name:"DefaultNode"};var Na;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Na||(Na={}));const Ba=Object(i["defineComponent"])(p(h({},Sa),{props:{id:null,type:null,data:null,selected:{type:Boolean},connectable:{type:Boolean,default:!1},computedPosition:null,position:null,dimensions:null,label:null,isValidTargetPos:null,isValidSourcePos:null,parentNode:null,dragging:{type:Boolean},zIndex:null,targetPosition:{default:"top"},sourcePosition:{default:"bottom"},dragHandle:null,nodeElement:null},setup(e){const t=e;return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createVNode"])(_a,{type:"target",position:t.targetPosition,"is-connectable":t.connectable,"is-valid-connection":t.isValidTargetPos},null,8,["position","is-connectable","is-valid-connection"]),"string"!=typeof t.label&&t.label?(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(t.label),{key:0})):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:1,innerHTML:t.label},null,8,Ea)),Object(i["createVNode"])(_a,{type:"source",position:t.sourcePosition,"is-connectable":t.connectable,"is-valid-connection":t.isValidSourcePos},null,8,["position","is-connectable","is-valid-connection"])],64))}})),Ca=["innerHTML"],Pa={name:"InputNode"};var Va;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Va||(Va={}));const Aa=Object(i["defineComponent"])(p(h({},Pa),{props:{id:null,type:null,data:null,selected:{type:Boolean},connectable:{type:Boolean,default:!1},computedPosition:null,position:null,dimensions:null,label:null,isValidTargetPos:null,isValidSourcePos:null,parentNode:null,dragging:{type:Boolean},zIndex:null,targetPosition:null,sourcePosition:{default:"bottom"},dragHandle:null,nodeElement:null},setup(e){const t=e;return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,["string"!=typeof t.label&&t.label?(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(t.label),{key:0})):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:1,innerHTML:t.label},null,8,Ca)),Object(i["createVNode"])(_a,{type:"source",position:t.sourcePosition,connectable:t.connectable,"is-valid-connection":t.isValidSourcePos},null,8,["position","connectable","is-valid-connection"])],64))}})),Ma=["innerHTML"],$a={name:"OutputNode"};var za;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(za||(za={}));const Ta=Object(i["defineComponent"])(p(h({},$a),{props:{id:null,type:null,data:null,selected:{type:Boolean},connectable:{type:Boolean,default:!1},computedPosition:null,position:null,dimensions:null,label:null,isValidTargetPos:null,isValidSourcePos:null,parentNode:null,dragging:{type:Boolean},zIndex:null,targetPosition:{default:"top"},sourcePosition:null,dragHandle:null,nodeElement:null},setup(e){const t=e;return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,["string"!=typeof t.label&&t.label?(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(t.label),Object(i["normalizeProps"])(Object(i["mergeProps"])({key:0},t.label)),null,16)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:1,innerHTML:t.label},null,8,Ma)),Object(i["createVNode"])(_a,{type:"source",position:t.targetPosition,"is-connectable":t.connectable,"is-valid-connection":t.isValidTargetPos},null,8,["position","is-connectable","is-valid-connection"])],64))}}));function Da(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function La({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,l;switch(e){case ea.Left:a=t-Da(t-o,r),l=n;break;case ea.Right:a=t+Da(o-t,r),l=n;break;case ea.Top:a=t,l=n-Da(n-i,r);break;case ea.Bottom:a=t,l=n+Da(i-n,r);break}return[a,l]}function Ia({sourceX:e,sourceY:t,sourcePosition:n=ea.Bottom,targetX:o,targetY:i,targetPosition:r=ea.Top,curvature:a=.25}){const[l,s]=La({pos:n,x1:e,y1:t,x2:o,y2:i,c:a}),[c,u]=La({pos:r,x1:o,y1:i,x2:e,y2:t,c:a});return`M${e},${t} C${l},${s} ${c},${u} ${o},${i}`}function Fa({sourceX:e,sourceY:t,sourcePosition:n=ea.Bottom,targetX:o,targetY:i,targetPosition:r=ea.Top,curvature:a=.25}){const[l,s]=La({pos:n,x1:e,y1:t,x2:o,y2:i,c:a}),[c,u]=La({pos:r,x1:o,y1:i,x2:e,y2:t,c:a}),d=.125*e+.375*l+.375*c+.125*o,h=.125*t+.375*s+.375*u+.125*i,p=Math.abs(d-e),f=Math.abs(h-t);return[d,h,p,f]}function Ya({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case ea.Left:case ea.Right:r=.5*(t+o),a=n;break;case ea.Top:case ea.Bottom:r=t,a=.5*(n+i);break}return[r,a]}function Xa({sourceX:e,sourceY:t,sourcePosition:n=ea.Bottom,targetX:o,targetY:i,targetPosition:r=ea.Top}){const[a,l]=Ya({pos:n,x1:e,y1:t,x2:o,y2:i}),[s,c]=Ya({pos:r,x1:o,y1:i,x2:e,y2:t});return`M${e},${t} C${a},${l} ${s},${c} ${o},${i}`}function Ha({sourceX:e,sourceY:t,sourcePosition:n=ea.Bottom,targetX:o,targetY:i,targetPosition:r=ea.Top}){const[a,l]=Ya({pos:n,x1:e,y1:t,x2:o,y2:i}),[s,c]=Ya({pos:r,x1:o,y1:i,x2:e,y2:t}),u=.125*e+.375*a+.375*s+.125*o,d=.125*t+.375*l+.375*c+.125*i,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}const Ra=[ea.Left,ea.Right],qa=({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:i=ea.Bottom,targetPosition:r=ea.Top})=>{const a=Ra.includes(i),l=Ra.includes(r);if(a&&!l||l&&!a){const i=a?Math.abs(n-e):0,r=e>n?e-i:e+i,l=a?0:Math.abs(o-t),s=t<o?t+l:t-l;return[r,s,i,l]}const s=Math.abs(n-e)/2,c=n<e?n+s:n-s,u=Math.abs(o-t)/2,d=o<t?o+u:o-u;return[c,d,s,u]},Ua=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e+n},${t}`,Za=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t-n}`,Ga=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e-n},${t}`,Wa=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t-n}`,Qa=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t+n}`,Ka=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e+n},${t}`,Ja=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e-n},${t}`,el=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t+n}`;function tl({sourceX:e,sourceY:t,sourcePosition:n=ea.Bottom,targetX:o,targetY:i,targetPosition:r=ea.Top,borderRadius:a=5,centerX:l,centerY:s}){const[c,u,d,h]=qa({sourceX:e,sourceY:t,targetX:o,targetY:i}),p=Math.min(a,Math.abs(o-e)),f=Math.min(a,Math.abs(i-t)),m=Math.min(p,f,d,h),g=[ea.Left,ea.Right],b="undefined"!=typeof l?l:c,v="undefined"!=typeof s?s:u;let y,w;return e<=o?(y=t<=i?Ua(e,v,m):Ka(e,v,m),w=t<=i?el(o,v,m):Wa(o,v,m)):(y=t<i?Ga(e,v,m):Ja(e,v,m),w=t<i?Qa(o,v,m):Za(o,v,m)),g.includes(n)&&g.includes(r)?e<=o?(y=t<=i?el(b,t,m):Wa(b,t,m),w=t<=i?Ua(b,i,m):Ka(b,i,m)):(n===ea.Right&&r===ea.Left||n===ea.Left&&r===ea.Right||n===ea.Left&&r===ea.Left)&&(y=t<=i?Qa(b,t,m):Za(b,t,m),w=t<=i?Ga(b,i,m):Ja(b,i,m)):g.includes(n)&&!g.includes(r)?(y=e<=o?t<=i?el(o,t,m):Wa(o,t,m):t<=i?Qa(o,t,m):Za(o,t,m),w=""):!g.includes(n)&&g.includes(r)&&(y=e<=o?t<=i?Ua(e,i,m):Ka(e,i,m):t<=i?Ga(e,i,m):Ja(e,i,m),w=""),`M ${e},${t}${y}${w}L ${o},${i}`}const nl=["transform"],ol=["width","height","x","y","rx","ry"],il=["y"],rl={name:"EdgeText"},al=Object(i["defineComponent"])(p(h({},rl),{props:{x:null,y:null,label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=e,n=Oe("edge-text",null),o=Object(i["ref"])({x:0,y:0,width:0,height:0});Object(i["onMounted"])(()=>{o.value=n.value.getBBox()});const r=Object(i["computed"])(()=>`translate(${t.x-o.value.width/2} ${t.y-o.value.height/2})`);return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("g",{transform:Object(i["unref"])(r),class:Object(i["normalizeClass"])([t.class,"vue-flow__edge-textwrapper"])},[t.labelShowBg?(Object(i["openBlock"])(),Object(i["createElementBlock"])("rect",{key:0,class:"vue-flow__edge-textbg",width:o.value.width+2*t.labelBgPadding[0]+"px",height:o.value.height+2*t.labelBgPadding[1]+"px",x:-t.labelBgPadding[0],y:-t.labelBgPadding[1],style:Object(i["normalizeStyle"])(t.labelBgStyle),rx:t.labelBgBorderRadius,ry:t.labelBgBorderRadius},null,12,ol)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("text",{ref:"edge-text",class:"vue-flow__edge-text",y:o.value.height/2,dy:"0.3em",style:Object(i["normalizeStyle"])(t.labelStyle)},[Object(i["renderSlot"])(e.$slots,"default",Object(i["normalizeProps"])(Object(i["guardReactiveProps"])(t)),()=>["string"!=typeof t.label&&(t.label,1)?(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(t.label),{key:0})):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.label),1)],64))])],12,il)],10,nl))}})),ll=["d","marker-end","marker-start"],sl={name:"BaseEdge",inheritAttrs:!1},cl=Object(i["defineComponent"])(p(h({},sl),{props:{centerX:null,centerY:null,path:null,label:null,style:null,labelStyle:null,labelShowBg:{type:Boolean},labelBgStyle:null,labelBgPadding:null,labelBgBorderRadius:null,markerStart:null,markerEnd:null},setup(e){const t=e;return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("path",{style:Object(i["normalizeStyle"])(t.style),d:t.path,class:"vue-flow__edge-path","marker-end":t.markerEnd,"marker-start":t.markerStart},null,12,ll),t.label?(Object(i["openBlock"])(),Object(i["createBlock"])(al,{key:0,x:t.centerX,y:t.centerY,label:t.label,"label-style":t.labelStyle,"label-show-bg":t.labelShowBg,"label-bg-style":t.labelBgStyle,"label-bg-padding":t.labelBgPadding,"label-bg-border-radius":t.labelBgBorderRadius},null,8,["x","y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius"])):Object(i["createCommentVNode"])("",!0)],64))}})),ul={name:"BezierEdge"};var dl;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(dl||(dl={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(dl||(dl={}));const hl=Object(i["defineComponent"])(p(h({},ul),{props:{id:null,sourceNode:null,targetNode:null,label:{default:""},type:null,data:null,style:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean,default:!1},sourcePosition:{default:"bottom"},targetPosition:{default:"top"},sourceHandleId:null,targetHandleId:null,source:null,target:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:null,labelBgBorderRadius:null,animated:{type:Boolean},updatable:{type:Boolean},markerStart:null,markerEnd:null,curvature:null},setup(e){const t=e,n=Object(i["computed"])(()=>Fa({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.curvature})),o=Object(i["computed"])(()=>t.sourceX&&t.sourceY?Ia({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.curvature}):"");return(e,r)=>(Object(i["openBlock"])(),Object(i["createBlock"])(cl,{path:Object(i["unref"])(o),"center-x":Object(i["unref"])(n)[0],"center-y":Object(i["unref"])(n)[1],label:t.label,"label-style":t.labelStyle,"label-show-bg":t.labelShowBg,"label-bg-style":t.labelBgStyle,"label-bg-padding":t.labelBgPadding,"label-bg-border-radius":t.labelBgBorderRadius,style:Object(i["normalizeStyle"])(t.style),"marker-end":t.markerEnd,"marker-start":t.markerStart},null,8,["path","center-x","center-y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","style","marker-end","marker-start"]))}})),pl={name:"SimpleBezierEdge"};var fl;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fl||(fl={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(fl||(fl={}));const ml=Object(i["defineComponent"])(p(h({},pl),{props:{id:null,sourceNode:null,targetNode:null,label:{default:""},type:null,data:null,style:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean,default:!1},sourcePosition:{default:"bottom"},targetPosition:{default:"top"},sourceHandleId:null,targetHandleId:null,source:null,target:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:null,labelBgBorderRadius:null,animated:{type:Boolean},updatable:{type:Boolean},markerStart:null,markerEnd:null,curvature:null},setup(e){const t=e,n=Object(i["computed"])(()=>Ha({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),o=Object(i["computed"])(()=>t.sourceX&&t.sourceY?Xa({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition}):"");return(e,r)=>(Object(i["openBlock"])(),Object(i["createBlock"])(cl,{path:Object(i["unref"])(o),"center-x":Object(i["unref"])(n)[0],"center-y":Object(i["unref"])(n)[1],label:t.label,"label-style":t.labelStyle,"label-show-bg":t.labelShowBg,"label-bg-style":t.labelBgStyle,"label-bg-padding":t.labelBgPadding,"label-bg-border-radius":t.labelBgBorderRadius,style:Object(i["normalizeStyle"])(t.style),"marker-end":t.markerEnd,"marker-start":t.markerStart},null,8,["path","center-x","center-y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","style","marker-end","marker-start"]))}})),gl={name:"SmoothStepEdge",inheritAttrs:!1};var bl;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bl||(bl={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(bl||(bl={}));const vl=Object(i["defineComponent"])(p(h({},gl),{props:{id:null,sourceNode:null,targetNode:null,label:{default:""},type:null,data:null,style:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean,default:!1},sourcePosition:{default:"bottom"},targetPosition:{default:"top"},sourceHandleId:null,targetHandleId:null,source:null,target:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:null,labelBgBorderRadius:null,animated:{type:Boolean},updatable:{type:Boolean},markerStart:null,markerEnd:null,borderRadius:null},setup(e){const t=e,n=Object(i["computed"])(()=>qa({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),o=Object(i["computed"])(()=>t.sourceX&&t.sourceY?tl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:t.borderRadius}):"");return(e,r)=>(Object(i["openBlock"])(),Object(i["createBlock"])(cl,{path:Object(i["unref"])(o),"center-x":Object(i["unref"])(n)[0],"center-y":Object(i["unref"])(n)[1],label:t.label,"label-style":t.labelStyle,"label-show-bg":t.labelShowBg,"label-bg-style":t.labelBgStyle,"label-bg-padding":t.labelBgPadding,"label-bg-border-radius":t.labelBgBorderRadius,style:Object(i["normalizeStyle"])(t.style),"marker-end":t.markerEnd,"marker-start":t.markerStart},null,8,["path","center-x","center-y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","style","marker-end","marker-start"]))}})),yl={name:"StepEdge",inheritAttrs:!1};var wl;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(wl||(wl={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(wl||(wl={}));const Ol=Object(i["defineComponent"])(p(h({},yl),{props:{id:null,sourceNode:null,targetNode:null,label:{default:""},type:null,data:null,style:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean,default:!1},sourcePosition:{default:"bottom"},targetPosition:{default:"top"},sourceHandleId:null,targetHandleId:null,source:null,target:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:null,labelBgBorderRadius:null,animated:{type:Boolean},updatable:{type:Boolean},markerStart:null,markerEnd:null,curvature:null},setup(e){const t=e;return(e,n)=>(Object(i["openBlock"])(),Object(i["createBlock"])(vl,Object(i["mergeProps"])(t,{"border-radius":0}),null,16))}})),jl={name:"StraightEdge"};var xl;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(xl||(xl={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(xl||(xl={}));const kl=Object(i["defineComponent"])(p(h({},jl),{props:{id:null,sourceNode:null,targetNode:null,label:{default:""},type:null,data:null,style:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean,default:!1},sourcePosition:{default:"bottom"},targetPosition:{default:"top"},sourceHandleId:null,targetHandleId:null,source:null,target:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:null,labelBgBorderRadius:null,animated:{type:Boolean},updatable:{type:Boolean},markerStart:null,markerEnd:null,curvature:null},setup(e){const t=e,n=Object(i["computed"])(()=>{const e=Math.abs(t.targetY-t.sourceY)/2;return t.targetY<t.sourceY?t.targetY+e:t.targetY-e}),o=Object(i["computed"])(()=>{const e=Math.abs(t.targetX-t.sourceX)/2;return t.targetX<t.sourceX?t.targetX+e:t.targetX-e}),r=Object(i["computed"])(()=>`M ${t.sourceX},${t.sourceY}L ${t.targetX},${t.targetY}`);return(e,a)=>(Object(i["openBlock"])(),Object(i["createBlock"])(cl,{path:Object(i["unref"])(r),"center-x":Object(i["unref"])(o),"center-y":Object(i["unref"])(n),label:t.label,"label-style":t.labelStyle,"label-show-bg":t.labelShowBg,"label-bg-style":t.labelBgStyle,"label-bg-padding":t.labelBgPadding,"label-bg-border-radius":t.labelBgBorderRadius,style:Object(i["normalizeStyle"])(t.style),"marker-end":t.markerEnd,"marker-start":t.markerStart},null,8,["path","center-x","center-y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","style","marker-end","marker-start"]))}})),_l=["cx","cy","r"],El={name:"EdgeAnchor"},Sl=Object(i["defineComponent"])(p(h({},El),{props:{position:{default:ea.Top},centerX:{default:0},centerY:{default:0},radius:{default:10}},setup(e){const t=e,n=(e,t,n)=>n===ea.Left?e-t:n===ea.Right?e+t:e,o=(e,t,n)=>n===ea.Top?e-t:n===ea.Bottom?e+t:e,r=Object(i["computed"])(()=>{const e=n(t.centerX,t.radius,t.position);return isNaN(e)?0:e}),a=Object(i["computed"])(()=>{const e=o(t.centerY,t.radius,t.position);return isNaN(e)?0:e});return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("circle",{class:"vue-flow__edgeupdater",cx:Object(i["unref"])(r),cy:Object(i["unref"])(a),r:t.radius,stroke:"transparent",fill:"transparent"},null,8,_l))}})),Nl={class:"vue-flow__connection"},Bl=["d"],Cl={name:"ConnectionLine"},Pl=Object(i["defineComponent"])(p(h({},Cl),{props:{sourceNode:null},setup(e){var t,n,o,r;const a=e,{store:l}=Jc(),s=null==(t=Object(i["inject"])(va))?void 0:t["connection-line"],c=null==s?void 0:s({}),u=l.connectionHandleId&&l.connectionHandleType?null==(n=a.sourceNode.handleBounds[l.connectionHandleType])?void 0:n.find(e=>e.id===l.connectionHandleId):l.connectionHandleType&&(null==(r=a.sourceNode.handleBounds[null!=(o=l.connectionHandleType)?o:"source"])?void 0:r[0]),d=u?u.x+u.width/2:a.sourceNode.dimensions.width/2,h=u?u.y+u.height/2:a.sourceNode.dimensions.height,p=a.sourceNode.computedPosition.x+d,f=a.sourceNode.computedPosition.y+h,m=(null==u?void 0:u.position)===ea.Left||(null==u?void 0:u.position)===ea.Right?ea.Left:ea.Top,g=Object(i["computed"])(()=>(l.connectionPosition.x-l.viewport.x)/l.viewport.zoom),b=Object(i["computed"])(()=>(l.connectionPosition.y-l.viewport.y)/l.viewport.zoom),v=Object(i["computed"])(()=>{let e=`M${p},${f} ${g.value},${b.value}`;switch(l.connectionLineType){case na.Bezier:e=Ia({sourceX:p,sourceY:f,sourcePosition:null==u?void 0:u.position,targetX:g.value,targetY:b.value,targetPosition:m});break;case na.Step:e=tl({sourceX:p,sourceY:f,sourcePosition:null==u?void 0:u.position,targetX:g.value,targetY:b.value,targetPosition:m,borderRadius:0});break;case na.SmoothStep:e=tl({sourceX:p,sourceY:f,sourcePosition:null==u?void 0:u.position,targetX:g.value,targetY:b.value,targetPosition:m});break}return e});return(e,t)=>{var n;return Object(i["openBlock"])(),Object(i["createElementBlock"])("g",Nl,[Object(i["unref"])(c)?(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(Object(i["unref"])(s)),Object(i["normalizeProps"])(Object(i["mergeProps"])({key:0},{sourceX:p,sourceY:f,sourcePosition:null==(n=Object(i["unref"])(u))?void 0:n.position,targetX:Object(i["unref"])(g),targetY:Object(i["unref"])(b),targetPosition:Object(i["unref"])(m),connectionLineType:Object(i["unref"])(l).connectionLineType,connectionLineStyle:Object(i["unref"])(l).connectionLineStyle,nodes:Object(i["unref"])(l).getNodes,sourceNode:a.sourceNode,sourceHandle:Object(i["unref"])(u)})),null,16)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{key:1,d:Object(i["unref"])(v),class:"vue-flow__connection-path",style:Object(i["normalizeStyle"])(Object(i["unref"])(l).connectionLineStyle||{})},null,12,Bl))])}}}));var Vl=Object.defineProperty,Al=Object.defineProperties,Ml=Object.getOwnPropertyDescriptors,$l=Object.getOwnPropertySymbols,zl=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,Dl=(e,t,n)=>t in e?Vl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ll=(e,t)=>{for(var n in t||(t={}))zl.call(t,n)&&Dl(e,n,t[n]);if($l)for(var n of $l(t))Tl.call(t,n)&&Dl(e,n,t[n]);return e},Il=(e,t)=>Al(e,Ml(t));function Fl(){const e=[],t=t=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)};return{on:n=>(e.push(n),{off:()=>t(n)}),off:t,trigger:t=>{e.forEach(e=>e(t))}}}function Yl(e){return!!Object(i["getCurrentScope"])()&&(Object(i["onScopeDispose"])(e),!0)}const Xl="undefined"!=typeof window,Hl=e=>"string"==typeof e,Rl=()=>{};function ql(e,t){return null==t?Object(i["unref"])(e):Object(i["unref"])(e)[t]}function Ul(e,t=!0){Object(i["getCurrentInstance"])()?Object(i["onMounted"])(e):t?e():Object(i["nextTick"])(e)}function Zl(e){Object(i["getCurrentInstance"])()&&Object(i["onUnmounted"])(e)}function Gl(e){var t;const n=Object(i["unref"])(e);return null!=(t=null==n?void 0:n.$el)?t:n}const Wl=Xl?window:void 0;function Ql(...e){let t,n,o,r;if(Hl(e[0])?([n,o,r]=e,t=Wl):[t,n,o,r]=e,!t)return Rl;let a=Rl;const l=Object(i["watch"])(()=>Object(i["unref"])(t),e=>{a(),e&&(e.addEventListener(n,o,r),a=()=>{e.removeEventListener(n,o,r),a=Rl})},{immediate:!0,flush:"post"}),s=()=>{l(),a()};return Yl(s),s}function Kl(e,t=null){const n=Object(i["getCurrentInstance"])();let o=()=>{};const r=Object(i["customRef"])((i,r)=>(o=r,{get(){var o,r;return i(),null!=(r=null==(o=null==n?void 0:n.proxy)?void 0:o.$refs[e])?r:t},set(){}}));return Object(i["onMounted"])(o),Object(i["onUpdated"])(o),r}var Jl;function es(e,t){for(let n=0,o=e.length;n<o;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function ts(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function ns(e){return!!("targetTouches"in e&&e.targetTouches&&"changedTouches"in e&&e.changedTouches)}function os(e){return!isNaN(e)}function is(e){return parseInt(e,10)}(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Jl||(Jl={}));const rs=["Moz","Webkit","O","ms"];function as(e="transform"){var t,n;if("undefined"==typeof window)return"";const o=null==(n=null==(t=window.document)?void 0:t.documentElement)?void 0:n.style;if(!o||e in o)return"";for(let i=0;i<rs.length;i++)if(ls(e,rs[i])in o)return rs[i];return""}function ls(e,t){return t?`${t}${ss(e)}`:e}function ss(e){let t="",n=!0;for(let o=0;o<e.length;o++)n?(t+=e[o].toUpperCase(),n=!1):"-"===e[o]?n=!0:t+=e[o];return t}var cs=as();let us="";function ds(e,t){return us||(us=es(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],t=>ts(e[t]))),!!ts(e[us])&&e[us](t)}function hs(e,t,n){let o=e;do{if(ds(o,t))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1}function ps(e,t,n,o){if(!e)return;const i=Ll({capture:!0},o);e.addEventListener?e.addEventListener(t,n,i):e["on"+t]=n}function fs(e,t,n,o){if(!e)return;const i=Ll({capture:!0},o);e.removeEventListener?e.removeEventListener(t,n,i):e["on"+t]=null}function ms(e){var t;let n=e.clientHeight;const o=null==(t=e.ownerDocument.defaultView)?void 0:t.getComputedStyle(e);return n+=is(null==o?void 0:o.borderTopWidth),n+=is(null==o?void 0:o.borderBottomWidth),n}function gs(e){var t;let n=e.clientWidth;const o=null==(t=e.ownerDocument.defaultView)?void 0:t.getComputedStyle(e);return n+=is(null==o?void 0:o.borderLeftWidth),n+=is(null==o?void 0:o.borderRightWidth),n}function bs(e,t){return es(e.targetTouches,e=>t===e.identifier)||es(e.changedTouches,e=>t===e.identifier)}function vs(e){if(ns(e)){if(e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches[0])return e.changedTouches[0].identifier}}function ys(e){var t;let n=e.clientHeight;const o=null==(t=e.ownerDocument.defaultView)?void 0:t.getComputedStyle(e);return n-=is(null==o?void 0:o.paddingTop),n-=is(null==o?void 0:o.paddingBottom),n}function ws(e){var t;let n=e.clientWidth;const o=null==(t=e.ownerDocument.defaultView)?void 0:t.getComputedStyle(e);return n-=is(null==o?void 0:o.paddingLeft),n-=is(null==o?void 0:o.paddingRight),n}function Os(e,t,n){const o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-o.left)/n,r=(e.clientY+t.scrollTop-o.top)/n;return{x:i,y:r}}function js(e,t){const n=ks(e,"px",t);return{[ls("transform",cs)]:n}}function xs(e,t){return ks(e,"",t)}function ks({x:e,y:t},n="px",o){let i=`translate(${Math.round(e)}${n},${Math.round(t)}${n})`;if(o){const e=""+("string"==typeof o.x?o.x:Math.round(o.x)+n),t=""+("string"==typeof o.y?o.y:Math.round(o.y)+n);i=`translate(${e}, ${t})`+i}return i}function _s(e){if(e){if(!e.getElementById("revue-draggable-style-el")){const t=e.createElement("style");t.type="text/css",t.id="revue-draggable-style-el",t.innerHTML=".revue-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".revue-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)}e.body&&Ss(e.body,"revue-draggable-transparent-selection")}}function Es(e){if(e)try{e.body&&Ns(e.body,"revue-draggable-transparent-selection");const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}catch(t){}}function Ss(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=" "+t)}function Ns(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}function Bs(...e){"undefined"!=typeof o&&{}.DRAGGABLE_DEBUG&&console.log(...e)}function Cs({bounds:e,x:t,y:n,node:o}){if(!e)return[t,n];if(e="string"==typeof e?e:Ts(e),"string"==typeof e){const{ownerDocument:t}=o,n=t.defaultView,i="parent"===e?o.parentNode:t.querySelector(e);if(!(n&&i instanceof n.HTMLElement))throw new Error('Bounds selector "'+e+'" could not find an element.');const r=n.getComputedStyle(o),a=n.getComputedStyle(i),l="offsetLeft"in o?o.offsetLeft:0,s="offsetTop"in o?o.offsetTop:0;e={left:-(l-i.offsetLeft)+is(a.paddingLeft)+is(r.marginLeft),top:-(s-i.offsetTop)+is(a.paddingTop)+is(r.marginTop),right:ws(i)-gs(o)-l+is(a.paddingRight)-is(r.marginRight),bottom:ys(i)-ms(o)-s+is(a.paddingBottom)-is(r.marginBottom)}}return os(e.right)&&(t=Math.min(t,e.right)),os(e.bottom)&&(n=Math.min(n,e.bottom)),os(e.left)&&(t=Math.max(t,e.left)),os(e.top)&&(n=Math.max(n,e.top)),[t,n]}function Ps(e,t,n){const o=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[o,i]}function Vs(e){return"both"===e||"x"===e}function As(e){return"both"===e||"y"===e}function Ms({e:e,touch:t,node:n,offsetContainer:o,scale:i}){const r="number"==typeof t&&ns(e)?bs(e,t):null;if("number"==typeof t&&!r)return null;const a=o||"offsetParent"in n&&n.offsetParent||n.ownerDocument.body;return Os(r||e,a,i)}function $s({node:e,x:t,y:n,lastX:o,lastY:i}){return isNaN(o)?{node:e,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:e,deltaX:t-o,deltaY:n-i,lastX:o,lastY:i,x:t,y:n}}function zs({x:e,y:t,data:n}){return{node:n.node,x:e+n.deltaX,y:t+n.deltaY,deltaX:n.deltaX,deltaY:n.deltaY,lastX:e,lastY:t}}function Ts(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}var Ds=e=>{const t=Object(i["reactive"])(Object.assign({allowAnyClick:!1,cancel:"",handle:"",disabled:!1,enableUserSelectHack:!0,enableTransformFix:!1,offsetParent:void 0,grid:void 0,start:()=>{},move:()=>{},stop:()=>{},mouseDown:()=>{},position:void 0,currentPosition:{x:NaN,y:NaN},positionOffset:void 0,scale:1,axis:"both",defaultClassNameDragging:"revue-draggable-dragging",defaultClassNameDragged:"revue-draggable-dragged",defaultClassName:"revue-draggable",defaultPosition:{x:0,y:0},bounds:!1,dragging:!1,dragged:!1,prevPropsPosition:{x:0,y:0},isElementSVG:!1,update:!0},e));return()=>t};const Ls={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Is=Ls.mouse;const Fs=(e,t)=>{const n=Object(i["ref"])(),o=ts(t)?t():Ds(t)(),r=Object(i["reactive"])({x:NaN,y:NaN}),a=Fl(),l=Fl(),s=Fl();return Object(i["effectScope"])().run(()=>{Object(i["watch"])(()=>o,e=>{e.position&&!e.dragging&&(r.x=NaN,r.y=NaN)});const t=e=>{var t;const i=ql(n);if(!o.allowAnyClick&&"button"in e&&0!==e.button)return!1;if(!i||!i.ownerDocument||!i.ownerDocument.body)throw new Error("No ref element found on DragStart!");const{ownerDocument:l}=i;if(o.disabled||!(l.defaultView&&null!==e.target&&e.target instanceof l.defaultView.Node)||o.handle&&!hs(e.target,o.handle,i)||o.cancel&&hs(e.target,o.cancel,i))return;"touchstart"===e.type&&e.preventDefault(),o.touch=vs(e);const s=Ms({e:e,touch:o.touch,node:i,offsetContainer:o.offsetParent,scale:o.scale});if(null==s)return;const{x:d,y:h}=s,p=$s({node:i,x:d,y:h,lastX:r.x,lastY:r.y});Bs("DraggableCore: handleDragStart: %j",p);const f=null==(t=o.start)?void 0:t.call(o,e,p);if(a.trigger({event:e,data:p}),!1===(f||o.update))return!1;o.enableUserSelectHack&&_s(l),o.dragging=!0,r.x=d,r.y=h,ps(l,Is.move,c),ps(l,Is.stop,u)},c=e=>{var t;const i=ql(n);if(i){const n=Ms({e:e,touch:o.touch,node:i,offsetContainer:o.offsetParent,scale:o.scale});if(null==n)return;let{x:s,y:c}=n;const d=o.grid;if(d&&Array.isArray(d)){let e=s-r.x,t=c-r.y;if([e,t]=Ps(d,e,t),!e&&!t)return;s=r.x+e,c=r.y+t}const h=$s({node:i,x:s,y:c,lastX:r.x,lastY:r.y});Bs("DraggableCore: handleDrag: %j",h);const p=null==(t=o.move)?void 0:t.call(o,e,h);if(l.trigger({event:e,data:h}),!1===(p||o.update)){try{u(new MouseEvent("mouseup"))}catch(a){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),u(e)}return}r.x=s,r.y=c}},u=e=>{var t;const i=ql(n);if(o.dragging&&i){const n=Ms({e:e,touch:o.touch,node:i,offsetContainer:o.offsetParent,scale:o.scale});if(null==n)return;const{x:a,y:l}=n,d=$s({node:i,x:a,y:l,lastX:r.x,lastY:r.y}),h=null==(t=o.stop)?void 0:t.call(o,e,d);if(s.trigger({event:e,data:d}),!1===(h||o.update))return!1;o.enableUserSelectHack&&Es(i.ownerDocument),Bs("DraggableCore: handleDragStop: %j",d),o.dragging=!1,Bs("DraggableCore: Removing handlers"),fs(i.ownerDocument,Is.move,c),fs(i.ownerDocument,Is.stop,u)}},d=e=>{var n;if(Is=Ls.mouse,null==(n=o.mouseDown)||n.call(o,e),3!=e.which)return t(e)},h=e=>(Is=Ls.mouse,u(e)),p=e=>(Is=Ls.touch,t(e)),f=e=>(Is=Ls.touch,u(e));Ul(()=>{n.value=Gl(e),n?(Ql(ql(n),Ls.touch.start,p,{passive:!1}),Ql(ql(n),Ls.touch.stop,f),Ql(ql(n),Ls.mouse.start,d),Ql(ql(n),Ls.mouse.stop,h)):console.error("You are trying to use <DraggableCore> without passing a valid node reference. Canceling initialization.")})}),Il(Ll({},Object(i["toRefs"])(o)),{state:o,onDragStart:a.on,onDrag:l.on,onDragStop:s.on})},Ys=(e,t)=>{const n=Object(i["ref"])(),o=Ds(t),r=o(),a=Fl(),l=Fl(),s=Fl(),c=Fl();return Object(i["effectScope"])().run(()=>{const t=(e,t)=>{var n;Bs("Draggable: onDragStart: %j",t);const o=zs(Ll({data:t},r.currentPosition)),i=null==(n=r.start)?void 0:n.call(r,e,o);if(a.trigger({event:e,data:o}),!1===(i||r.update))return!1;r.dragging=!0,r.dragged=!0},u=(e,t)=>{var n;if(!r.dragging)return!1;Bs("Draggable: onDrag: %j",t);const o=zs(Ll({data:t},r.currentPosition)),i={x:o.x,y:o.y};if(r.bounds){const[e,n]=Cs({bounds:r.bounds,x:i.x,y:i.y,node:t.node});i.x=e,i.y=n,o.x=i.x,o.y=i.y,o.deltaX=i.x-r.currentPosition.x,o.deltaY=i.y-r.currentPosition.y}const a=null==(n=r.move)?void 0:n.call(r,e,o);if(l.trigger({event:e,data:o}),!1===(a||r.update))return!1;r.currentPosition=i,m()},d=(e,t)=>{var n;if(!r.dragging)return!1;const o=zs(Ll({data:t},r.currentPosition)),i=null==(n=r.stop)?void 0:n.call(r,e,o);if(s.trigger({event:e,data:o}),!1===(i||r.update))return!1;Bs("Draggable: onDragStop: %j",t),r.enableTransformFix&&h(),r.dragging=!1},h=()=>{var e,t;const o=ql(n);if(!o)return;o.style.transform="",o.style.left="",o.style.top="",o.style.position="relative";const{x:i,y:a}=f.value;o.style.left=Math.round(is(null==(e=r.positionOffset)?void 0:e.x)||0)+Math.round(Number(i))+"px",o.style.top=Math.round(is(null==(t=r.positionOffset)?void 0:t.y)||0)+Math.round(Number(a))+"px"},p=()=>{const e=ql(n);!e||(e.style.transform="",e.style.position="",e.style.left="",e.style.top="")},f=Object(i["computed"])(()=>{const e=Boolean(r.position)||r.dragging,t=r.position||r.defaultPosition;return{x:Vs(r.axis)&&ql(e)?r.currentPosition.x:ql(t).x,y:As(r.axis)&&ql(e)?r.currentPosition.y:ql(t).y}}),m=(e=!1)=>{const t=ql(n);if(t&&(e||r.update&&r.dragging)){r.enableTransformFix&&p();const e=r.positionOffset,o=r.isElementSVG,i=!o&&js(ql(f),e)||!1,a=o&&xs(ql(f),e)||!1;if("string"==typeof a&&t.setAttribute("transform",a),i)for(const n of Object.keys(i))"transform"===n&&(i[n]+=(""+t.style[n]).replace(/translate\((-?\d+?.{0,2},? ?)+\)+/gm,"").trim()),t.style[n]=i[n];const l={el:ql(n),style:i,transform:a,classes:g.value};c.trigger(l)}},g=Object(i["computed"])(()=>({[r.defaultClassName]:!r.disabled,[r.defaultClassNameDragging]:r.dragging,[r.defaultClassNameDragged]:r.dragged})),b=()=>Object.keys(ql(g)).forEach(e=>{var t,o;ql(g)[e]?null==(t=ql(n))||t.classList.toggle(e,!0):null==(o=ql(n))||o.classList.toggle(e,!1)});Object(i["watch"])(g,b);const{onDragStart:v,onDrag:y,onDragStop:w}=Fs(e,o);y(({event:e,data:t})=>u(e,t)),v(({event:e,data:n})=>t(e,n)),w(({event:e,data:t})=>d(e,t));const O=(e=!1)=>{const t=r.position;Bs("Draggable: Updated %j",{position:r.currentPosition,prevPropsPosition:r.prevPropsPosition}),t&&(r.currentPosition=t,r.prevPropsPosition=Ll({},t)),r.enableTransformFix?h():m(e)};Zl(()=>{r.dragging=!1}),Ul(()=>{var t;if(n.value=Gl(e),!n)return void console.error("You are trying to use <Draggable> without passing a valid target reference.");let o=0,a=0;const l=r.position,s=r.defaultPosition,c=null==(t=ql(n))?void 0:t.style;l&&"undefined"!=typeof l.x?o=l.x:s&&"undefined"!=typeof s.x?o=s.x:c&&c.top&&(o=is(c.top)),l&&"undefined"!=typeof l.y?a=l.y:s&&"undefined"!=typeof s.y?a=s.y:c&&c.left&&(a=is(c.left)),r.currentPosition={x:o,y:a},b(),O(!0),Object(i["watch"])(()=>r.position,e=>{let t=!1;((null==e?void 0:e.x)!==r.currentPosition.x||e.y!==r.currentPosition.y)&&(t=!0),O(t)})})}),Il(Ll({},Object(i["toRefs"])(r)),{state:r,onDragStart:a.on,onDrag:l.on,onDragStop:s.on,onTransformed:c.on})};Object(i["defineComponent"])({name:"Draggable",props:{axis:{type:String,default:"both"},bounds:{type:[Object,String,Boolean],default:!1},defaultClassName:{type:String,default:"revue-draggable"},defaultClassNameDragging:{type:String,default:"revue-draggable-dragging"},defaultClassNameDragged:{type:String,default:"revue-draggable-dragged"},defaultPosition:{type:Object,default:()=>({x:0,y:0})},scale:{type:Number,default:1},position:{type:Object,default:void 0},positionOffset:{type:Object,default:void 0},allowAnyClick:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},enableUserSelectHack:{type:Boolean,default:!0},enableTransformFix:{type:[Boolean,Object],default:!1},cancel:{type:String,default:void 0},offsetParent:{type:Object,default:()=>{}},grid:{type:Array,default:void 0},handle:{type:String,default:void 0},update:{type:Boolean,default:!0},start:{type:Function,default:()=>{}},move:{type:Function,default:()=>{}},stop:{type:Function,default:()=>{}},mouseDown:{type:Function,default:()=>{}}},emits:["move","start","stop","transformed"],setup(e,{slots:t,emit:n,attrs:o}){const r=Kl("target",null),{onDrag:a,onDragStart:l,onDragStop:s,onTransformed:c,state:u}=Ys(r,e);return a(e=>n("move",e)),l(e=>n("start",e)),s(e=>n("stop",e)),c(e=>n("transformed",e)),Object(i["watch"])(()=>e,e=>Object.assign(u,e),{deep:!0,flush:"post"}),()=>{if(t.default)return Object(i["h"])(t.default({state:u})[0],Ll({ref:"target"},o),{})}}}),Object(i["defineComponent"])({name:"DraggableCore",props:{scale:{type:Number,default:1},allowAnyClick:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},enableUserSelectHack:{type:Boolean,default:!0},cancel:{type:String,default:void 0},offsetParent:{type:Object,default:void 0},grid:{type:Array,default:void 0},handle:{type:String,default:void 0},onStart:{type:Function,default:()=>{}},onMove:{type:Function,default:()=>{}},onStop:{type:Function,default:()=>{}},onMouseDown:{type:Function,default:()=>{}}},emits:["start","move","stop"],setup(e,{slots:t,emit:n,attrs:o}){const r=Kl("core-target",null),{onDrag:a,onDragStart:l,onDragStop:s,state:c}=Fs(r,e);return a(e=>n("move",e)),l(e=>n("start",e)),s(e=>n("stop",e)),Object(i["watch"])(()=>e,e=>Object.assign(c,e),{deep:!0,flush:"post"}),()=>{if(t.default)return Object(i["h"])(t.default()[0],Ll({ref:"core-target"},o),{})}}});const Xs=e=>"nodeName"in e,Hs=e=>{const t=e.target;return!(!t||!Xs(t))&&(["INPUT","SELECT","TEXTAREA","BUTTON"].includes(t.nodeName)||t.hasAttribute("contentEditable"))},Rs=e=>({width:e.offsetWidth,height:e.offsetHeight}),qs=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Us=(e,t)=>({x:qs(e.x,t[0][0],t[1][0]),y:qs(e.y,t[0][1],t[1][1])}),Zs=e=>{const t=e.getRootNode(),n=ou();return"getElementFromPoint"in t?t:n.document},Gs=e=>"id"in e&&"source"in e&&"target"in e,Ws=e=>Gs(e)&&"sourceNode"in e&&"targetNode"in e,Qs=e=>"id"in e&&!Gs(e),Ks=e=>Qs(e)&&"computedPosition"in e,Js=(e,t,n)=>{var o;let i=n;return Ks(e)||(i=h({type:null!=(o=e.type)?o:"default",dimensions:{width:0,height:0},handleBounds:{source:[],target:[]},computedPosition:{z:0,x:0,y:0},dragging:!1,draggable:void 0,selectable:void 0,connectable:void 0},n)),p(h(h({},i),e),{id:e.id.toString()})},ec=(e,t)=>{var n;return t=Ws(e)?t:h({sourceHandle:e.sourceHandle?e.sourceHandle.toString():void 0,targetHandle:e.targetHandle?e.targetHandle.toString():void 0,type:null!=(n=e.type)?n:"default",source:e.source.toString(),target:e.target.toString(),z:0,sourceX:0,sourceY:0,targetX:0,targetY:0,updatable:void 0,selectable:void 0,data:void 0},t),p(h(h({},t),e),{id:e.id.toString()})},tc=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${null!=t?t:""}-${n}${null!=o?o:""}`,nc=(e,t)=>t.some(t=>Gs(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),oc=({x:e,y:t},{x:n,y:o,zoom:i},r,[a,l])=>{const s={x:(e-n)/i,y:(t-o)/i};return r?{x:a*Math.round(s.x/a),y:l*Math.round(s.y/l)}:s},ic=e=>t=>oc(t,e.viewport,e.snapToGrid,e.snapGrid),rc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ac=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),lc=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),sc=(e,t)=>lc(rc(ac(e),ac(t))),cc=e=>{const t=e.reduce((e,{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0}}={})=>rc(e,ac(h(h({},t),n))),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return lc(t)},uc=(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},r=!1)=>{const a=ac({x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i});return e.filter(e=>{if(!e||!1===e.selectable)return!1;const{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0},dragging:o=!1}=e,i=ac(h(h({},t),n)),l=Math.max(0,Math.min(a.x2,i.x2)-Math.max(a.x,i.x)),s=Math.max(0,Math.min(a.y2,i.y2)-Math.max(a.y,i.y)),c=Math.ceil(l*s),u="undefined"==typeof n.width||"undefined"==typeof n.height||0===n.width||0===n.height||o,d=r&&c>0,p=n.width*n.height;return u||d||c>=p})},dc=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},hc=e=>()=>e.nodes,pc=e=>()=>e.edges,fc=e=>()=>[...e.nodes,...e.edges],mc=e=>()=>JSON.parse(JSON.stringify({nodes:e.nodes,edges:e.edges,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),gc=(e,t,n,o,i,r=.1,a={x:0,y:0})=>{var l,s;const c=t/(e.width*(1+r)),u=n/(e.height*(1+r)),d=Math.min(c,u),h=qs(d,o,i),p=e.x+e.width/2,f=e.y+e.height/2,m=t/2-p*h+(null!=(l=a.x)?l:0),g=n/2-f*h+(null!=(s=a.y)?s:0);return{x:m,y:g,zoom:h}},bc=(e,t)=>({x:t.x+e.x,y:t.y+e.y,z:e.z>t.z?e.z:t.z}),vc=(e,t)=>{if(!e.parentNode)return!1;const n=t(e.parentNode);return!!n&&(!!n.selected||vc(n,t))},yc=e=>"undefined"==typeof e?"":"string"==typeof e?e:Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&"),wc=(e,t,n)=>{var o,i,r,a;const l=(null!=(o=null==n?void 0:n.x)?o:0)+t.x,s=(null!=(i=null==n?void 0:n.y)?i:0)+t.y,c=null!=(r=null==n?void 0:n.width)?r:t.width,u=null!=(a=null==n?void 0:n.height)?a:t.height;switch(e){case ea.Top:return{x:l+c/2,y:s};case ea.Right:return{x:l+c,y:s+u/2};case ea.Bottom:return{x:l+c/2,y:s+u};case ea.Left:return{x:l,y:s+u/2}}},Oc=(e=[],t)=>{if(!e.length)return;let n;return t||1!==e.length?t&&(n=e.find(e=>e.id===t)):n=e[0],n||e[0]},jc=(e,t,n,o,i,r)=>{const a=wc(n,h(h({},e.dimensions),e.computedPosition),t),l=wc(r,h(h({},o.dimensions),o.computedPosition),i);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}};function xc({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:l,viewport:s}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=ac({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:a/s.zoom,height:l/s.zoom}),d=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),h=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(d*h)>0}const kc=(e,t)=>{let n=-1;const o=e.reduce((e,o)=>{const i=t(o.source),r=t(o.target);if(!i||!r)return e;const a=o.z?o.z:Math.max(i.computedPosition.z||0,r.computedPosition.z||0);return e[a]?e[a].push(o):e[a]=[o],n=a>n?a:n,e},{});return Object.entries(Object.keys(o).length?o:{0:[]}).map(([e,t])=>{const o=+e;return{edges:t,level:o,isMaxLevel:o===n}})},_c=(e,t,n,o)=>{const i=t.querySelectorAll(e);return i&&i.length?Array.from(i).map(e=>{var t;const i=e.getBoundingClientRect(),r=Rs(e),a=null!=(t=e.getAttribute("data-handleid"))?t:void 0,l=e.getAttribute("data-handlepos");return h({id:a,position:l,x:(i.left-n.left)/o,y:(i.top-n.top)/o},r)}):null},Ec=(e,t,n)=>{var o,i;const r=e.getBoundingClientRect();return{source:null!=(o=_c(".source"+(n?".vue-flow__handle-"+n:""),e,r,t))?o:void 0,target:null!=(i=_c(".target"+(n?".vue-flow__handle-"+n:""),e,r,t))?i:void 0}};function Sc(e,t){const n=e.parentNode?t.find(t=>t.id===e.parentNode):void 0;if(n){const t=e.position.x+e.dimensions.width-n.dimensions.width,o=e.position.y+e.dimensions.height-n.dimensions.height;if(t>0||o>0||e.position.x<0||e.position.y<0){if(n.style=h({},n.style),t>0)if(n.style.width||(n.style.width=n.dimensions.width),"string"==typeof n.style.width){const e=parseInt(n.style.width,10);n.style.width=e+t+"px"}else n.style.width+=t;if(o>0)if(n.style.height||(n.style.height=n.dimensions.height),"string"==typeof n.style.height){const e=parseInt(n.style.height,10);n.style.height=e+o+"px"}else n.style.height+=o;if(e.position.x<0){const t=Math.abs(e.position.x);if(n.position.x=n.position.x-t,"string"==typeof n.style.width){const e=parseInt(n.style.width,10);n.style.width=e+t+"px"}else n.style.width+=t;e.position.x=0}if(e.position.y<0){const t=Math.abs(e.position.y);if(n.position.y=n.position.y-t,"string"==typeof n.style.height){const e=parseInt(n.style.height,10);n.style.height=e+t+"px"}else n.style.height+=t;e.position.y=0}n.dimensions.width="string"==typeof n.style.width?parseInt(n.style.width,10):n.style.width,n.dimensions.height="string"==typeof n.style.height?parseInt(n.style.height,10):n.style.height}}}const Nc=(e,t,n)=>{let o=t.map(e=>e.id);return e.forEach(e=>{"add"===e.type&&(n?n([e.item]):t.push(e.item));const i=o.indexOf(e.id),r=t[i];switch(e.type){case"select":(Ks(r)||Ws(r))&&(r.selected=e.selected);break;case"position":Ks(r)&&("undefined"!=typeof e.position&&(r.position=e.position),"undefined"!=typeof e.dragging&&(r.dragging=e.dragging),r.expandParent&&r.parentNode&&Sc(r,t));break;case"dimensions":Ks(r)&&("undefined"!=typeof e.dimensions&&(r.dimensions=e.dimensions),r.expandParent&&r.parentNode&&Sc(r,t));break;case"remove":t.splice(i,1),o=t.map(e=>e.id);break}}),t},Bc=(e,t)=>({id:e,type:"select",selected:t}),Cc=({node:e,diff:t,dragging:n,nodeExtent:o},i)=>{const r=e.parentNode?i.find(t=>t.id===e.parentNode):void 0,a={id:e.id,type:"position",dragging:!!n};if(t){const n={x:e.position.x+t.x,y:e.position.y+t.y};let i="parent"===e.extent||"undefined"==typeof e.extent?o:e.extent;"parent"===e.extent&&r&&e.dimensions.width&&e.dimensions.height&&(i=r.dimensions.width&&r.dimensions.height?[[0,0],[r.dimensions.width-e.dimensions.width,r.dimensions.height-e.dimensions.height]]:i),a.position=i?Us(n,i):n}return a},Pc=(e,t,n)=>{const o=e.parentNode?n(e.parentNode):void 0;return!(!e.parentNode||!o)&&(!!t.includes(e.parentNode)||Pc(o,t,n))},Vc=(e,t,n)=>e.reduce((e,o)=>{const i=t.includes(o.id)||!!(Ks(o)&&o.parentNode&&Pc(o,t,n));return!o.selected&&i?e.push(Bc(o.id,!0)):o.selected&&!i&&e.push(Bc(o.id,!1)),e},[]),Ac={name:"NodesSelection"},Mc=Object(i["defineComponent"])(p(h({},Ac),{setup(e){const{store:t}=Jc(),n=Oe("el",null),o=Object(i["computed"])(()=>cc(t.getSelectedNodes)),r=Object(i["computed"])(()=>({width:o.value.width+"px",height:o.value.height+"px",top:o.value.y+"px",left:o.value.x+"px"})),a=Object(i["computed"])(()=>`translate(${t.viewport.x}px,${t.viewport.y}px) scale(${t.viewport.zoom})`);Object(i["watch"])(o,e=>t.selectedNodesBbox=e);const l=e=>t.hooks.selectionContextMenu.trigger({event:e,nodes:t.getSelectedNodes}),{onDragStart:s,onDrag:c,onDragStop:u,scale:d}=Fs(n,{grid:t.snapToGrid?t.snapGrid:void 0,enableUserSelectHack:!1,scale:t.viewport.zoom});return Object(i["onMounted"])(()=>{q(()=>t.viewport.zoom,()=>{d.value=t.viewport.zoom},{debounce:5})}),s(({event:e})=>t.hooks.selectionDragStart.trigger({event:e,nodes:t.getSelectedNodes})),c(({event:e,data:{deltaX:n,deltaY:o}})=>{t.hooks.selectionDrag.trigger({event:e,nodes:t.getSelectedNodes}),t.updateNodePosition({diff:{x:n,y:o},dragging:!0})}),u(({event:e})=>{t.hooks.selectionDragStop.trigger({event:e,nodes:t.getSelectedNodes}),t.getSelectedNodes.forEach(e=>e.dragging=!1)}),(e,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["vue-flow__nodesselection vue-flow__container",Object(i["unref"])(t).noPanClassName]),style:Object(i["normalizeStyle"])({transform:Object(i["unref"])(a)})},[Object(i["createElementVNode"])("div",{ref_key:"el",ref:n,class:"vue-flow__nodesselection-rect",style:Object(i["normalizeStyle"])(Object(i["unref"])(r)),onContextmenu:l},null,36)],6))}})),$c={name:"SelectionRect"},zc=Object(i["defineComponent"])(p(h({},$c),{props:{width:null,height:null,x:null,y:null},setup(e){const t=e;return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"vue-flow__selection",style:Object(i["normalizeStyle"])({width:t.width+"px",height:t.height+"px",transform:`translate(${t.x}px, ${t.y}px)`})},null,4))}}));function Tc(e){const t=e.target.closest(".vue-flow");if(!t)return;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}const Dc={ref:"user-selection",class:"vue-flow__selectionpane vue-flow__container"},Lc={name:"UserSelection"},Ic=Object(i["defineComponent"])(p(h({},Lc),{setup(e){const{store:t}=Jc(),n=Oe("user-selection",null),o=Object(i["ref"])(0),r=Object(i["ref"])(0),a=()=>({width:0,height:0,startX:0,startY:0,x:0,y:0,draw:!1}),l=Object(i["ref"])(a()),s=()=>{l.value=a(),t.userSelectionActive=!1,o.value=0,r.value=0},c=e=>{const n=Tc(e);!n||(l.value={width:0,height:0,startX:n.x,startY:n.y,x:n.x,y:n.y,draw:!0},t.userSelectionActive=!0,t.nodesSelectionActive=!1)},u=e=>{if(!t.userSelectionActive||!l.value.draw)return;const n=Tc(e);if(!n)return;const i=l.value.startX,a=l.value.startY,s=p(h({},l.value),{x:n.x<i?n.x:l.value.x,y:n.y<a?n.y:l.value.y,width:Math.abs(n.x-i),height:Math.abs(n.y-a)}),c=uc(t.getNodes,l.value,t.viewport),u=dc(c,t.getEdges);l.value=s,t.addSelectedNodes(c),t.addSelectedEdges(u),o.value=c.length,r.value=u.length},d=()=>{t.nodesSelectionActive=o.value>0,l.value=a(),t.userSelectionActive=!1},f=()=>{t.nodesSelectionActive=!1,s()};return Object(i["onMounted"])(()=>{ae(n,"mousedown",c),ae(n,"mousemove",u),ae(n,"click",d),ae(n,"mouseup",d),ae(n,"mouseleave",f)}),Object(i["onBeforeUnmount"])(()=>{s()}),(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Dc,[l.value.draw?(Object(i["openBlock"])(),Object(i["createBlock"])(zc,{key:0,width:l.value.width,height:l.value.height,x:l.value.x,y:l.value.y},null,8,["width","height","x","y"])):Object(i["createCommentVNode"])("",!0)],512))}})),Fc={input:Aa,default:Ba,output:Ta},Yc={default:hl,straight:kl,step:Ol,smoothstep:vl,simplebezier:ml},Xc=e=>"undefined"!=typeof e,Hc=()=>({nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,instance:null,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:ra.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultZoom:1,defaultPosition:[0,0],nodesSelectionActive:!1,userSelectionActive:!1,selectedNodesBbox:{x:0,y:0,width:0,height:0},defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:na.Bezier,connectionNodeId:null,connectionHandleId:null,connectionHandleType:null,connectionPosition:{x:NaN,y:NaN},connectionMode:oa.Loose,connectionStartHandle:null,connectOnClick:!0,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",hooks:ya(),applyDefault:!0,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,vueFlowVersion:"0.4.6"});var Rc=e=>{const t=Hc();return e&&Object.keys(e).forEach(n=>{const o=e[n];Xc(o)&&(t[n]=o)}),t},qc=e=>{const t=Object(i["computed"])(()=>e.nodes.map(e=>e.id)),n=Object(i["computed"])(()=>e.edges.map(e=>e.id)),o=Object(i["computed"])(()=>n=>e.nodes[t.value.indexOf(n)]),r=Object(i["computed"])(()=>t=>e.edges[n.value.indexOf(t)]),a=Object(i["computed"])(()=>{var t;const n=h(h({},Yc),e.edgeTypes),o=Object.keys(n);return null==(t=e.edges)||t.forEach(e=>e.type&&!o.includes(e.type)&&(n[e.type]=e.type)),n}),l=Object(i["computed"])(()=>{var t;const n=h(h({},Fc),e.nodeTypes),o=Object.keys(n);return null==(t=e.nodes)||t.forEach(e=>e.type&&!o.includes(e.type)&&(n[e.type]=e.type)),n}),s=Object(i["computed"])(()=>{const t=e.nodes.filter(e=>!e.hidden);return e.onlyRenderVisibleElements?t&&uc(t,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):null!=t?t:[]}),c=t=>{const n=o.value(t.source),i=o.value(t.target);return n&&i?!t.hidden&&i&&!i.hidden&&n&&!n.hidden&&n.dimensions.width&&n.dimensions.height&&i.dimensions.width&&i.dimensions.height:(console.warn(`[vue-flow]: Orphaned edge ${t.id} will be removed.`),e.edges.splice(e.edges.indexOf(t),1),!0)},u=Object(i["computed"])(()=>e.onlyRenderVisibleElements?e.edges.filter(t=>{const n=o.value(t.source),i=o.value(t.target);return c(t)&&xc({sourcePos:n.computedPosition||{x:0,y:0},targetPos:i.computedPosition||{x:0,y:0},sourceWidth:n.dimensions.width,sourceHeight:n.dimensions.height,targetWidth:i.dimensions.width,targetHeight:i.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(c)),d=Object(i["computed"])(()=>e.nodes.filter(e=>e.selected)),p=Object(i["computed"])(()=>e.edges.filter(e=>e.selected)),f=Object(i["computed"])(()=>{var e,t;return[...null!=(e=d.value)?e:[],...null!=(t=p.value)?t:[]]});return{getNode:o,getEdge:r,getEdgeTypes:a,getNodeTypes:l,getEdges:u,getNodes:s,getSelectedElements:f,getSelectedNodes:d,getSelectedEdges:p}};const Uc=e=>"undefined"!=typeof e,Zc=(e,t)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),!1;let n;return n=Gs(e)?h({},e):p(h({},e),{id:tc(e)}),n=ec(n),!nc(n,t)&&n},Gc=(e,t,n,o)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),!1;if(!n.find(t=>Ws(t)&&t.id===e.id))return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),!1;n.splice(n.indexOf(e),1);const i=p(h({},e),{id:tc(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle});return o([i]),i},Wc=(e,t,n,o)=>{const i={},r=e.map(e=>{const n=Js(e,o,p(h({},t(e.id)),{parentNode:e.parentNode}));return e.parentNode&&(i[e.parentNode]=!0),n});return r.forEach(e=>{const o=[...r,...n];if(e.parentNode&&!o.find(t=>t.id===e.parentNode)&&console.warn(`[vueflow]: Parent node ${e.parentNode} not found`),e.parentNode||i[e.id]){i[e.id]&&(e.isParent=!0);const n=e.parentNode?t(e.parentNode):void 0;n&&(n.isParent=!0)}}),r};var Qc=(e,t)=>{const n=({id:n,diff:o={x:0,y:0},dragging:i})=>{new Promise(r=>{const a=[];e.nodes.forEach(r=>{r.selected?r.parentNode&&vc(r,t.getNode.value)||a.push(Cc({node:r,diff:o,nodeExtent:e.nodeExtent,dragging:i},e.nodes)):r.id===n&&a.push(Cc({node:r,diff:o,nodeExtent:e.nodeExtent,dragging:i},e.nodes))}),a.length&&r(a)}).then(t=>{e.hooks.nodesChange.trigger(t)})},o=n=>{const o=n.reduce((n,o)=>{const i=t.getNode.value(o.id);if(i){const t=Rs(o.nodeElement),r=!(!t.width||!t.height||i.dimensions.width===t.width&&i.dimensions.height===t.height&&!o.forceUpdate);i.handleBounds=Ec(o.nodeElement,e.viewport.zoom),r&&(i.dimensions=t,n.push({id:i.id,type:"dimensions",dimensions:t}))}return n},[]);o.length&&e.hooks.nodesChange.trigger(o)},i=n=>{const o=n.map(e=>e.id);let i;i=e.multiSelectionActive?o.map(e=>Bc(e,!0)):Vc(e.nodes,o,t.getNode.value),i.length&&e.hooks.nodesChange.trigger(i)},r=n=>{const o=n.map(e=>e.id);let i;i=e.multiSelectionActive?o.map(e=>Bc(e,!0)):Vc(e.edges,o,t.getNode.value),i.length&&e.hooks.edgesChange.trigger(i)},a=e=>{i(e.filter(Ks)),r(e.filter(Ws))},l=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},s=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},c=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},u=()=>{i([]),r([])},d=t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},f=(n,o)=>{if(!e.initialized&&!n.length)return;e.nodes||(e.nodes=[]);const i=n instanceof Function?n(e.nodes):n;e.nodes=Wc(i,t.getNode.value,e.nodes,null!=o?o:e.nodeExtent)},m=n=>{if(!e.initialized&&!n.length)return;const o=n instanceof Function?n(e.edges):n;e.edges=o.reduce((n,o)=>{const i=t.getNode.value(o.source),r=t.getNode.value(o.target),a=!i||"undefined"==typeof i,l=!r||"undefined"==typeof r;if(a&&console.warn(`[vueflow]: Couldn't create edge for source id: ${o.source}; edge id: ${o.id}`),l&&console.warn(`[vueflow]: Couldn't create edge for target id: ${o.target}; edge id: ${o.id}`),a||l)return n;const s=t.getEdge.value(o.id);return n.push(p(h({},ec(o,h(h({},e.defaultEdgeOptions),s))),{sourceNode:i,targetNode:r})),n},[])},g=(t,n)=>{if(!e.initialized&&!t.length||!t)return;const o=t instanceof Function?t([...e.nodes,...e.edges]):t;f(o.filter(Qs),n),m(o.filter(Gs))},b=(n,o)=>{const i=n instanceof Function?n(e.nodes):n;e.nodes.push(...Wc(i,t.getNode.value,e.nodes,null!=o?o:e.nodeExtent))},v=n=>{(n instanceof Function?n(e.edges):n).forEach(n=>{const o=Zc(n,e.edges);if(o){const n=t.getNode.value(o.source),i=t.getNode.value(o.target),r=!n||"undefined"==typeof n,a=!i||"undefined"==typeof i;if(r&&console.warn(`[vueflow]: Couldn't create edge for source id: ${o.source}; edge id: ${o.id}`),a&&console.warn(`[vueflow]: Couldn't create edge for target id: ${o.target}; edge id: ${o.id}`),a||r)return;e.edges.push(p(h(h({},e.defaultEdgeOptions),o),{sourceNode:n,targetNode:i}))}})},y=(t,n)=>Gc(t,n,e.edges,v),w=t=>Nc(t,e.nodes,b),O=t=>Nc(t,e.edges,v),j=t=>{var n,o;const i=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent"],r=t instanceof Function?t(e):t;"undefined"!=typeof r.modelValue&&g(r.modelValue,null!=(n=r.nodeExtent)?n:e.nodeExtent),"undefined"!=typeof r.nodes&&f(r.nodes,null!=(o=r.nodeExtent)?o:e.nodeExtent),"undefined"!=typeof r.edges&&m(r.edges),Object.keys(r).forEach(t=>{const n=r[t];!i.includes(t)&&Uc(n)&&(e[t]=n)}),e.d3Zoom?("undefined"!=typeof r.maxZoom&&s(r.maxZoom),"undefined"!=typeof r.minZoom&&l(r.minZoom),"undefined"!=typeof r.translateExtent&&c(r.translateExtent)):C(()=>e.d3Zoom).not.toBeUndefined().then(()=>{"undefined"!=typeof r.maxZoom&&s(r.maxZoom),"undefined"!=typeof r.minZoom&&l(r.minZoom),"undefined"!=typeof r.translateExtent&&c(r.translateExtent)}),e.initialized||(e.initialized=!0)};return{updateNodePosition:n,updateNodeDimensions:o,setElements:g,setNodes:f,setEdges:m,addNodes:b,addEdges:v,updateEdge:y,applyEdgeChanges:O,applyNodeChanges:w,addSelectedElements:a,addSelectedNodes:i,addSelectedEdges:r,setMinZoom:l,setMaxZoom:s,setTranslateExtent:c,resetSelectedElements:u,setInteractive:d,setState:j,$reset:()=>{j(Rc())}}};class Kc{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return Kc.instance||(Kc.instance=new Kc),Kc.instance}set(e,t){this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){this.flows.delete(e)}create(e,t){const n=Rc(t),o=Object(i["reactive"])(n),r=qc(o),a=Qc(o,r),l={};Object.entries(o.hooks).forEach(([e,t])=>{const n="on"+(e.charAt(0).toUpperCase()+e.slice(1));l[n]=t.on}),a.setState(o),t&&(t.modelValue&&a.setElements(t.modelValue),t.nodes&&a.setNodes(t.nodes),t.edges&&a.setEdges(t.edges));const s=Object(i["reactive"])(h(h(h(h({},l),Object(i["toRefs"])(o)),r),a)),c=p(h(h(h(h({},l),r),a),Object(i["toRefs"])(o)),{id:e,store:s});return this.set(e,c),c}getId(){return"vue-flow-"+this.currentId++}}var Jc=e=>{var t;const n=Kc.getInstance(),o=Object(i["getCurrentScope"])(),r=(null==o?void 0:o.vueFlowId)||(null==e?void 0:e.id);let a;if(o){const e=Object(i["inject"])(ga,null);"undefined"!=typeof e&&null!==e&&(a=e)}if(a||r&&(a=n.get(r)),!a||a&&(null==e?void 0:e.id)&&e.id!==a.id){const r=null!=(t=null==e?void 0:e.id)?t:n.getId();a=n.create(r,e),o&&(o.vueFlowId=r,Object(i["onScopeDispose"])(()=>{n.remove(r),a=null}))}else e&&a.setState(e);if(!a)throw new Error("[vueflow]: store instance not found.");return o&&Object(i["provide"])(ga,a),a};const eu=(e,t,n,o,i,r,a,l,s)=>{var c,u;const d=a.elementFromPoint(e.clientX,e.clientY),h=(null==d?void 0:d.classList.contains("target"))||!1,p=(null==d?void 0:d.classList.contains("source"))||!1,f={elementBelow:d,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(d&&(h||p)&&(f.isHoveringHandle=!0,t!==oa.Strict||(n&&p||!n&&h))){const e=null!=(c=d.getAttribute("data-nodeid"))?c:"",t=null!=(u=d.getAttribute("data-handleid"))?u:"",a=n?e:o,h=n?t:i,p=n?o:e,m={source:a,sourceHandle:h,target:p,targetHandle:n?i:t};f.connection=m,f.isValid=r(m,{edges:l,sourceNode:s(a),targetNode:s(p)})||!f.connection.target||!f.connection.source}return f},tu=e=>{null==e||e.classList.remove("vue-flow__handle-valid"),null==e||e.classList.remove("vue-flow__handle-connecting")};var nu=(e=Jc().store)=>{let t;return{onMouseDown:(n,o,i,r,a,l,s,c)=>{var u;const d=n.target.closest(".vue-flow"),h=Zs(n.target);if(!h)return;let p=null!=a?a:()=>!0;const f=e.getNode(i);if(f&&!1===("undefined"==typeof f.connectable?e.nodesConnectable:f.connectable))return;a||f&&(p=null!=(u=r?f.isValidSourcePos:f.isValidTargetPos)?u:()=>!0);const m=h.elementFromPoint(n.clientX,n.clientY),g=null==m?void 0:m.classList.contains("target"),b=null==m?void 0:m.classList.contains("source");if(!d||!g&&!b&&!l)return;const v=null!=l?l:g?"target":"source",y=d.getBoundingClientRect();function w(n){e.connectionPosition.x=n.clientX-y.left,e.connectionPosition.y=n.clientY-y.top;const{connection:a,elementBelow:l,isValid:s,isHoveringHandle:c}=eu(n,e.connectionMode,r,i,o,p,h,e.edges,e.getNode);if(!c)return tu(t);a.source!==a.target&&l&&(t=l,l.classList.add("vue-flow__handle-connecting"),l.classList.toggle("vue-flow__handle-valid",s))}function O(n){const{connection:a,isValid:u}=eu(n,e.connectionMode,r,i,o,p,h,e.edges,e.getNode);e.hooks.connectStop.trigger(n);const d=a.source===a.target;u&&!d&&(s?s(a):e.hooks.connect.trigger(a)),e.hooks.connectEnd.trigger(n),l&&(null==c||c()),tu(t),e.setState({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null,connectionPosition:{x:NaN,y:NaN}}),h.removeEventListener("mousemove",w),h.removeEventListener("mouseup",O)}e.setState({connectionPosition:{x:n.clientX-y.left,y:n.clientY-y.top},connectionNodeId:i,connectionHandleId:o,connectionHandleType:v}),e.hooks.connectStart.trigger({event:n,nodeId:i,handleId:o,handleType:v}),h.addEventListener("mousemove",w),h.addEventListener("mouseup",O)},onClick:(t,n,o,i,r)=>{var a;if(e.connectOnClick)if(e.connectionStartHandle){let n=null!=r?r:()=>!0;const l=e.getNode(o);if(l&&!1===("undefined"==typeof l.connectable?e.nodesConnectable:l.connectable))return;r||l&&(n=null!=(a="target"!==i?l.isValidTargetPos:l.isValidSourcePos)?a:()=>!0);const s=Zs(t.target),{connection:c,isValid:u}=eu(t,e.connectionMode,"target"===e.connectionStartHandle.type,e.connectionStartHandle.nodeId,e.connectionStartHandle.handleId||null,n,s,e.edges,e.getNode),d=c.source===c.target;e.hooks.connectStop.trigger(t),u&&!d&&e.hooks.connect.trigger(c),e.hooks.connectEnd.trigger(t),e.setState({connectionStartHandle:null})}else e.hooks.connectStart.trigger({event:t,nodeId:o,handleId:n,handleType:i}),e.setState({connectionStartHandle:{nodeId:o,type:i,handleId:n}})}}},ou=()=>"undefined"!=typeof window?window:{chrome:!1},iu=(e,t)=>{const n=ou(),o=N(!1,{onBeforeChange(e,t){if(e===t)return!1},onChanged(){t&&"function"==typeof t&&t(o.value)}});return ye(t=>!Hs(t)&&(t.key===e.value||t.keyCode===e.value),e=>{e.preventDefault(),o.value=!0}),ve(t=>!Hs(t)&&(t.key===e.value||t.keyCode===e.value),e=>{e.preventDefault(),o.value=!0}),we(t=>!Hs(t)&&(t.key===e.value||t.keyCode===e.value),e=>{e.preventDefault(),o.value=!1}),"undefined"!=typeof n.addEventListener&&ae(n,"blur",()=>{o.value=!1}),t&&"function"==typeof t&&t(o.value),o};const ru=.1,au=(e,t=0)=>e.transition().duration(t),lu=async e=>{const t=ou();return"screen"in t&&(await C(e.dimensions).toMatch(({height:e,width:t})=>!isNaN(t)&&t>0&&!isNaN(e)&&e>0),e.getNodes.length>0&&await C(e.getNodes).toMatch(e=>!!e.filter(({dimensions:{width:e,height:t}})=>!isNaN(e)&&e>0&&!isNaN(t)&&t>0).length)),!0};var su=(e=Jc().store)=>{const t=Object(i["ref"])(!1);e.hooks.paneReady.on(()=>t.value=!0);const n=async(n,o)=>{t.value||await lu(e),e.d3Selection&&e.d3Zoom&&e.d3Zoom.scaleTo(au(e.d3Selection,null==o?void 0:o.duration),n)},o=async(n,o)=>{t.value||await lu(e),e.d3Selection&&e.d3Zoom&&e.d3Zoom.scaleTo(au(e.d3Selection,o),n)},r=async e=>{await o(1.2,null==e?void 0:e.duration)},a=async e=>{await o(1/1.2,null==e?void 0:e.duration)},l=(t,n,o,i)=>{const{x:r,y:a}=Us({x:-t,y:-n},e.translateExtent),l=aa.translate(-r,-a).scale(o);e.d3Selection&&e.d3Zoom&&e.d3Zoom.transform(au(e.d3Selection,i),l)};return{zoomIn:r,zoomOut:a,zoomTo:n,setTransform:async(n,o)=>{t.value||await lu(e),l(n.x,n.y,n.zoom,null==o?void 0:o.duration)},getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:async(n={padding:ru,includeHiddenNodes:!1,duration:0})=>{var o,i,r;if(t.value||await lu(e),!e.getNodes.length)return;let a=[];n.nodes&&(a=e.nodes.filter(e=>{var t;return null==(t=n.nodes)?void 0:t.includes(e.id)})),(!a||!a.length)&&(a=n.includeHiddenNodes?e.nodes:e.getNodes);const s=cc(a),{x:c,y:u,zoom:d}=gc(s,e.dimensions.width,e.dimensions.height,null!=(o=n.minZoom)?o:e.minZoom,null!=(i=n.maxZoom)?i:e.maxZoom,null!=(r=n.padding)?r:ru,n.offset);l(c,u,d,null==n?void 0:n.duration)},setCenter:async(n,o,i)=>{t.value||await lu(e);const r="undefined"!=typeof(null==i?void 0:i.zoom)?i.zoom:e.maxZoom,a=e.dimensions.width/2-n*r,s=e.dimensions.height/2-o*r;l(a,s,r,null==i?void 0:i.duration)},fitBounds:async(n,o={padding:ru})=>{t.value||await lu(e);const{x:i,y:r,zoom:a}=gc(n,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding);l(i,r,a,null==o?void 0:o.duration)},project:t=>oc(t,e.viewport,e.snapToGrid,e.snapGrid)}};const cu={name:"SelectionPane",inheritAttrs:!1},uu=Object(i["defineComponent"])(p(h({},cu),{setup(e){const{id:t,store:n,deleteKeyCode:o,selectionKeyCode:r,multiSelectionKeyCode:a}=Jc(),l=e=>{n.hooks.paneClick.trigger(e),n.nodesSelectionActive=!1,n.resetSelectedElements()},s=e=>n.hooks.paneContextMenu.trigger(e),c=e=>n.hooks.paneScroll.trigger(e);iu(o,e=>{var t;const o=n.getSelectedNodes,i=n.getSelectedEdges;if(e&&(o||i)){const e=null!=(t=o&&dc(o,n.edges))?t:[],r=o.map(e=>({id:e.id,type:"remove"})),a=[...i,...e].map(e=>({id:e.id,type:"remove"}));n.hooks.nodesChange.trigger(r),n.hooks.edgesChange.trigger(a),n.nodesSelectionActive=!1,n.resetSelectedElements()}}),iu(a,e=>{n.multiSelectionActive=e});const u=iu(r,e=>{n.userSelectionActive&&e||(n.userSelectionActive=e&&n.elementsSelectable)});return(e,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["unref"])(u)?(Object(i["openBlock"])(),Object(i["createBlock"])(Ic,{key:"user-selection-"+Object(i["unref"])(t)})):Object(i["createCommentVNode"])("",!0),Object(i["unref"])(n).nodesSelectionActive?(Object(i["openBlock"])(),Object(i["createBlock"])(Mc,{key:"nodes-selection-"+Object(i["unref"])(t)})):Object(i["createCommentVNode"])("",!0),(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:"flow-pane-"+Object(i["unref"])(t),class:"vue-flow__pane vue-flow__container",onClick:l,onContextmenu:s,onWheel:c},null,32))],64))}})),du=["data-id"],hu={name:"Node",inheritAttrs:!1},pu=Object(i["defineComponent"])(p(h({},hu),{props:{id:null,node:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:{type:Boolean},snapGrid:null},setup(e){var t;const n=e,{store:o}=Jc(),r=Ve(n,"node");Object(i["provide"])(ba,n.id);const a=Object(i["ref"])(),l=()=>r.value.dragging&&(e=>o.hooks.nodeMouseEnter.trigger({event:e,node:r.value})),s=()=>r.value.dragging&&(e=>o.hooks.nodeMouseMove.trigger({event:e,node:r.value})),c=()=>r.value.dragging&&(e=>o.hooks.nodeMouseLeave.trigger({event:e,node:r.value})),u=()=>e=>o.hooks.nodeContextMenu.trigger({event:e,node:r.value}),d=()=>e=>o.hooks.nodeDoubleClick.trigger({event:e,node:r.value}),f=e=>{n.draggable||(n.selectable&&(o.nodesSelectionActive=!1,r.value.selected||o.addSelectedNodes([r.value])),o.hooks.nodeClick.trigger({event:e,node:r.value}))};Object(i["onMounted"])(()=>{Ce(a,()=>o.updateNodeDimensions([{id:r.value.id,nodeElement:a.value,forceUpdate:!0}])),Object(i["watch"])([()=>r.value.type,()=>r.value.sourcePosition,()=>r.value.targetPosition],()=>Object(i["nextTick"])(()=>o.updateNodeDimensions([{id:r.value.id,nodeElement:a.value}]))),o.updateNodeDimensions([{id:r.value.id,nodeElement:a.value,forceUpdate:!0}])}),Object(i["watch"])([()=>r.value.position,()=>{var e;return null==(e=o.getNode(r.value.parentNode))?void 0:e.computedPosition},()=>r.value.selected,()=>{var e;return null==(e=o.getNode(r.value.parentNode))?void 0:e.selected}],([e,t])=>{const n=p(h({},e),{z:r.value.dragging||r.value.selected?1e3:0});r.value.computedPosition=t?bc(t,n):n,r.value.handleBounds=Ec(a.value,v.value)},{deep:!0}),o.updateNodePosition({id:r.value.id,diff:{x:0,y:0}});const m=Object(i["inject"])(va),g=Object(i["ref"])(null!=(t=r.value.type)?t:"default");Object(i["watch"])(()=>r.value.type,e=>e&&(g.value=e));const b=Object(i["computed"])(()=>{var e;let t=null!=(e=r.value.template)?e:o.getNodeTypes[g.value];const n=Object(i["getCurrentInstance"])();if("string"==typeof t&&n){const e=Object.keys(n.appContext.components);e&&e.includes(g.value)&&(t=Object(i["resolveComponent"])(g.value,!1))}if("string"!=typeof t)return t;const a=null==m?void 0:m["node-"+g.value];return(null==a?void 0:a({}))?a:(console.warn(`[vueflow]: Node type "${r.value.type}" not found and no node-slot detected. Using fallback type "default".`),g.value="default",o.getNodeTypes.default)}),{scale:v,onDrag:y,onDragStart:w,onDragStop:O}=Fs(a,{handle:r.value.dragHandle,disabled:!n.draggable,grid:n.snapGrid,cancel:"."+o.noDragClassName,enableUserSelectHack:!1,scale:o.viewport.zoom});Object(i["onMounted"])(()=>{q(()=>o.viewport.zoom,()=>{v.value=o.viewport.zoom},{debounce:5})}),w(({event:e})=>{o.addSelectedNodes([]),o.hooks.nodeDragStart.trigger({event:e,node:r.value}),o.selectNodesOnDrag&&n.selectable?(o.nodesSelectionActive=!1,r.value.selected||o.addSelectedNodes([r.value])):!o.selectNodesOnDrag&&!r.value.selected&&n.selectable&&(o.nodesSelectionActive=!1,o.addSelectedNodes([]))}),y(({event:e,data:{deltaX:t,deltaY:n}})=>{o.updateNodePosition({id:r.value.id,diff:{x:t,y:n},dragging:!0}),o.hooks.nodeDrag.trigger({event:e,node:r.value})}),O(({event:e,data:{deltaX:t,deltaY:i}})=>{if(!r.value.dragging)return n.selectable&&!o.selectNodesOnDrag&&!r.value.selected&&o.addSelectedNodes([r.value]),void o.hooks.nodeClick.trigger({event:e,node:r.value});o.updateNodePosition({id:r.value.id,diff:{x:t,y:i},dragging:!1}),o.hooks.nodeDragStop.trigger({event:e,node:r.value})});const j=Object(i["computed"])(()=>{const e=r.value.class instanceof Function?r.value.class(r.value):r.value.class;return["vue-flow__node","vue-flow__node-"+g.value,o.noPanClassName,{dragging:r.value.dragging,selected:r.value.selected,selectable:n.selectable},e]}),x=Object(i["computed"])(()=>{const e=(r.value.style instanceof Function?r.value.style(r.value):r.value.style)||{},t=r.value.width instanceof Function?r.value.width(r.value):r.value.width,o=r.value.height instanceof Function?r.value.height(r.value):r.value.height;return t&&(e.width="string"==typeof t?t:t+"px"),o&&(e.height="string"==typeof o?o:o+"px"),h({zIndex:r.value.computedPosition.z,transform:`translate(${r.value.computedPosition.x}px,${r.value.computedPosition.y}px)`,pointerEvents:n.selectable||n.draggable?"all":"none"},e)});return(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{ref_key:"nodeElement",ref:a,class:Object(i["normalizeClass"])(Object(i["unref"])(j)),style:Object(i["normalizeStyle"])(Object(i["unref"])(x)),"data-id":Object(i["unref"])(r).id,onMouseenter:l,onMousemove:s,onMouseleave:c,onContextmenu:u,onClick:f,onDblclick:d},[(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(Object(i["unref"])(b)),{id:Object(i["unref"])(r).id,type:Object(i["unref"])(r).type,data:Object(i["unref"])(r).data,selected:!!Object(i["unref"])(r).selected,connectable:n.connectable,position:Object(i["unref"])(r).position,"computed-position":Object(i["unref"])(r).computedPosition,dimensions:Object(i["unref"])(r).dimensions,"is-valid-target-pos":Object(i["unref"])(r).isValidTargetPos,"is-valid-source-pos":Object(i["unref"])(r).isValidSourcePos,"parent-node":Object(i["unref"])(r).parentNode,dragging:!!Object(i["unref"])(r).dragging,"z-index":Object(i["unref"])(r).computedPosition.z,"target-position":Object(i["unref"])(r).targetPosition,"source-position":Object(i["unref"])(r).sourcePosition,label:Object(i["unref"])(r).label,"drag-handle":Object(i["unref"])(r).dragHandle,"node-element":a.value},null,8,["id","type","data","selected","connectable","position","computed-position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","dragging","z-index","target-position","source-position","label","drag-handle","node-element"]))],46,du))}})),fu={class:"vue-flow__nodes vue-flow__container"},mu={name:"Nodes"},gu=Object(i["defineComponent"])(p(h({},mu),{setup(e){const{store:t}=Jc();return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",fu,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object(i["unref"])(t).getNodes,e=>{var n;return Object(i["openBlock"])(),Object(i["createBlock"])(pu,{id:e.id,key:e.id,node:e,draggable:"undefined"==typeof e.draggable?Object(i["unref"])(t).nodesDraggable:!!e.draggable,selectable:"undefined"==typeof e.selectable?Object(i["unref"])(t).elementsSelectable:!!e.selectable,connectable:"undefined"==typeof e.connectable?Object(i["unref"])(t).nodesConnectable:!!e.connectable,"snap-grid":null!=(n=e.snapGrid)?n:Object(i["unref"])(t).snapToGrid?Object(i["unref"])(t).snapGrid:void 0},null,8,["id","node","draggable","selectable","connectable","snap-grid"])}),128))]))}})),bu={name:"Edge",inheritAttrs:!1},vu=Object(i["defineComponent"])(p(h({},bu),{props:{id:null,edge:null,sourceNode:null,targetNode:null,selectable:{type:Boolean},updatable:{type:Boolean}},setup(e){var t;const n=e,{store:o}=Jc(),r=Ve(n,"edge"),a=Object(i["ref"])(!1),{onMouseDown:l}=nu(),s=e=>{const t={event:e,edge:r.value};n.selectable&&(o.nodesSelectionActive=!1,o.addSelectedEdges([r.value])),o.hooks.edgeClick.trigger(t)},c=e=>o.hooks.edgeContextMenu.trigger({event:e,edge:r.value}),u=e=>o.hooks.edgeDoubleClick.trigger({event:e,edge:r.value}),d=e=>o.hooks.edgeMouseEnter.trigger({event:e,edge:r.value}),h=e=>o.hooks.edgeMouseMove.trigger({event:e,edge:r.value}),p=e=>o.hooks.edgeMouseLeave.trigger({event:e,edge:r.value}),f=()=>a.value=!0,m=()=>a.value=!1,g=e=>v(e,!0),b=e=>v(e,!1),v=(e,t)=>{var n;const i=t?r.value.target:r.value.source,a=null!=(n=t?r.value.targetHandle:r.value.sourceHandle)?n:"";o.hooks.edgeUpdateStart.trigger({event:e,edge:r.value}),l(e,a,i,t,void 0,t?"target":"source",e=>o.hooks.edgeUpdate.trigger({edge:r.value,connection:e}),()=>o.hooks.edgeUpdateEnd.trigger({event:e,edge:r.value}))},y=Object(i["computed"])(()=>{if(o.connectionMode===oa.Strict)return n.targetNode.handleBounds.target;const e=n.targetNode.handleBounds.target,t=n.targetNode.handleBounds.source;return null!=e?e:t}),w=Object(i["computed"])(()=>{if(o.connectionMode===oa.Strict)return n.sourceNode.handleBounds.source;const e=n.sourceNode.handleBounds.target,t=n.sourceNode.handleBounds.source;return null!=t?t:e}),O=Object(i["computed"])(()=>Oc(w.value,r.value.sourceHandle)),j=Object(i["computed"])(()=>Oc(y.value,r.value.targetHandle)),x=Object(i["computed"])(()=>O.value?O.value.position:ea.Bottom),k=Object(i["computed"])(()=>j.value?j.value.position:ea.Top),_=Object(i["computed"])(()=>o.edgeUpdaterRadius);Object(i["onMounted"])(()=>{Object(i["watch"])([x,k,()=>n.sourceNode.position,()=>n.targetNode.position,()=>n.sourceNode.computedPosition,()=>n.targetNode.computedPosition,()=>n.sourceNode.dimensions,()=>n.targetNode.dimensions],()=>{const{sourceX:e,sourceY:t,targetY:o,targetX:i}=jc(n.sourceNode,O.value,x.value,n.targetNode,j.value,k.value);r.value.sourceX!==e&&(r.value.sourceX=e),r.value.sourceY!==t&&(r.value.sourceY=t),r.value.targetX!==i&&(r.value.targetX=i),r.value.targetY!==o&&(r.value.targetY=o)},{immediate:!0,deep:!0})});const E=Object(i["inject"])(va),S=Object(i["ref"])(null!=(t=r.value.type)?t:"default");Object(i["watch"])(()=>r.value.type,e=>e&&(S.value=e));const N=Object(i["computed"])(()=>{var e;let t=null!=(e=r.value.template)?e:o.getEdgeTypes[S.value];const n=Object(i["getCurrentInstance"])();if("string"==typeof t&&n){const e=Object.keys(n.appContext.components);e&&e.includes(S.value)&&(t=Object(i["resolveComponent"])(S.value,!1))}if("string"!=typeof t)return t;const a=null==E?void 0:E["edge-"+S.value];return(null==a?void 0:a({}))?a:(console.warn(`[vueflow]: Edge type "${r.value.type}" not found and no edge-slot detected. Using fallback type "default".`),S.value="default",o.getEdgeTypes.default)}),B=Object(i["computed"])(()=>{const e=r.value.class instanceof Function?r.value.class(r.value):r.value.class;return["vue-flow__edge","vue-flow__edge-"+S.value,o.noPanClassName,{selected:r.value.selected,animated:r.value.animated,inactive:!n.selectable,updating:a.value},e]}),C=()=>r.value.style instanceof Function?r.value.style(r.value):r.value.style;return(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("g",{class:Object(i["normalizeClass"])(Object(i["unref"])(B)),onClick:s,onDblClick:u,onContextmenu:c,onMouseenter:d,onMousemove:h,onMouseleave:p},[(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(Object(i["unref"])(N)),{id:Object(i["unref"])(r).id,"source-node":n.sourceNode,"target-node":n.targetNode,source:Object(i["unref"])(r).source,target:Object(i["unref"])(r).target,updatable:n.updatable,selected:Object(i["unref"])(r).selected,animated:Object(i["unref"])(r).animated,label:Object(i["unref"])(r).label,"label-style":Object(i["unref"])(r).labelStyle,"label-show-bg":Object(i["unref"])(r).labelShowBg,"label-bg-style":Object(i["unref"])(r).labelBgStyle,"label-bg-padding":Object(i["unref"])(r).labelBgPadding,"label-bg-border-radius":Object(i["unref"])(r).labelBgBorderRadius,data:Object(i["unref"])(r).data,style:Object(i["normalizeStyle"])(C()),"marker-start":`url(#${Object(i["unref"])(yc)(Object(i["unref"])(r).markerStart)})`,"marker-end":`url(#${Object(i["unref"])(yc)(Object(i["unref"])(r).markerEnd)})`,"source-position":Object(i["unref"])(x),"target-position":Object(i["unref"])(k),"source-x":Object(i["unref"])(r).sourceX,"source-y":Object(i["unref"])(r).sourceY,"target-x":Object(i["unref"])(r).targetX,"target-y":Object(i["unref"])(r).targetY,"source-handle-id":Object(i["unref"])(r).sourceHandle,"target-handle-id":Object(i["unref"])(r).targetHandle},null,8,["id","source-node","target-node","source","target","updatable","selected","animated","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","data","style","marker-start","marker-end","source-position","target-position","source-x","source-y","target-x","target-y","source-handle-id","target-handle-id"])),n.updatable?(Object(i["openBlock"])(),Object(i["createElementBlock"])("g",{key:0,onMousedown:g,onMouseenter:f,onMouseout:m},[Object(i["createVNode"])(Sl,{position:Object(i["unref"])(x),"center-x":Object(i["unref"])(r).sourceX,"center-y":Object(i["unref"])(r).sourceY,radius:Object(i["unref"])(_)},null,8,["position","center-x","center-y","radius"])],32)):Object(i["createCommentVNode"])("",!0),n.updatable?(Object(i["openBlock"])(),Object(i["createElementBlock"])("g",{key:1,onMousedown:b,onMouseenter:f,onMouseout:m},[Object(i["createVNode"])(Sl,{position:Object(i["unref"])(k),"center-x":Object(i["unref"])(r).targetX,"center-y":Object(i["unref"])(r).targetY,radius:Object(i["unref"])(_)},null,8,["position","center-x","center-y","radius"])],32)):Object(i["createCommentVNode"])("",!0)],34))}})),yu=["id","markerWidth","markerHeight","markerUnits","orient"],wu=["stroke","stroke-width","fill"],Ou=["stroke","stroke-width"],ju={name:"Marker"};var xu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(xu||(xu={}));const ku=Object(i["defineComponent"])(p(h({},ju),{props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto"},strokeWidth:{default:1}},setup(e){const t=e;return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:""+t.width,markerHeight:""+t.height,markerUnits:t.markerUnits,orient:t.orient},["arrowclosed"===t.type?(Object(i["openBlock"])(),Object(i["createElementBlock"])("polyline",{key:0,stroke:t.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":t.strokeWidth,fill:t.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,wu)):Object(i["createCommentVNode"])("",!0),"arrow"===t.type?(Object(i["openBlock"])(),Object(i["createElementBlock"])("polyline",{key:1,stroke:t.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":t.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Ou)):Object(i["createCommentVNode"])("",!0)],8,yu))}})),_u={name:"MarkerDefinitions"},Eu=Object(i["defineComponent"])(p(h({},_u),{props:{defaultColor:{default:""}},setup(e){const t=e,{store:n}=Jc(),o=Object(i["computed"])(()=>{const e=[];return n.edges.reduce((n,o)=>([o.markerStart,o.markerEnd].forEach(o=>{if(o){const i=yc(o);e.includes(i)||("object"==typeof o?n.push(p(h({},o),{id:i,color:o.color||t.defaultColor})):n.push({id:i,color:t.defaultColor,type:o}),e.push(i))}}),n.sort((e,t)=>e.id.localeCompare(t.id))),[])});return(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("defs",null,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object(i["unref"])(o),e=>(Object(i["openBlock"])(),Object(i["createBlock"])(ku,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}})),Su={name:"Edges"},Nu=Object(i["defineComponent"])(p(h({},Su),{setup(e){const{store:t}=Jc(),n=m(()=>t.connectionNodeId,()=>!!t.connectionNodeId&&t.getNode(t.connectionNodeId)),o=m(()=>t.connectionNodeId,()=>!!(n.value&&("undefined"==typeof n.value.connectable?t.nodesConnectable:n.value.connectable)&&t.connectionNodeId&&t.connectionHandleType)),r=e=>t.getNode(e),a=Object(i["computed"])(()=>kc(t.getEdges,r));return(e,l)=>(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object(i["unref"])(a),e=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{key:e.level,class:"vue-flow__edges vue-flow__container",style:Object(i["normalizeStyle"])("z-index: "+e.level)},[e.isMaxLevel?(Object(i["openBlock"])(),Object(i["createBlock"])(Eu,{key:0,"default-color":Object(i["unref"])(t).defaultMarkerColor},null,8,["default-color"])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("g",null,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.edges,e=>(Object(i["openBlock"])(),Object(i["createBlock"])(vu,{id:e.id,key:e.id,edge:e,"source-node":r(e.source),"target-node":r(e.target),selectable:"undefined"==typeof e.selectable?Object(i["unref"])(t).elementsSelectable:e.selectable,updatable:"undefined"==typeof e.updatable?Object(i["unref"])(t).edgesUpdatable:e.updatable},null,8,["id","edge","source-node","target-node","selectable","updatable"]))),128)),Object(i["unref"])(o)&&Object(i["unref"])(n)?(Object(i["openBlock"])(),Object(i["createBlock"])(Pl,{key:0,"source-node":Object(i["unref"])(n)},null,8,["source-node"])):Object(i["createCommentVNode"])("",!0)])],4))),128))}})),Bu={name:"Transform"},Cu=Object(i["defineComponent"])(p(h({},Bu),{setup(e){const{id:t,store:n}=Jc(),o=async e=>{const t=ou();return"screen"in t&&await C(e.dimensions).toMatch(({height:e,width:t})=>!isNaN(t)&&t>0&&!isNaN(e)&&e>0),!0},r=Object(i["ref"])(!1);Object(i["onMounted"])(async()=>{const{zoomIn:e,zoomOut:t,zoomTo:i,setTransform:a,getTransform:l,fitView:s,fitBounds:c,setCenter:u}=su(n),d={fitView:(e={padding:.1})=>s(e),zoomIn:e,zoomOut:t,zoomTo:i,setTransform:a,getTransform:l,setCenter:u,fitBounds:c,project:ic(n),getElements:fc(n),getNodes:hc(n),getEdges:pc(n),toObject:mc(n)};await o(n),r.value=!0,n.instance=d,n.fitViewOnInit&&d.fitView(),n.hooks.paneReady.trigger(d)});const a=Object(i["computed"])(()=>`translate(${n.viewport.x}px,${n.viewport.y}px) scale(${n.viewport.zoom})`);return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:"transformation-pane-"+Object(i["unref"])(t),class:"vue-flow__transformationpane vue-flow__container",style:Object(i["normalizeStyle"])({transform:Object(i["unref"])(a),opacity:r.value?void 0:0})},[(Object(i["openBlock"])(),Object(i["createBlock"])(gu,{key:"node-renderer-"+Object(i["unref"])(t)})),(Object(i["openBlock"])(),Object(i["createBlock"])(Nu,{key:"edge-renderer-"+Object(i["unref"])(t)})),Object(i["renderSlot"])(e.$slots,"default")],4))}})),Pu={name:"Viewport"},Vu=Object(i["defineComponent"])(p(h({},Pu),{setup(e){const{id:t,store:n,zoomActivationKeyCode:o,selectionKeyCode:r}=Jc(),a=Oe("viewport",null),l=(e,t)=>e.x!==t.x&&!isNaN(t.x)||e.y!==t.y&&!isNaN(t.y)||e.zoom!==t.k&&!isNaN(t.k),s=e=>({x:e.x,y:e.y,zoom:e.k}),c=(e,t)=>e.target.closest("."+t),u=qs(n.defaultZoom,n.minZoom,n.maxZoom),d=Object(i["ref"])(p(h({},Us({x:n.defaultPosition[0],y:n.defaultPosition[1]},n.translateExtent)),{zoom:u})),{width:f,height:m}=Pe(a);return Object(i["watch"])([f,m],([e,t])=>{n.dimensions.width=e,n.dimensions.height=t},{immediate:!0}),Object(i["onMounted"])(()=>{const e=ma().scaleExtent([n.minZoom,n.maxZoom]).translateExtent(n.translateExtent),t=In(a.value).call(e),i=t.on("wheel.zoom"),u=aa.translate(d.value.x,d.value.y).scale(d.value.zoom);e.transform(t,u),n.setState({d3Zoom:e,d3Selection:t,d3ZoomHandler:i,viewport:{x:u.x,y:u.y,zoom:u.k}});const h=iu(r,t=>{t?e.on("zoom",null):e.on("zoom",e=>{n.setState({viewport:{x:e.transform.x,y:e.transform.y,zoom:e.transform.k}});const t=s(e.transform);n.hooks.move.trigger({event:e,flowTransform:t})})}),p=iu(o);e.on("start",e=>{const t=s(e.transform);d.value=t,n.hooks.moveStart.trigger({event:e,flowTransform:t})}),e.on("end",e=>{if(l(d.value,e.transform)){const t=s(e.transform);d.value=t,n.hooks.moveEnd.trigger({event:e,flowTransform:t})}}),null==t||t.on("wheel",o=>{if(n.panOnScroll&&!p.value){if(c(o,n.noWheelClassName))return;o.preventDefault(),o.stopImmediatePropagation();const i=(null==t?void 0:t.property("__zoom").k)||1;if(o.ctrlKey&&n.zoomOnPinch){const n=Yn(o),r=-o.deltaY*(1===o.deltaMode?.05:o.deltaMode?1:.002)*10,a=i*Math.pow(2,r);return void(t&&e.scaleTo(t,a,n))}const r=1===o.deltaMode?20:1,a=n.panOnScrollMode===ra.Vertical?0:o.deltaX*r,l=n.panOnScrollMode===ra.Horizontal?0:o.deltaY*r;t&&n.panOnScrollSpeed&&(null==e||e.translateBy(t,-a/i*n.panOnScrollSpeed,-l/i*n.panOnScrollSpeed))}else{if(!n.zoomOnScroll&&n.preventScrolling||!n.preventScrolling||c(o,n.noWheelClassName))return null;o.preventDefault()}}).on("wheel.zoom",n.panOnScroll||"undefined"==typeof i?null:i),e.filter(e=>{const t=p.value||n.zoomOnScroll,o=n.zoomOnPinch&&e.ctrlKey;return!(!n.panOnDrag&&!t&&!n.panOnScroll&&!n.zoomOnDoubleClick&&!n.zoomOnPinch||h.value||!n.zoomOnDoubleClick&&"dblclick"===e.type||c(e,n.noWheelClassName)&&"wheel"===e.type||c(e,n.noPanClassName)&&"wheel"!==e.type||!n.zoomOnPinch&&e.ctrlKey&&"wheel"===e.type||!(t||n.panOnScroll||o||"wheel"!==e.type)||!(n.panOnDrag||"mousedown"!==e.type&&"touchstart"!==e.type))&&((!e.ctrlKey||"wheel"===e.type)&&!e.button)})}),(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{ref:"viewport",key:"viewport-"+Object(i["unref"])(t),class:"vue-flow__viewport vue-flow__container"},[Object(i["createVNode"])(Cu,null,{default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"default")]),_:3}),(Object(i["openBlock"])(),Object(i["createBlock"])(uu,{key:"selection-pane-"+Object(i["unref"])(t)}))]))}})),Au=e=>"undefined"!=typeof e;var Mu=(e,t)=>{const n=Object(i["getCurrentScope"])();null==n||n.run(()=>{const o=()=>{n.run(()=>{let n,o;n=oe([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],([r])=>{r&&Array.isArray(r)&&(o&&o.pause(),n&&n.pause(),t.setElements(r),o=oe([()=>t.edges.value.length,()=>t.nodes.value.length],()=>{e.modelValue.value=[...t.nodes.value,...t.edges.value]},{immediate:!0}),Object(i["nextTick"])(()=>{o&&o.resume(),n&&n.resume()}))},{immediate:!(!e.modelValue||!e.modelValue.value),flush:"post"})})},r=()=>{n.run(()=>{let n,o;n=oe([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],async([r])=>{r&&Array.isArray(r)&&(o&&o.pause(),n&&n.pause(),t.setNodes(r),o=oe(()=>t.nodes.value.length,()=>e.nodes.value=[...t.nodes.value],{immediate:!0}),Object(i["nextTick"])(()=>{o&&o.resume(),n&&n.resume()}))},{immediate:!(!e.nodes||!e.nodes.value),flush:"post"})})},a=()=>{n.run(()=>{let n,o;n=oe([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],async([r])=>{r&&Array.isArray(r)&&(o&&o.pause(),n&&n.pause(),t.setEdges(r),o=oe(()=>t.edges.value.length,()=>e.edges.value=[...t.edges.value],{immediate:!0}),Object(i["nextTick"])(()=>{o&&o.resume(),n&&n.resume()}))},{immediate:!(!e.edges||!e.edges.value),flush:"post"})})},l=()=>{n.run(()=>{var n;Object(i["watch"])([()=>e.maxZoom,e.maxZoom],()=>{e.maxZoom&&Au(e.maxZoom.value)&&t.setMaxZoom(e.maxZoom.value)},{immediate:Au(null==(n=e.maxZoom)?void 0:n.value)})})},s=()=>{n.run(()=>{var n;Object(i["watch"])([()=>e.minZoom,e.minZoom],()=>{e.minZoom&&Au(e.minZoom.value)&&t.setMinZoom(e.minZoom.value)},{immediate:Au(null==(n=e.minZoom)?void 0:n.value)})})},c=()=>{n.run(()=>{var n;Object(i["watch"])([()=>e.applyDefault,e.applyDefault],()=>{e.applyDefault&&Au(e.applyDefault.value)&&(t.applyDefault.value=e.applyDefault.value)},{immediate:Au(null==(n=e.applyDefault)?void 0:n.value)}),Object(i["watch"])(t.applyDefault,()=>{t.applyDefault.value&&(t.onNodesChange(t.applyNodeChanges),t.onEdgesChange(t.applyEdgeChanges))},{immediate:!0})})};o(),r(),a(),l(),s(),c();const u=["id","modelValue","edges","nodes","maxZoom","minZoom","applyDefault"];Object.keys(e).forEach(o=>{if(!u.includes(o)){const r=e[o],a=t[o];n.run(()=>{Object(i["watch"])([()=>r,r],()=>{r&&Au(r.value)&&(a.value=r.value)},{immediate:Au(null==r?void 0:r.value)})})}})})};const $u={class:"vue-flow"},zu={name:"VueFlow"};var Tu,Du,Lu;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Tu||(Tu={})),function(e){e.Strict="strict",e.Loose="loose"}(Du||(Du={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"}(Lu||(Lu={}));const Iu=Object(i["defineComponent"])(p(h({},zu),{props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:Boolean,default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultZoom:null,defaultPosition:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null},emits:[...Object.keys(ya()),"update:modelValue","update:nodes","update:edges"],setup(e,{emit:t}){const n=Ae(e,t),o=Jc(),{id:r,hooks:a,getNodeTypes:l,getEdgeTypes:s}=o,c=f(o,["id","hooks","getNodeTypes","getEdgeTypes"]);return Mu(n,h({id:r,hooks:a,getNodeTypes:l,getEdgeTypes:s},c)),Oa(t,a.value),Object(i["provide"])(va,Object(i["useSlots"])()),(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",$u,[(Object(i["openBlock"])(),Object(i["createBlock"])(Vu,{key:"renderer-"+Object(i["unref"])(r)},{nodes:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object.keys(Object(i["unref"])(l)),t=>Object(i["renderSlot"])(e.$slots,"node-"+t,{key:`node-${t}-${Object(i["unref"])(r)}`})),128))]),edges:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object.keys(Object(i["unref"])(s)),t=>Object(i["renderSlot"])(e.$slots,"edge-"+t,{key:`edge-${t}-${Object(i["unref"])(r)}`})),128))]),"connection-name":Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"connection-line")]),default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"zoom-pane")]),_:3})),Object(i["renderSlot"])(e.$slots,"default")]))}})),Fu=["x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],Yu={name:"MiniMapNode"},Xu=Object(i["defineComponent"])(p(h({},Yu),{props:{id:null,parentNode:null,selected:{type:Boolean},dragging:{type:Boolean},position:null,dimensions:null,borderRadius:null,color:null,shapeRendering:{default:"geometricPrecision"},strokeColor:null,strokeWidth:null},emits:["click","dblClick"],setup(e,{emit:t}){var n;const o=e,r=Object(i["useAttrs"])(),a=null!=(n=r.style)?n:{},l=Object(i["computed"])(()=>o.color||a.background||a.backgroundColor);return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("rect",{class:Object(i["normalizeClass"])(["vue-flow__minimap-node",Object(i["unref"])(r).class]),style:Object(i["normalizeStyle"])(Object(i["unref"])(r).style),x:o.position.x,y:o.position.y,rx:o.borderRadius,ry:o.borderRadius,width:o.dimensions.width,height:o.dimensions.height,fill:Object(i["unref"])(l),stroke:o.strokeColor,"stroke-width":o.strokeWidth,"shape-rendering":o.shapeRendering,onClick:n[0]||(n[0]=e=>t("click")),onDblClick:n[1]||(n[1]=e=>t("dblClick"))},null,46,Fu),Object(i["renderSlot"])(e.$slots,"default")],64))}})),Hu=["width","height","viewBox"],Ru=["d","fill"],qu={name:"MiniMap"};Object(i["defineComponent"])(p(h({},qu),{props:{nodeColor:{type:[String,Function],default:"#fff"},nodeStrokeColor:{type:[String,Function],default:"#555"},nodeClassName:{type:[String,Function],default:""},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 242, 243, 0.7)"}},setup(e){var t,n,o,r;const a=e,l=Object(i["useAttrs"])(),s=ou(),c=200,u=150,{store:d}=Jc(),h=null!=(n=null==(t=l.style)?void 0:t.width)?n:c,p=null!=(r=null==(o=l.style)?void 0:o.height)?r:u,f=a.nodeColor instanceof Function?a.nodeColor:()=>a.nodeColor,m=a.nodeStrokeColor instanceof Function?a.nodeStrokeColor:()=>a.nodeStrokeColor,g=a.nodeClassName instanceof Function?a.nodeClassName:()=>a.nodeClassName,b="undefined"==typeof s||s.chrome?"crispEdges":"geometricPrecision",v=Object(i["computed"])(()=>cc(d.getNodes)),y=Object(i["computed"])(()=>({x:-d.viewport.x/d.viewport.zoom,y:-d.viewport.y/d.viewport.zoom,width:d.dimensions.width/d.viewport.zoom,height:d.dimensions.height/d.viewport.zoom})),w=Object(i["computed"])(()=>{const e=d.getNodes&&d.getNodes.length?sc(v.value,y.value):y.value,t=e.width/h,n=e.height/p,o=Math.max(t,n),i=o*h,r=o*p,a=5*o;return{offset:a,x:e.x-(i-e.width)/2-a,y:e.y-(r-e.height)/2-a,width:i+2*a,height:r+2*a}}),O=Object(i["computed"])(()=>w.value.x&&w.value.y?`\n    M${w.value.x-w.value.offset},${w.value.y-w.value.offset}\n    h${w.value.width+2*w.value.offset}\n    v${w.value.height+2*w.value.offset}\n    h${-w.value.width-2*w.value.offset}z\n    M${y.value.x},${y.value.y}\n    h${y.value.width}\n    v${y.value.height}\n    h${-y.value.width}z`:""),j=(e,t)=>{d.hooks.miniMapNodeClick.trigger({event:e,node:t})},x=(e,t)=>{d.hooks.miniMapNodeDoubleClick.trigger({event:e,node:t})};return(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{width:Object(i["unref"])(h),height:Object(i["unref"])(p),viewBox:`${Object(i["unref"])(w).x||0} ${Object(i["unref"])(w).y||0} ${Object(i["unref"])(w).width||0} ${Object(i["unref"])(w).height||0}`,class:"vue-flow__minimap"},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object(i["unref"])(d).getNodes,t=>(Object(i["openBlock"])(),Object(i["createBlock"])(Xu,{key:"mini-map-node-"+t.id,id:t.id,position:t.computedPosition,dimensions:t.dimensions,style:Object(i["normalizeStyle"])(t.style),class:Object(i["normalizeClass"])(Object(i["unref"])(g)(t)),color:Object(i["unref"])(f)(t),"border-radius":a.nodeBorderRadius,"stroke-color":Object(i["unref"])(m)(t),"stroke-width":a.nodeStrokeWidth,"shape-rendering":Object(i["unref"])(b),onClick:e=>j(e,t),onDblclick:e=>x(e,t)},{default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"node-"+t.type,{id:t.id,parentNode:t.parentNode,selected:t.selected,dragging:t.dragging,position:t.computedPosition,dimensions:t.dimensions,style:Object(i["normalizeStyle"])(t.style),class:Object(i["normalizeClass"])(Object(i["unref"])(g)(t)),color:Object(i["unref"])(f)(t),borderRadius:a.nodeBorderRadius,strokeColor:Object(i["unref"])(m)(t),strokeWidth:a.nodeStrokeWidth,shapeRendering:Object(i["unref"])(b)})]),_:2},1032,["id","position","dimensions","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","onClick","onDblclick"]))),128)),Object(i["createElementVNode"])("path",{class:"vue-flow__minimap-mask",d:Object(i["unref"])(O),fill:a.maskColor,"fill-rule":"evenodd"},null,8,Ru)],8,Hu))}}));var Uu=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const Zu={name:"ControlButton"},Gu={class:"vue-flow__controls-button"};function Wu(e,t,n,o,r,a){return Object(i["openBlock"])(),Object(i["createElementBlock"])("button",Gu,[Object(i["renderSlot"])(e.$slots,"default")])}var Qu=Uu(Zu,[["render",Wu]]);const Ku={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ju=Object(i["createElementVNode"])("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),ed=[Ju];function td(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",Ku,ed)}const nd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},od=Object(i["createElementVNode"])("path",{d:"M0 0h32v4.2H0z"},null,-1),id=[od];function rd(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",nd,id)}const ad={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ld=Object(i["createElementVNode"])("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),sd=[ld];function cd(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",ad,sd)}const ud={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},dd=Object(i["createElementVNode"])("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),hd=[dd];function pd(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",ud,hd)}const fd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},md=Object(i["createElementVNode"])("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),gd=[md];function bd(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",fd,gd)}const vd={class:"vue-flow__controls"},yd={name:"Controls"},wd=(Object(i["defineComponent"])(p(h({},yd),{props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null},emits:["zoom-in","zoom-out","fit-view","interaction-change"],setup(e,{emit:t}){const n=e,{store:o}=Jc(),{zoomIn:r,zoomOut:a,fitView:l}=su(),s=Object(i["computed"])(()=>o.nodesDraggable&&o.nodesConnectable&&o.elementsSelectable),c=()=>{r(),t("zoom-in")},u=()=>{a(),t("zoom-out")},d=()=>{l(n.fitViewParams),t("fit-view")},h=()=>{o.setInteractive(!s.value),t("interaction-change",!s.value)};return(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",vd,[n.showZoom?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["renderSlot"])(e.$slots,"control-zoom-in",{},()=>[Object(i["createVNode"])(Qu,{class:"vue-flow__controls-zoomin",onClick:c},{default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"icon-zoom-in",{},()=>[Object(i["createVNode"])(Object(i["unref"])(td))])]),_:3})]),Object(i["renderSlot"])(e.$slots,"control-zoom-out",{},()=>[Object(i["createVNode"])(Qu,{class:"vue-flow__controls-zoomout",onClick:u},{default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"icon-zoom-out",{},()=>[Object(i["createVNode"])(Object(i["unref"])(rd))])]),_:3})])],64)):Object(i["createCommentVNode"])("",!0),Object(i["renderSlot"])(e.$slots,"control-fitview",{},()=>[n.showFitView?(Object(i["openBlock"])(),Object(i["createBlock"])(Qu,{key:0,class:"vue-flow__controls-fitview",onClick:d},{default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"icon-fitview",{},()=>[Object(i["createVNode"])(Object(i["unref"])(cd))])]),_:3})):Object(i["createCommentVNode"])("",!0)]),Object(i["renderSlot"])(e.$slots,"control-interactive",{},()=>[n.showInteractive?(Object(i["openBlock"])(),Object(i["createBlock"])(Qu,{key:0,class:"vue-flow__controls-interactive",onClick:h},{default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"icon-unlock",{},()=>[Object(i["unref"])(s)?(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["unref"])(bd),{key:0})):Object(i["createCommentVNode"])("",!0)]),Object(i["renderSlot"])(e.$slots,"icon-lock",{},()=>[Object(i["unref"])(s)?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["unref"])(pd),{key:0}))])]),_:3})):Object(i["createCommentVNode"])("",!0)]),Object(i["renderSlot"])(e.$slots,"default")]))}})),["x","y","width","height"]),Od=["stroke","stroke-width","d"],jd=["cx","cy","r","fill"],xd={key:2,height:"100",width:"100"},kd=["fill"],_d=["x","y","fill"],Ed={name:"Background"};var Sd;(function(e){e.Lines="lines",e.Dots="dots"})(Sd||(Sd={}));Object(i["defineComponent"])(p(h({},Ed),{props:{variant:{default:"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t=e,n={[Sd.Dots]:"#81818a",[Sd.Lines]:"#eee"},{store:o}=Jc(),r=Object(i["computed"])(()=>{const e=t.gap&&t.gap*o.viewport.zoom,n=e&&o.viewport.x%e,i=e&&o.viewport.y%e,r=t.size||.4*o.viewport.zoom;return{scaledGap:e,xOffset:n,yOffset:i,size:r}}),a="pattern-"+Math.floor(1e5*Math.random()),l=Object(i["computed"])(()=>t.patternColor?t.patternColor:n[t.variant||Sd.Dots]),s=Object(i["computed"])(()=>`M${r.value.scaledGap/2} 0 V${r.value.scaledGap} M0 ${r.value.scaledGap/2} H${r.value.scaledGap}`);return(e,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{class:"vue-flow__background",style:Object(i["normalizeStyle"])({height:(t.height>100?100:t.height)+"%",width:(t.width>100?100:t.width)+"%"})},[Object(i["createElementVNode"])("pattern",{id:a,x:Object(i["unref"])(r).xOffset,y:Object(i["unref"])(r).yOffset,width:Object(i["unref"])(r).scaledGap,height:Object(i["unref"])(r).scaledGap,patternUnits:"userSpaceOnUse"},[t.variant===Sd.Lines?(Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{key:0,stroke:Object(i["unref"])(l),"stroke-width":t.size,d:Object(i["unref"])(s)},null,8,Od)):t.variant===Sd.Dots?(Object(i["openBlock"])(),Object(i["createElementBlock"])("circle",{key:1,cx:Object(i["unref"])(r).size,cy:Object(i["unref"])(r).size,r:Object(i["unref"])(r).size,fill:Object(i["unref"])(l)},null,8,jd)):Object(i["createCommentVNode"])("",!0),t.bgColor?(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",xd,[Object(i["createElementVNode"])("rect",{width:"100%",height:"100%",fill:t.bgColor},null,8,kd)])):Object(i["createCommentVNode"])("",!0)],8,wd),Object(i["createElementVNode"])("rect",{x:t.x,y:t.y,width:"100%",height:"100%",fill:`url(#${a})`},null,8,_d),Object(i["renderSlot"])(e.$slots,"default")],4))}}))}).call(this,n("c8ba"),n("4362"))},"999f":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),i={class:"row"},r={class:"col-12"},a={class:"card card-flush pb-0 bgi-position-y-center bgi-no-repeat mb-10",style:{"margin-top":"14px","background-size":"auto calc(100% + 10rem)","background-position-x":"100%","background-image":"url('/metronic8/demo1/assets/media/illustrations/sketchy-1/4.png')"}},l={class:"card-header pt-10",style:{width:"100%"}},s={class:"d-flex align-items-center",style:{width:"100%"}},c=Object(o["createStaticVNode"])('<div class="symbol symbol-circle me-5"><div class="symbol-label bg-transparent text-primary border border-secondary border-dashed"><span class="svg-icon svg-icon-2x svg-icon-primary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M17.302 11.35L12.002 20.55H21.202C21.802 20.55 22.202 19.85 21.902 19.35L17.302 11.35Z" fill="currentColor"></path><path opacity="0.3" d="M12.002 20.55H2.802C2.202 20.55 1.80202 19.85 2.10202 19.35L6.70203 11.45L12.002 20.55ZM11.302 3.45L6.70203 11.35H17.302L12.702 3.45C12.402 2.85 11.602 2.85 11.302 3.45Z" fill="currentColor"></path></svg></span></div></div>',1),u={key:0,class:"d-flex flex-column",style:{width:"100%"}},d={class:"text-muted fw-bolder",style:{"line-height":"2px"}},h={style:{float:"right"}},p=Object(o["createTextVNode"])(" "),f=Object(o["createElementVNode"])("a",{href:"#"},"Disco Studio",-1),m=Object(o["createElementVNode"])("span",{class:"mx-3"},"|",-1),g=Object(o["createTextVNode"])("Status "),b={class:"mx-3"},v={key:0},y={key:1},w={class:"card-body pb-0"},O={class:"d-flex overflow-auto h-55px"},j={class:"nav nav-stretch fs-5 fw-bold nav-line-tabs nav-line-tabs-2x border-transparent",role:"tablist"},x=Object(o["createElementVNode"])("li",{class:"nav-item",role:"presentation"},[Object(o["createElementVNode"])("a",{class:"nav-link text-active-primary active","data-bs-toggle":"tab",role:"tab",href:"#kt_scenes_tab_content"}," Scenes ")],-1),k={class:"nav-item",role:"presentation"},_=Object(o["createElementVNode"])("li",{class:"nav-item",role:"presentation"},[Object(o["createElementVNode"])("a",{class:"nav-link text-active-primary ms-3","data-bs-toggle":"tab",role:"tab",href:"#kt_process_tab_content"}," Process ")],-1),E={class:"card card-flush"},S={class:"card-body",style:{}},N={id:"kt_scenes_tab_contents",class:"tab-content"},B={id:"kt_scenes_tab_content",class:"py-0 tab-pane fade active show",role:"tabpanel"},C={class:"row"},P={class:"col-6"},V=Object(o["createElementVNode"])("h2",{style:{color:"#fff"}},"Generator Chain",-1),A=Object(o["createElementVNode"])("br",null,null,-1),M={key:0,class:"flex"},$={key:0,style:{color:"#fff"}},z=Object(o["createTextVNode"])(" Add some generators into this project chain to get started. "),T=Object(o["createElementVNode"])("br",null,null,-1),D=Object(o["createElementVNode"])("br",null,null,-1),L=[z,T,D],I={style:{float:"right"}},F=["onClick"],Y=Object(o["createElementVNode"])("br",null,null,-1),X=Object(o["createElementVNode"])("br",null,null,-1),H=Object(o["createElementVNode"])("br",null,null,-1),R={key:1},q=Object(o["createElementVNode"])("h2",{style:{color:"#fff"}},"Preview",-1),U={key:0,class:"card-generator",style:{margin:"15px 0 0 0",display:"inline-block",width:"100%"}},Z=["src"],G={key:1,class:"card-generator",style:{margin:"15px 0 0 0",display:"inline-block",width:"100%"}},W=["src"],Q={key:2,class:"card-generator",style:{margin:"15px 0 0 0",color:"#fff"}},K={class:"col-6"},J={key:0},ee={style:{color:"#fff","line-height":"36px"}},te={style:{float:"right"}},ne=Object(o["createTextVNode"])(" Settings "),oe={class:"item-generator"},ie={key:0},re={key:1,style:{padding:"15px"}},ae=Object(o["createElementVNode"])("h3",null,"Scene Tools",-1),le=Object(o["createElementVNode"])("p",null," Create scene items from a list of text lines (e.g. poem/lyrics). ",-1),se={class:"form-group"},ce=Object(o["createElementVNode"])("br",null,null,-1),ue={class:"form-group"},de={class:"form-label"},he=Object(o["createTextVNode"])(" Frames per Scene "),pe=Object(o["createElementVNode"])("br",null,null,-1),fe={id:"kt_animation_tab_content",class:"py-0 tab-pane fade show",role:"tabpanel"},me={id:"kt_process_tab_content",class:"py-0 tab-pane fade show",role:"tabpanel"},ge={class:"row"},be={class:"col-6"},ve=Object(o["createElementVNode"])("h2",{style:{color:"#fff"}},"Status",-1),ye={style:{color:"#fff"}},we=Object(o["createTextVNode"])(" Currently: "),Oe={key:0},je={key:1},xe=Object(o["createElementVNode"])("br",null,null,-1),ke=Object(o["createElementVNode"])("h3",{style:{color:"#fff"}},"Output",-1),_e=["innerHTML"],Ee=Object(o["createElementVNode"])("br",null,null,-1),Se=Object(o["createTextVNode"])(""),Ne=Object(o["createElementVNode"])("br",null,null,-1),Be=Object(o["createElementVNode"])("br",null,null,-1),Ce=Object(o["createElementVNode"])("br",null,null,-1),Pe={key:0},Ve=Object(o["createElementVNode"])("h2",{style:{color:"#fff"}},"CLI",-1),Ae={style:{color:"#fff"}},Me=Object(o["createTextVNode"])(" To run from shell: "),$e=Object(o["createElementVNode"])("br",null,null,-1),ze={key:1},Te=Object(o["createElementVNode"])("h2",{style:{color:"#fff"}},"Delete Project",-1),De={style:{color:"#fff"}},Le=Object(o["createTextVNode"])(" If you're sure you want to delete the project you can do so below. "),Ie=Object(o["createElementVNode"])("br",null,null,-1),Fe={key:0,class:"col-6"},Ye=Object(o["createElementVNode"])("h2",{style:{color:"#fff"}},"Output",-1),Xe={key:0,class:"card-generator",style:{margin:"15px 0 0 0",display:"inline-block"}},He=["src"],Re={key:1,class:"card-generator",style:{margin:"15px 0 0 0",display:"inline-block"}},qe=["src"],Ue={key:2,class:"card-generator",style:{margin:"15px 0 0 0",color:"#fff"}},Ze=Object(o["createElementVNode"])("br",null,null,-1),Ge={key:0},We={class:"menu-item menu-accordion","data-kt-menu-sub":"accordion","data-kt-menu-trigger":"click"},Qe=Object(o["createElementVNode"])("div",{class:"menu-content pt-8 pb-2"},[Object(o["createElementVNode"])("span",{class:"menu-section text-muted text-uppercase fs-8 ls-1"},"Projects")],-1),Ke=Object(o["createElementVNode"])("span",{class:"menu-link"},[Object(o["createElementVNode"])("span",{class:"menu-icon"},[Object(o["createElementVNode"])("i",{class:"bi bi-bag-check-fill fs-2x"})]),Object(o["createElementVNode"])("span",{class:"menu-title"},"My Projects")],-1),Je=Object(o["createElementVNode"])("span",{class:"menu-link"},[Object(o["createElementVNode"])("span",{class:"menu-icon"},[Object(o["createElementVNode"])("i",{class:"bi bi-card-list fs-2x"})]),Object(o["createElementVNode"])("span",{class:"menu-title"},"Shared Projects")],-1),et=Object(o["createElementVNode"])("span",{class:"menu-link"},[Object(o["createElementVNode"])("span",{class:"menu-icon"},[Object(o["createElementVNode"])("i",{class:"bi bi-link-45deg fs-2x"})]),Object(o["createElementVNode"])("span",{class:"menu-title"},"Closed Projects")],-1),tt={class:"menu-item menu-accordion","data-kt-menu-sub":"accordion","data-kt-menu-trigger":"click"},nt=Object(o["createElementVNode"])("div",{class:"menu-content pt-8 pb-2"},[Object(o["createElementVNode"])("span",{class:"menu-section text-muted text-uppercase fs-8 ls-1"},"Generators")],-1),ot={style:{float:"right"}},it=["onClick"];function rt(e,t,n,z,T,D){var rt=Object(o["resolveComponent"])("Vue3LiveForm"),at=Object(o["resolveComponent"])("KeyFrameEditor"),lt=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",s,[c,e.state.project?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",u,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=function(t){return e.startProject()})},"Run"),p,Object(o["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.saveProject()})},"Save")]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",name:"title",placeholder:"Title...","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.state.project.title=t}),style:{display:"inline-block",width:"200px",color:"white","margin-right":"15px",background:"transparent",border:"1px solid #555"}},null,512),[[o["vModelText"],e.state.project.title]]),f,m,g,Object(o["createElementVNode"])("span",b,[e.state.busy?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",v,"Running "+Object(o["toDisplayString"])(e.state.progressPercentage),1)):Object(o["createCommentVNode"])("",!0),e.state.busy?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",y,"Idle"))])])])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("ul",j,[x,Object(o["createElementVNode"])("li",k,[Object(o["createElementVNode"])("a",{class:"nav-link text-active-primary ms-3","data-bs-toggle":"tab",role:"tab",href:"#kt_animation_tab_content",onClick:t[3]||(t[3]=function(t){return e.delayLoadAnimation()})}," Animation ")]),_])])])]),Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",B,[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("div",P,[V,A,null!=e.state.project?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",M,[0==e.state.project.generators.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$,L)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.state.project.generators,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"bg-gray-300 m-1 p-3 rounded-md text-center item-generator",key:t.title},[Object(o["createElementVNode"])("h3",null,[Object(o["createElementVNode"])("div",I,[Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:function(n){return e.selectGenerator(t)}}," Edit ",8,F)]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.title),1)]),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(t.description),1)])})),128))])):Object(o["createCommentVNode"])("",!0),Y,X,H,e.state.project&&e.state.project.generators.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",R,[q,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.state.project.generators,(function(t){var n;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t.title},[2==t.type&&e.state.busy?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",U,[Object(o["createElementVNode"])("img",{style:{width:"100%"},src:e.apiUrl+"/output/progress.png",alt:""},null,8,Z)])):Object(o["createCommentVNode"])("",!0),(null===(n=t.output_path)||void 0===n?void 0:n.length)>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,[Object(o["createElementVNode"])("img",{style:{width:"100%"},src:e.apiUrl+"/"+t.output_path,alt:""},null,8,W)])):Object(o["createCommentVNode"])("",!0),null==t.output_path?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Q," No preview available. ")):Object(o["createCommentVNode"])("",!0)])})),128))])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",K,[null!=e.state.selectedGenerator?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",J,[Object(o["createElementVNode"])("h2",ee,[Object(o["createElementVNode"])("div",te,[Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[4]||(t[4]=function(t){return e.deleteGenerator(e.state.selectedGenerator)})}," Delete ")]),ne]),Object(o["createElementVNode"])("div",oe,[21!=e.state.selectedGenerator.type&&0==e.state.loading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ie,[Object(o["createVNode"])(rt,{schema:e.state.selectedGenerator.schema,modelValue:e.state.selectedGenerator.settings,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.state.selectedGenerator.settings=t})},null,8,["schema","modelValue"])])):Object(o["createCommentVNode"])("",!0),2==e.state.selectedGenerator.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",re,[ae,le,Object(o["createElementVNode"])("div",se,[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{type:"text",class:"form-control",name:"Lines",placeholder:"Lines...","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.state.sceneLines=t}),style:{color:"white",border:"1px solid #555"}},null,512),[[o["vModelText"],e.state.sceneLines]])]),ce,Object(o["createElementVNode"])("div",ue,[Object(o["createElementVNode"])("div",de,[he,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",name:"FramePerScene",placeholder:"10","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.state.sceneLinesFramesPerScene=t}),style:{color:"white",border:"1px solid #555"}},null,512),[[o["vModelText"],e.state.sceneLinesFramesPerScene]])])]),pe,Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[8]||(t[8]=function(t){return e.createScenesFromLines()})}," Create Scenes ")])):Object(o["createCommentVNode"])("",!0)])])):Object(o["createCommentVNode"])("",!0)])])]),Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("div",null,[e.state.project?(Object(o["openBlock"])(),Object(o["createBlock"])(at,{key:0,project:e.state.project,generator:e.generator_disco,ref:"keyframeEditor"},null,8,["project","generator"])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",me,[Object(o["createElementVNode"])("div",ge,[Object(o["createElementVNode"])("div",be,[ve,Object(o["createElementVNode"])("p",ye,[we,e.state.busy?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Oe,"Running "+Object(o["toDisplayString"])(e.state.progressPercentage),1)):Object(o["createCommentVNode"])("",!0),e.state.busy?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",je,"Idle"))]),xe,ke,Object(o["createElementVNode"])("div",{style:{color:"#fff"},innerHTML:e.state.output},null,8,_e),Ee,Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[9]||(t[9]=function(t){return e.startProject()})}," Run"),Se,Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[10]||(t[10]=function(t){return e.updateStatus()})}," Update ")]),Ne,Be,Ce,e.state.project?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Pe,[Ve,Object(o["createElementVNode"])("p",Ae,[Me,$e,Object(o["createElementVNode"])("span",null,"python cli.py --project "+Object(o["toDisplayString"])(e.state.project.id),1)])])):Object(o["createCommentVNode"])("",!0),e.state.project?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ze,[Te,Object(o["createElementVNode"])("p",De,[Le,Ie,Object(o["createElementVNode"])("button",{id:"btn btn-primary",onClick:t[11]||(t[11]=function(t){return e.deleteProject()})}," Delete Project ")])])):Object(o["createCommentVNode"])("",!0)]),e.state.project?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Fe,[Ye,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.state.project.generators,(function(t){var n;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t.title},[2==t.type&&e.state.busy?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Xe,[Object(o["createElementVNode"])("img",{src:e.apiUrl+"/output/progress.png",alt:""},null,8,He)])):Object(o["createCommentVNode"])("",!0),(null===(n=t.output_path)||void 0===n?void 0:n.length)>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Re,[Object(o["createElementVNode"])("img",{src:e.apiUrl+"/"+t.output_path,alt:""},null,8,qe)])):Object(o["createCommentVNode"])("",!0),null==t.output_path?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ue," No preview available. ")):Object(o["createCommentVNode"])("",!0)])})),128)),Ze])):Object(o["createCommentVNode"])("",!0)])])])])])])])]),e.state.mounted?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ge,[(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"#aside-context"},[Object(o["createElementVNode"])("div",We,[Qe,Object(o["createVNode"])(lt,{to:"/projects"},{default:Object(o["withCtx"])((function(){return[Ke]})),_:1}),Object(o["createVNode"])(lt,{to:"/projects"},{default:Object(o["withCtx"])((function(){return[Je]})),_:1}),Object(o["createVNode"])(lt,{to:"/projects"},{default:Object(o["withCtx"])((function(){return[et]})),_:1})]),Object(o["createElementVNode"])("div",tt,[nt,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.state.generators,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"card-generator",key:t.title},[Object(o["createElementVNode"])("h3",null,[Object(o["createElementVNode"])("div",ot,[Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:function(n){return e.addGenerator(t)}}," Add ",8,it)]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.title),1)]),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(t.description),1)])})),128))])]))])):Object(o["createCommentVNode"])("",!0)],64)}var at=n("7929"),lt={class:"save__controls"},st=Object(o["defineComponent"])({setup:function(e){var t="example-flow",n=useStorage(t,{nodes:[],edges:[],position:[NaN,NaN],zoom:1}),i=function(){return"randomnode_"+ +new Date},r=Object(at["c"])().setTransform,a=Object(at["b"])(),l=(a.nodes,a.edges,a.addNodes),s=a.setNodes,c=a.setEdges,u=a.instance,d=a.dimensions,h=function(){var e;n.value=null===(e=u.value)||void 0===e?void 0:e.toObject()},p=function(){var e=n.value;if(e){var t=e.position,o=t[0],i=void 0===o?0:o,a=t[1],l=void 0===a?0:a;s(n.value.nodes),c(n.value.edges),r({x:i,y:l,zoom:e.zoom||0})}},f=function(){var e={id:"random_node-"+i(),label:"Added node",position:{x:Math.random()*d.value.width,y:Math.random()*d.value.height}};l([e])};return function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",lt,[Object(o["createElementVNode"])("button",{onClick:h},"save"),Object(o["createElementVNode"])("button",{onClick:p},"restore"),Object(o["createElementVNode"])("button",{onClick:f},"add node")])}}});const ct=st;var ut=ct,dt=Object(o["defineComponent"])({setup:function(e){var t=[{id:"1",label:"Node 1",position:{x:100,y:100}},{id:"2",label:"Node 2",position:{x:100,y:200}},{id:"e1-2",source:"1",target:"2"}],n=Object(o["ref"])(t);return function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["unref"])(at["a"]),{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(ut)]})),_:1},8,["modelValue"])}}});const ht=dt;var pt=ht,ft=n("a1e9"),mt=n("5c40"),gt=["readonly","type"],bt=Object(o["defineComponent"])({props:{modelValue:{type:Object,required:!0},config:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var n=t.emit,i=function(){n("change")};return function(t,n){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("input",{"onUpdate:modelValue":n[0]||(n[0]=function(t){return e.modelValue[e.config.field]=t}),class:Object(o["normalizeClass"])({readonly:e.config.readonly}),readonly:e.config.readonly,type:e.config.type,onChange:n[1]||(n[1]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o["unref"])(i)&&Object(o["unref"])(i).apply(void 0,e)})},null,42,gt)),[[o["vModelDynamic"],e.modelValue[e.config.field]]])}}}),vt=(n("32e4"),n("6b0d")),yt=n.n(vt);const wt=yt()(bt,[["__scopeId","data-v-4077e6ea"]]);var Ot=wt,jt=["readonly"],xt=Object(o["defineComponent"])({props:{modelValue:{type:Object,required:!0},config:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var n=t.emit,i=function(){n("change")};return function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("label",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":n[0]||(n[0]=function(t){return e.modelValue[e.config.field]=t}),readonly:e.config.readonly,type:"checkbox",onChange:n[1]||(n[1]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o["unref"])(i)&&Object(o["unref"])(i).apply(void 0,e)})},null,40,jt),[[o["vModelCheckbox"],e.modelValue[e.config.field]]])])}}});n("c2ea");const kt=yt()(xt,[["__scopeId","data-v-18ea1cd1"]]);var _t=kt,Et=["readonly","type"],St=Object(o["defineComponent"])({props:{modelValue:{type:Object,required:!0},config:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var n=t.emit,i=function(){n("change")};return function(t,n){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("textarea",{"onUpdate:modelValue":n[0]||(n[0]=function(t){return e.modelValue[e.config.field]=t}),readonly:e.config.readonly,type:"password"===e.config.type?"password":"text",onChange:n[1]||(n[1]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o["unref"])(i)&&Object(o["unref"])(i).apply(void 0,e)})},null,40,Et)),[[o["vModelText"],e.modelValue[e.config.field]]])}}});const Nt=St;var Bt=Nt,Ct=["value","id"],Pt=["value","id"],Vt=Object(o["defineComponent"])({props:{modelValue:{type:Object,required:!0},config:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var n=t.emit,i=function(){n("change")};return function(t,n){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("select",{"onUpdate:modelValue":n[0]||(n[0]=function(t){return e.modelValue[e.config.field]=t}),onChange:n[1]||(n[1]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o["unref"])(i)&&Object(o["unref"])(i).apply(void 0,e)})},["string"===typeof e.config.options?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(e.modelValue[e.config.options],(function(t,n){var i;return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:"option-"+n,value:e.config.optionValue?t[e.config.optionValue]:t,id:"option-"+n},Object(o["toDisplayString"])(null!==(i=t[e.config.optionLabel])&&void 0!==i?i:t),9,Ct)})),128)):Object(o["createCommentVNode"])("",!0),"string"!==typeof e.config.options&&e.config.options.length>0?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:1},Object(o["renderList"])(e.config.options,(function(t,n){var i;return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:"option-"+n,value:e.config.optionValue?t[e.config.optionValue]:t,id:"option-"+n},Object(o["toDisplayString"])(null!==(i=t[e.config.optionLabel])&&void 0!==i?i:t),9,Pt)})),128)):Object(o["createCommentVNode"])("",!0)],544)),[[o["vModelSelect"],e.modelValue[e.config.field]]])}}});const At=Vt;var Mt=At,$t=["value","id"],zt=["for"],Tt=["value","id"],Dt=["for"],Lt=Object(o["defineComponent"])({props:{modelValue:{type:Object,required:!0},config:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var n=t.emit,i=function(){n("change")};return function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,["string"===typeof e.config.options?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(e.modelValue[e.config.options],(function(t,r){var a;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:"option-"+r,class:"sf-radio-item"},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{value:e.config.optionValue?t[e.config.optionValue]:t,id:"option-"+r+"-"+e.config.optionValue+"-"+e.config.optionLabel,"onUpdate:modelValue":n[0]||(n[0]=function(t){return e.modelValue[e.config.field]=t}),type:"radio",onChange:n[1]||(n[1]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o["unref"])(i)&&Object(o["unref"])(i).apply(void 0,e)})},null,40,$t),[[o["vModelRadio"],e.modelValue[e.config.field]]]),Object(o["createElementVNode"])("label",{for:"option-"+r+"-"+e.config.optionValue+"-"+e.config.optionLabel},Object(o["toDisplayString"])(null!==(a=t[e.config.optionLabel])&&void 0!==a?a:t),9,zt)])})),128)):Object(o["createCommentVNode"])("",!0),"string"!==typeof e.config.options&&e.config.options.length>0?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:1},Object(o["renderList"])(e.config.options,(function(t,r){var a;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:"option-"+r,class:"sf-radio-item"},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{value:e.config.optionValue?t[e.config.optionValue]:t,id:"option-"+r+"-"+e.config.optionValue+"-"+e.config.optionLabel,"onUpdate:modelValue":n[2]||(n[2]=function(t){return e.modelValue[e.config.field]=t}),type:"radio",onChange:n[3]||(n[3]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o["unref"])(i)&&Object(o["unref"])(i).apply(void 0,e)})},null,40,Tt),[[o["vModelRadio"],e.modelValue[e.config.field]]]),Object(o["createElementVNode"])("label",{for:"option-"+r+"-"+e.config.optionValue+"-"+e.config.optionLabel},Object(o["toDisplayString"])(null!==(a=t[e.config.optionLabel])&&void 0!==a?a:t),9,Dt)])})),128)):Object(o["createCommentVNode"])("",!0)],64)}}});n("10b3");const It=yt()(Lt,[["__scopeId","data-v-a987d8c8"]]);var Ft=It,Yt=function(e,t){var n=e.criteria;if(n){var o=n[0],i=n[1],r=n[2],a=!1;switch(i){case"!=":a=t[o]!==r;break;case"==":a=t[o]===r;break}return a}return!0},Xt=Yt,Ht={class:"sf-nested-rows"},Rt=["onClick"],qt=Object(o["defineComponent"])({props:{modelValue:{type:Object,required:!0},config:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var n=t.emit,i=e,r=function(){n("change")},a=Object(ft["s"])(!1);Object(mt["ob"])((function(){a.value=!0}));var l=JSON.parse(JSON.stringify(i.config.columns)),s=Object(ft["s"])(i.modelValue[i.config.field]),c=function(){var e={};for(var t in l)e[l[t]["field"]]="nested"===l[t]["type"]?[]:null;s.value.push(e),n("change")},u=function(e){s.value.splice(e,1),n("change")};return function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ht,[Object(o["createElementVNode"])("table",null,[Object(o["createElementVNode"])("tr",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.config.columns,(function(e,t){var n;return Object(o["openBlock"])(),Object(o["createElementBlock"])("td",{class:"sf-nested-column",key:"column-label-"+t},Object(o["toDisplayString"])(null!==(n=e.label)&&void 0!==n?n:e.field),1)})),128))]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.modelValue[e.config.field],(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:"row-"+n,class:"sf-nested-row"},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.config.columns,(function(e,t){var i;return Object(o["openBlock"])(),Object(o["createElementBlock"])("td",{key:"column-"+t,class:"sf-nested-column"},[Object(o["unref"])(Xt)(e,Object(o["unref"])(s)[n])?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(Object(o["unref"])(Gt)(e.type)),{key:0,modelValue:Object(o["unref"])(s)[n],"onUpdate:modelValue":function(e){return Object(o["unref"])(s)[n]=e},config:e,readonly:null!==(i=e.readonly)&&void 0!==i&&i,onChange:Object(o["unref"])(r)},null,8,["modelValue","onUpdate:modelValue","config","readonly","onChange"])):Object(o["createCommentVNode"])("",!0)])})),128)),Object(o["createElementVNode"])("td",{class:"sf-nested-delete",onClick:function(e){return Object(o["unref"])(u)(n)},tabindex:"0"},null,8,Rt)])})),128))]),Object(o["createElementVNode"])("button",{class:"sf-nested-row add-row",tabindex:"0",onClick:n[0]||(n[0]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o["unref"])(c)&&Object(o["unref"])(c).apply(void 0,e)})},"Add Entry")])}}});n("1ea6"),n("784b");const Ut=yt()(qt,[["__scopeId","data-v-6a4fd6b4"]]);var Zt=Ut,Gt=function(e){switch(e){case"text":return Ot;case"date":return Ot;case"number":return Ot;case"password":return Ot;case"checkbox":return _t;case"boolean":return _t;case"textarea":return Bt;case"textbox":return Bt;case"select":return Mt;case"radio":return Ft;case"nested":return Zt}},Wt={class:"sf-container"},Qt={class:"sf-row-label"},Kt={class:"sf-row-input"},Jt=Object(o["defineComponent"])({props:{schema:{type:Object,required:!1},modelValue:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var n=t.emit,i=e;Object(o["useCssVars"])((function(e){var t,n;return{"4547aaaa":null!==(n=null===(t=null===i||void 0===i?void 0:i.schema)||void 0===t?void 0:t.labelWidth)&&void 0!==n?n:"150px"}}));var r=Object(ft["s"])(!1),a=function(){n("change")};return Object(mt["ob"])((function(){r.value=!0})),function(t,n){var r;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Wt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(null===(r=i.schema)||void 0===r?void 0:r.rows,(function(t,i){var r,l;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["sf-row",{"sf-row-flex-column":"nested"===t.type}]),key:t+"-"+String(i)},[Object(o["unref"])(Xt)(t,e.modelValue)?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("div",Qt,Object(o["toDisplayString"])(null!==(r=t.label)&&void 0!==r?r:t.field),1),Object(o["createElementVNode"])("div",Kt,[e.modelValue?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(Object(o["unref"])(Gt)(t.type)),{key:0,modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=function(e){return Object(o["isRef"])(modelValue)?modelValue.value=e:null}),config:t,readonly:null!==(l=t.readonly)&&void 0!==l&&l,onChange:Object(o["unref"])(a)},null,8,["modelValue","config","readonly","onChange"])):Object(o["createCommentVNode"])("",!0)])],64)):Object(o["createCommentVNode"])("",!0)],2)})),128))])}}});n("daae");const en=Jt;var tn=en,nn={class:"menu-item menu-accordion","data-kt-menu-sub":"accordion","data-kt-menu-trigger":"click"},on=Object(o["createStaticVNode"])('<div class="menu-content pt-8 pb-2"><span class="menu-section text-muted text-uppercase fs-8 ls-1">Projects</span></div><span class="menu-link"><span class="menu-icon"><i class="bi bi-bag-check-fill fs-2x"></i></span><span class="menu-title">My Projects</span></span><span class="menu-link"><span class="menu-icon"><i class="bi bi-card-list fs-2x"></i></span><span class="menu-title">Shared Projects</span></span><span class="menu-link"><span class="menu-icon"><i class="bi bi-link-45deg fs-2x"></i></span><span class="menu-title">Closed Projects</span></span>',4),rn=[on];function an(e,t,n,i,r,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",nn,rn)}var ln=Object(o["defineComponent"])({name:"aside_default_menu",components:{},props:{widgetClasses:String},setup:function(){var e=[];return{items:e}}});const sn=yt()(ln,[["render",an]]);var cn=sn,un={key:0,style:{color:"#fff"}},dn=Object(o["createElementVNode"])("h3",null,"Animation Tools",-1),hn=Object(o["createTextVNode"])(" Only visible when a Disco generator is in the chain. "),pn=[dn,hn],fn={class:"bg-gray-300 m-1 p-3 rounded-md text-center item-generator"},mn={style:{padding:"10px","padding-bottom":"25px","line-height":"30px","margin-bottom":"16px"}},gn={style:{float:"right","white-space":"nowrap"}},bn={key:0,style:{display:"inline-block","margin-right":"60px"}},vn=Object(o["createTextVNode"])("Mode: "),yn=Object(o["createElementVNode"])("option",{disabled:"",value:""},"Select animation mode...",-1),wn=Object(o["createElementVNode"])("option",null,"None",-1),On=Object(o["createElementVNode"])("option",null,"2D",-1),jn=Object(o["createElementVNode"])("option",null,"3D",-1),xn=Object(o["createElementVNode"])("option",null,"Video",-1),kn=[yn,wn,On,jn,xn],_n=Object(o["createTextVNode"])("  "),En=Object(o["createTextVNode"])("  "),Sn=Object(o["createTextVNode"])("  "),Nn=Object(o["createTextVNode"])(" Animation Tools "),Bn=Object(o["createElementVNode"])("i",{class:"fas fa-backward"},null,-1),Cn=[Bn],Pn=Object(o["createElementVNode"])("i",{class:"fas fa-play"},null,-1),Vn=[Pn],An=Object(o["createElementVNode"])("i",{class:"fas fa-pause"},null,-1),Mn=[An],$n=Object(o["createElementVNode"])("i",{class:"fas fa-fast-forward"},null,-1),zn=[$n],Tn={style:{width:"100%"}},Dn=Object(o["createElementVNode"])("label",{style:{color:"#999",width:"100%","text-align":"center"}},[Object(o["createTextVNode"])(" Frame Timeline: "),Object(o["createElementVNode"])("span",{id:"sliderDisplayValue"},"0")],-1),Ln={style:{width:"100%"}},In={id:"slider-container",style:{width:"100%"}},Fn=["max"],Yn=Object(o["createElementVNode"])("br",null,null,-1),Xn=Object(o["createElementVNode"])("b",null,"Keyframe Details",-1),Hn=Object(o["createElementVNode"])("br",null,null,-1),Rn={class:"row"},qn={class:"col-4"},Un=Object(o["createTextVNode"])(" Translation (X): "),Zn=["value"],Gn=Object(o["createElementVNode"])("br",null,null,-1),Wn={class:"col-4"},Qn=Object(o["createTextVNode"])(" Translation (Y): "),Kn=["value"],Jn=Object(o["createElementVNode"])("br",null,null,-1),eo={class:"col-4"},to=Object(o["createTextVNode"])(" Translation (Z): "),no=["value"],oo=Object(o["createElementVNode"])("br",null,null,-1),io={style:{position:"relative"},class:"threejs",id:"threejs"},ro={style:{width:"100%",height:"600px",position:"relative"}};function ao(e,t,n,i,r,a){var l=Object(o["resolveComponent"])("Camera"),s=Object(o["resolveComponent"])("Scene"),c=Object(o["resolveComponent"])("Renderer");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[e.generator?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",un,pn)),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",fn,[Object(o["createElementVNode"])("h3",mn,[Object(o["createElementVNode"])("div",gn,[e.generator&&e.generator.settings?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",bn,[vn,Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.generator.settings["animation_mode"]=t}),class:"form-control",style:{background:"#222",border:"1px solid #555",display:"inline-block",color:"#fff"}},kn,512),[[o["vModelSelect"],e.generator.settings["animation_mode"]]])])):Object(o["createCommentVNode"])("",!0),_n,Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[1]||(t[1]=function(t){return e.resetFrames()})},"Reset"),En,Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[2]||(t[2]=function(t){return e.loadPreviewFrame(e.state.selectedFrame)})}," Preview "),Sn,Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[3]||(t[3]=function(t){return e.exportToKeyframes()})}," Export ")]),Nn,Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[4]||(t[4]=function(t){return e.scrub_start()}),style:{"margin-right":"8px"}},Cn),0==e.state.autoPlay?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-primary btn-sm",onClick:t[5]||(t[5]=function(t){return e.scrub_play()}),style:{"margin-right":"8px"}},Vn)):Object(o["createCommentVNode"])("",!0),1==e.state.autoPlay?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:1,class:"btn btn-primary btn-sm",onClick:t[6]||(t[6]=function(t){return e.scrub_pause()}),style:{"margin-right":"8px"}},Mn)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[7]||(t[7]=function(t){return e.scrub_end()}),style:{"margin-right":"8px"}},zn)]),Object(o["createElementVNode"])("div",Tn,[Dn,Object(o["createElementVNode"])("fieldset",Ln,[Object(o["createElementVNode"])("label",In,[Object(o["createElementVNode"])("input",{style:{width:"100%",display:"block"},ref:"frameTimelineSlider",id:"frameTimelineSlider",class:"slider",type:"range",min:"0",max:e.generator.settings.max_frames,value:"0",step:"1"},null,8,Fn)])]),Object(o["createElementVNode"])("div",null,[Yn,Xn,Hn,Object(o["createElementVNode"])("div",Rn,[Object(o["createElementVNode"])("div",qn,[Un,Object(o["createElementVNode"])("input",{type:"text",class:"form-control",value:e.state.curFrame.x},null,8,Zn),Gn]),Object(o["createElementVNode"])("div",Wn,[Qn,Object(o["createElementVNode"])("input",{type:"text",class:"form-control",value:e.state.curFrame.y},null,8,Kn),Jn]),Object(o["createElementVNode"])("div",eo,[to,Object(o["createElementVNode"])("input",{type:"text",class:"form-control",value:e.state.curFrame.z},null,8,no),oo])])])])]),Object(o["createElementVNode"])("div",io,[Object(o["createElementVNode"])("div",ro,[Object(o["createVNode"])(c,{ref:"renderer",style:{width:"100%",height:"600px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{ref:"camera",fov:70,near:1,far:1e4},null,512),Object(o["createVNode"])(s,{ref:"scene"},null,512)]})),_:1},512)])])],512),[[o["vShow"],null!=e.generator]])])}var lo=n("5a89"),so=n("fa06"),co=n("16d6");
/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.16.0
 * @author George Michael Brower
 * @license MIT
 */
class uo{constructor(e,t,n,o,i="div"){this.parent=e,this.object=t,this.property=n,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(o),this.$name=document.createElement("div"),this.$name.classList.add("name"),uo.nextNameID=uo.nextNameID||0,this.$name.id="lil-gui-name-"+ ++uo.nextNameID,this.$widget=document.createElement(i),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback),this.updateDisplay()}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class ho extends uo{constructor(e,t,n){super(e,t,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function po(e){let t,n;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!n&&"#"+n}const fo={isPrimitive:!0,match:e=>"string"==typeof e,fromHexString:po,toHexString:po},mo={isPrimitive:!0,match:e=>"number"==typeof e,fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},go={isPrimitive:!1,match:Array.isArray,fromHexString(e,t,n=1){const o=mo.fromHexString(e);t[0]=(o>>16&255)/255*n,t[1]=(o>>8&255)/255*n,t[2]=(255&o)/255*n},toHexString:([e,t,n],o=1)=>mo.toHexString(e*(o=255/o)<<16^t*o<<8^n*o<<0)},bo={isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t,n=1){const o=mo.fromHexString(e);t.r=(o>>16&255)/255*n,t.g=(o>>8&255)/255*n,t.b=(255&o)/255*n},toHexString:({r:e,g:t,b:n},o=1)=>mo.toHexString(e*(o=255/o)<<16^t*o<<8^n*o<<0)},vo=[fo,mo,go,bo];class yo extends uo{constructor(e,t,n,o){var i;super(e,t,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(i=this.initialValue,vo.find(e=>e.match(i))),this._rgbScale=o,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const e=po(this.$text.value);e&&this._setValueFromHexString(e)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class wo extends uo{constructor(e,t,n){super(e,t,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",e=>{e.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{}),this.$disable=this.$button}}class Oo extends uo{constructor(e,t,n,o,i,r){super(e,t,n,"number"),this._initInput(),this.min(o),this.max(i);const a=void 0!==r;this.step(a?r:this._getImplicitStep(),a),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=e=>{const t=parseFloat(this.$input.value);isNaN(t)||(this._snapClampSetValue(t+e),this.$input.value=this.getValue())};let t,n,o,i,r,a=!1;const l=e=>{if(a){const o=e.clientX-t,i=e.clientY-n;Math.abs(i)>5?(e.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(o)>5&&s()}if(!a){const t=e.clientY-o;r-=t*this._step*this._arrowKeyMultiplier(e),i+r>this._max?r=this._max-i:i+r<this._min&&(r=this._min-i),this._snapClampSetValue(i+r)}o=e.clientY},s=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",s)};this.$input.addEventListener("input",()=>{const e=parseFloat(this.$input.value);isNaN(e)||this.setValue(this._clamp(e))}),this.$input.addEventListener("keydown",t=>{"Enter"===t.code&&this.$input.blur(),"ArrowUp"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t))),"ArrowDown"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t)*-1))}),this.$input.addEventListener("wheel",t=>{this._inputFocused&&(t.preventDefault(),e(this._step*this._normalizeMouseWheel(t)))}),this.$input.addEventListener("mousedown",e=>{t=e.clientX,n=o=e.clientY,a=!0,i=this.getValue(),r=0,window.addEventListener("mousemove",l),window.addEventListener("mouseup",s)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=e=>{const t=this.$slider.getBoundingClientRect();let n=(o=e,i=t.left,r=t.right,a=this._min,l=this._max,(o-i)/(r-i)*(l-a)+a);var o,i,r,a,l;this._snapClampSetValue(n)},t=t=>{e(t.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};let o,i,r=!1;const a=t=>{t.preventDefault(),this._setDraggingStyle(!0),e(t.touches[0].clientX),r=!1},l=t=>{if(r){const e=t.touches[0].clientX-o,n=t.touches[0].clientY-i;Math.abs(e)>Math.abs(n)?a(t):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",s))}else t.preventDefault(),e(t.touches[0].clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",s)},c=this._callOnFinishChange.bind(this);let u;this.$slider.addEventListener("mousedown",o=>{this._setDraggingStyle(!0),e(o.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)}),this.$slider.addEventListener("touchstart",e=>{e.touches.length>1||(this._hasScrollBar?(o=e.touches[0].clientX,i=e.touches[0].clientY,r=!0):a(e),window.addEventListener("touchmove",l),window.addEventListener("touchend",s))}),this.$slider.addEventListener("wheel",e=>{if(Math.abs(e.deltaX)<Math.abs(e.deltaY)&&this._hasScrollBar)return;e.preventDefault();const t=this._normalizeMouseWheel(e)*this._step;this._snapClampSetValue(this.getValue()+t),this.$input.value=this.getValue(),clearTimeout(u),u=setTimeout(c,400)})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),t+-n}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class jo extends uo{constructor(e,t,n,o){super(e,t,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(o)?o:Object.values(o),this._names=Array.isArray(o)?o:Object.keys(o),this._names.forEach(e=>{const t=document.createElement("option");t.innerHTML=e,this.$select.appendChild(t)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class xo extends uo{constructor(e,t,n){super(e,t,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",e=>{"Enter"===e.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let ko=!1;class _o{constructor({parent:e,autoPlace:t=void 0===e,container:n,width:o,title:i="Controls",injectStyles:r=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(i),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!ko&&r&&(function(e){const t=document.createElement("style");t.innerHTML=e;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(t,n):document.head.appendChild(t)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:""}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),ko=!0),n?n.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),o&&this.domElement.style.setProperty("--width",o+"px"),this.domElement.addEventListener("keydown",e=>e.stopPropagation()),this.domElement.addEventListener("keyup",e=>e.stopPropagation())}add(e,t,n,o,i){if(Object(n)===n)return new jo(this,e,t,n);const r=e[t];switch(typeof r){case"number":return new Oo(this,e,t,n,o,i);case"boolean":return new ho(this,e,t);case"string":return new xo(this,e,t);case"function":return new wo(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",r)}addColor(e,t,n=1){return new yo(this,e,t,n)}addFolder(e){return new _o({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(t=>{t instanceof wo||t._name in e.controllers&&t.load(e.controllers[t._name])}),t&&e.folders&&this.folders.forEach(t=>{t._title in e.folders&&t.load(e.folders[t._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(e=>{if(!(e instanceof wo)){if(e._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${e._name}"`);t.controllers[e._name]=e.save()}}),e&&this.folders.forEach(e=>{if(e._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${e._title}"`);t.folders[e._title]=e.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const n=e=>{e.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const o=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=o+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(e=>e.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}var Eo=n("4721");const So=new lo["Wb"],No=new lo["Gc"],Bo=new lo["Gc"],Co=new lo["Rb"],Po={X:new lo["Gc"](1,0,0),Y:new lo["Gc"](0,1,0),Z:new lo["Gc"](0,0,1)},Vo={type:"change"},Ao={type:"mouseDown"},Mo={type:"mouseUp",mode:null},$o={type:"objectChange"};class zo extends lo["Gb"]{constructor(e,t){super(),void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const n=new oi;this._gizmo=n,this.add(n);const o=new ii;this._plane=o,this.add(o);const i=this;function r(e,t){let r=t;Object.defineProperty(i,e,{get:function(){return void 0!==r?r:t},set:function(t){r!==t&&(r=t,o[e]=t,n[e]=t,i.dispatchEvent({type:e+"-changed",value:t}),i.dispatchEvent(Vo))}}),i[e]=t,o[e]=t,n[e]=t}r("camera",e),r("object",void 0),r("enabled",!0),r("axis",null),r("mode","translate"),r("translationSnap",null),r("rotationSnap",null),r("scaleSnap",null),r("space","world"),r("size",1),r("dragging",!1),r("showX",!0),r("showY",!0),r("showZ",!0);const a=new lo["Gc"],l=new lo["Gc"],s=new lo["Rb"],c=new lo["Rb"],u=new lo["Gc"],d=new lo["Rb"],h=new lo["Gc"],p=new lo["Gc"],f=new lo["Gc"],m=0,g=new lo["Gc"];r("worldPosition",a),r("worldPositionStart",l),r("worldQuaternion",s),r("worldQuaternionStart",c),r("cameraPosition",u),r("cameraQuaternion",d),r("pointStart",h),r("pointEnd",p),r("rotationAxis",f),r("rotationAngle",m),r("eye",g),this._offset=new lo["Gc"],this._startNorm=new lo["Gc"],this._endNorm=new lo["Gc"],this._cameraScale=new lo["Gc"],this._parentPosition=new lo["Gc"],this._parentQuaternion=new lo["Rb"],this._parentQuaternionInv=new lo["Rb"],this._parentScale=new lo["Gc"],this._worldScaleStart=new lo["Gc"],this._worldQuaternionInv=new lo["Rb"],this._worldScale=new lo["Gc"],this._positionStart=new lo["Gc"],this._quaternionStart=new lo["Rb"],this._scaleStart=new lo["Gc"],this._getPointer=To.bind(this),this._onPointerDown=Lo.bind(this),this._onPointerHover=Do.bind(this),this._onPointerMove=Io.bind(this),this._onPointerUp=Fo.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;So.setFromCamera(e,this.camera);const t=Yo(this._gizmo.picker[this.mode],So);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){So.setFromCamera(e,this.camera);const t=Yo(this._plane,So,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,Ao.mode=this.mode,this.dispatchEvent(Ao)}}pointerMove(e){const t=this.axis,n=this.mode,o=this.object;let i=this.space;if("scale"===n?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0===o||null===t||!1===this.dragging||-1!==e.button)return;So.setFromCamera(e,this.camera);const r=Yo(this._plane,So,!0);if(r){if(this.pointEnd.copy(r.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),o.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(o.position.applyQuaternion(Co.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(this._quaternionStart)),"world"===i&&(o.parent&&o.position.add(No.setFromMatrixPosition(o.parent.matrixWorld)),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(No.setFromMatrixPosition(o.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),Bo.set(e,e,e)}else No.copy(this.pointStart),Bo.copy(this.pointEnd),No.applyQuaternion(this._worldQuaternionInv),Bo.applyQuaternion(this._worldQuaternionInv),Bo.divide(No),-1===t.search("X")&&(Bo.x=1),-1===t.search("Y")&&(Bo.y=1),-1===t.search("Z")&&(Bo.z=1);o.scale.copy(this._scaleStart).multiply(Bo),this.scaleSnap&&(-1!==t.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(No.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(No.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(Po[t]),No.copy(Po[t]),"local"===i&&No.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(No.cross(this.eye).normalize())*e),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==t&&"XYZE"!==t?(o.quaternion.copy(this._quaternionStart),o.quaternion.multiply(Co.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),o.quaternion.copy(Co.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),o.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Vo),this.dispatchEvent($o)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&(Mo.mode=this.mode,this.dispatchEvent(Mo)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(Vo),this.dispatchEvent($o),this.pointStart.copy(this.pointEnd))}getRaycaster(){return So}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function To(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};{const t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}}function Do(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e));break}}function Lo(e){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function Io(e){this.enabled&&this.pointerMove(this._getPointer(e))}function Fo(e){this.enabled&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function Yo(e,t,n){const o=t.intersectObject(e,!0);for(let i=0;i<o.length;i++)if(o[i].object.visible||n)return o[i];return!1}zo.prototype.isTransformControls=!0;const Xo=new lo["G"],Ho=new lo["Gc"](0,1,0),Ro=new lo["Gc"](0,0,0),qo=new lo["pb"],Uo=new lo["Rb"],Zo=new lo["Rb"],Go=new lo["Gc"],Wo=new lo["pb"],Qo=new lo["Gc"](1,0,0),Ko=new lo["Gc"](0,1,0),Jo=new lo["Gc"](0,0,1),ei=new lo["Gc"],ti=new lo["Gc"],ni=new lo["Gc"];class oi extends lo["Gb"]{constructor(){super(),this.type="TransformControlsGizmo";const e=new lo["rb"]({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new lo["cb"]({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=e.clone();n.opacity=.15;const o=t.clone();o.opacity=.5;const i=e.clone();i.color.setHex(16711680);const r=e.clone();r.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const s=e.clone();s.color.setHex(65280),s.opacity=.5;const c=e.clone();c.color.setHex(255),c.opacity=.5;const u=e.clone();u.opacity=.25;const d=e.clone();d.color.setHex(16776960),d.opacity=.25;const h=e.clone();h.color.setHex(16776960);const p=e.clone();p.color.setHex(7895160);const f=new lo["v"](0,.04,.1,12);f.translate(0,.05,0);const m=new lo["h"](.08,.08,.08);m.translate(0,.04,0);const g=new lo["j"];g.setAttribute("position",new lo["K"]([0,0,0,1,0,0],3));const b=new lo["v"](.0075,.0075,.5,3);function v(e,t){const n=new lo["vc"](e,.0075,3,64,t*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}function y(){const e=new lo["j"];return e.setAttribute("position",new lo["K"]([0,0,0,1,1,1],3)),e}b.translate(0,.25,0);const w={X:[[new lo["qb"](f,i),[.5,0,0],[0,0,-Math.PI/2]],[new lo["qb"](f,i),[-.5,0,0],[0,0,Math.PI/2]],[new lo["qb"](b,i),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new lo["qb"](f,r),[0,.5,0]],[new lo["qb"](f,r),[0,-.5,0],[Math.PI,0,0]],[new lo["qb"](b,r)]],Z:[[new lo["qb"](f,a),[0,0,.5],[Math.PI/2,0,0]],[new lo["qb"](f,a),[0,0,-.5],[-Math.PI/2,0,0]],[new lo["qb"](b,a),null,[Math.PI/2,0,0]]],XYZ:[[new lo["qb"](new lo["Hb"](.1,0),u.clone()),[0,0,0]]],XY:[[new lo["qb"](new lo["h"](.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new lo["qb"](new lo["h"](.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new lo["qb"](new lo["h"](.15,.15,.01),s.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},O={X:[[new lo["qb"](new lo["v"](.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new lo["qb"](new lo["v"](.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,.3,0]],[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new lo["qb"](new lo["Hb"](.2,0),n)]],XY:[[new lo["qb"](new lo["h"](.2,.2,.01),n),[.15,.15,0]]],YZ:[[new lo["qb"](new lo["h"](.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new lo["qb"](new lo["h"](.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},j={START:[[new lo["qb"](new lo["Hb"](.01,2),o),null,null,null,"helper"]],END:[[new lo["qb"](new lo["Hb"](.01,2),o),null,null,null,"helper"]],DELTA:[[new lo["bb"](y(),o),null,null,null,"helper"]],X:[[new lo["bb"](g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new lo["bb"](g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new lo["bb"](g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},x={XYZE:[[new lo["qb"](v(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new lo["qb"](v(.5,.5),i)]],Y:[[new lo["qb"](v(.5,.5),r),null,[0,0,-Math.PI/2]]],Z:[[new lo["qb"](v(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new lo["qb"](v(.75,1),d),null,[0,Math.PI/2,0]]]},k={AXIS:[[new lo["bb"](g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},_={XYZE:[[new lo["qb"](new lo["lc"](.25,10,8),n)]],X:[[new lo["qb"](new lo["vc"](.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new lo["qb"](new lo["vc"](.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new lo["qb"](new lo["vc"](.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new lo["qb"](new lo["vc"](.75,.1,2,24),n)]]},E={X:[[new lo["qb"](m,i),[.5,0,0],[0,0,-Math.PI/2]],[new lo["qb"](b,i),[0,0,0],[0,0,-Math.PI/2]],[new lo["qb"](m,i),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new lo["qb"](m,r),[0,.5,0]],[new lo["qb"](b,r)],[new lo["qb"](m,r),[0,-.5,0],[0,0,Math.PI]]],Z:[[new lo["qb"](m,a),[0,0,.5],[Math.PI/2,0,0]],[new lo["qb"](b,a),[0,0,0],[Math.PI/2,0,0]],[new lo["qb"](m,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new lo["qb"](new lo["h"](.15,.15,.01),c),[.15,.15,0]]],YZ:[[new lo["qb"](new lo["h"](.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new lo["qb"](new lo["h"](.15,.15,.01),s),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new lo["qb"](new lo["h"](.1,.1,.1),u.clone())]]},S={X:[[new lo["qb"](new lo["v"](.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new lo["qb"](new lo["v"](.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,.3,0]],[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new lo["qb"](new lo["v"](.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new lo["qb"](new lo["h"](.2,.2,.01),n),[.15,.15,0]]],YZ:[[new lo["qb"](new lo["h"](.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new lo["qb"](new lo["h"](.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new lo["qb"](new lo["h"](.2,.2,.2),n),[0,0,0]]]},N={X:[[new lo["bb"](g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new lo["bb"](g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new lo["bb"](g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function B(e){const t=new lo["Gb"];for(const n in e)for(let o=e[n].length;o--;){const i=e[n][o][0].clone(),r=e[n][o][1],a=e[n][o][2],l=e[n][o][3],s=e[n][o][4];i.name=n,i.tag=s,r&&i.position.set(r[0],r[1],r[2]),a&&i.rotation.set(a[0],a[1],a[2]),l&&i.scale.set(l[0],l[1],l[2]),i.updateMatrix();const c=i.geometry.clone();c.applyMatrix4(i.matrix),i.geometry=c,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo["translate"]=B(w)),this.add(this.gizmo["rotate"]=B(x)),this.add(this.gizmo["scale"]=B(E)),this.add(this.picker["translate"]=B(O)),this.add(this.picker["rotate"]=B(_)),this.add(this.picker["scale"]=B(S)),this.add(this.helper["translate"]=B(j)),this.add(this.helper["rotate"]=B(k)),this.add(this.helper["scale"]=B(N)),this.picker["translate"].visible=!1,this.picker["rotate"].visible=!1,this.picker["scale"].visible=!1}updateMatrixWorld(e){const t="scale"===this.mode?"local":this.space,n="local"===t?this.worldQuaternion:Zo;this.gizmo["translate"].visible="translate"===this.mode,this.gizmo["rotate"].visible="rotate"===this.mode,this.gizmo["scale"].visible="scale"===this.mode,this.helper["translate"].visible="translate"===this.mode,this.helper["rotate"].visible="rotate"===this.mode,this.helper["scale"].visible="scale"===this.mode;let o=[];o=o.concat(this.picker[this.mode].children),o=o.concat(this.gizmo[this.mode].children),o=o.concat(this.helper[this.mode].children);for(let i=0;i<o.length;i++){const e=o[i];let t;if(e.visible=!0,e.rotation.set(0,0,0),e.position.copy(this.worldPosition),t=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),e.scale.set(1,1,1).multiplyScalar(t*this.size/4),"helper"!==e.tag){if(e.quaternion.copy(n),"translate"===this.mode||"scale"===this.mode){const t=.99,o=.2;"X"===e.name&&Math.abs(Ho.copy(Qo).applyQuaternion(n).dot(this.eye))>t&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Y"===e.name&&Math.abs(Ho.copy(Ko).applyQuaternion(n).dot(this.eye))>t&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Z"===e.name&&Math.abs(Ho.copy(Jo).applyQuaternion(n).dot(this.eye))>t&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XY"===e.name&&Math.abs(Ho.copy(Jo).applyQuaternion(n).dot(this.eye))<o&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"YZ"===e.name&&Math.abs(Ho.copy(Qo).applyQuaternion(n).dot(this.eye))<o&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XZ"===e.name&&Math.abs(Ho.copy(Ko).applyQuaternion(n).dot(this.eye))<o&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1)}else"rotate"===this.mode&&(Uo.copy(n),Ho.copy(this.eye).applyQuaternion(Co.copy(n).invert()),-1!==e.name.search("E")&&e.quaternion.setFromRotationMatrix(qo.lookAt(this.eye,Ro,Ko)),"X"===e.name&&(Co.setFromAxisAngle(Qo,Math.atan2(-Ho.y,Ho.z)),Co.multiplyQuaternions(Uo,Co),e.quaternion.copy(Co)),"Y"===e.name&&(Co.setFromAxisAngle(Ko,Math.atan2(Ho.x,Ho.z)),Co.multiplyQuaternions(Uo,Co),e.quaternion.copy(Co)),"Z"===e.name&&(Co.setFromAxisAngle(Jo,Math.atan2(Ho.y,Ho.x)),Co.multiplyQuaternions(Uo,Co),e.quaternion.copy(Co)));e.visible=e.visible&&(-1===e.name.indexOf("X")||this.showX),e.visible=e.visible&&(-1===e.name.indexOf("Y")||this.showY),e.visible=e.visible&&(-1===e.name.indexOf("Z")||this.showZ),e.visible=e.visible&&(-1===e.name.indexOf("E")||this.showX&&this.showY&&this.showZ),e.material._color=e.material._color||e.material.color.clone(),e.material._opacity=e.material._opacity||e.material.opacity,e.material.color.copy(e.material._color),e.material.opacity=e.material._opacity,this.enabled&&this.axis&&(e.name===this.axis||this.axis.split("").some((function(t){return e.name===t})))&&(e.material.color.setHex(16776960),e.material.opacity=1)}else e.visible=!1,"AXIS"===e.name?(e.position.copy(this.worldPositionStart),e.visible=!!this.axis,"X"===this.axis&&(Co.setFromEuler(Xo.set(0,0,0)),e.quaternion.copy(n).multiply(Co),Math.abs(Ho.copy(Qo).applyQuaternion(n).dot(this.eye))>.9&&(e.visible=!1)),"Y"===this.axis&&(Co.setFromEuler(Xo.set(0,0,Math.PI/2)),e.quaternion.copy(n).multiply(Co),Math.abs(Ho.copy(Ko).applyQuaternion(n).dot(this.eye))>.9&&(e.visible=!1)),"Z"===this.axis&&(Co.setFromEuler(Xo.set(0,Math.PI/2,0)),e.quaternion.copy(n).multiply(Co),Math.abs(Ho.copy(Jo).applyQuaternion(n).dot(this.eye))>.9&&(e.visible=!1)),"XYZE"===this.axis&&(Co.setFromEuler(Xo.set(0,Math.PI/2,0)),Ho.copy(this.rotationAxis),e.quaternion.setFromRotationMatrix(qo.lookAt(Ro,Ho,Ko)),e.quaternion.multiply(Co),e.visible=this.dragging),"E"===this.axis&&(e.visible=!1)):"START"===e.name?(e.position.copy(this.worldPositionStart),e.visible=this.dragging):"END"===e.name?(e.position.copy(this.worldPosition),e.visible=this.dragging):"DELTA"===e.name?(e.position.copy(this.worldPositionStart),e.quaternion.copy(this.worldQuaternionStart),No.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),No.applyQuaternion(this.worldQuaternionStart.clone().invert()),e.scale.copy(No),e.visible=this.dragging):(e.quaternion.copy(n),this.dragging?e.position.copy(this.worldPositionStart):e.position.copy(this.worldPosition),this.axis&&(e.visible=-1!==this.axis.search(e.name)))}super.updateMatrixWorld(e)}}oi.prototype.isTransformControlsGizmo=!0;class ii extends lo["qb"]{constructor(){super(new lo["Lb"](1e5,1e5,2,2),new lo["rb"]({visible:!1,wireframe:!0,side:lo["C"],transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),ei.copy(Qo).applyQuaternion("local"===t?this.worldQuaternion:Zo),ti.copy(Ko).applyQuaternion("local"===t?this.worldQuaternion:Zo),ni.copy(Jo).applyQuaternion("local"===t?this.worldQuaternion:Zo),Ho.copy(ti),this.mode){case"translate":case"scale":switch(this.axis){case"X":Ho.copy(this.eye).cross(ei),Go.copy(ei).cross(Ho);break;case"Y":Ho.copy(this.eye).cross(ti),Go.copy(ti).cross(Ho);break;case"Z":Ho.copy(this.eye).cross(ni),Go.copy(ni).cross(Ho);break;case"XY":Go.copy(ni);break;case"YZ":Go.copy(ei);break;case"XZ":Ho.copy(ni),Go.copy(ti);break;case"XYZ":case"E":Go.set(0,0,0);break}break;case"rotate":default:Go.set(0,0,0)}0===Go.length()?this.quaternion.copy(this.cameraQuaternion):(Wo.lookAt(No.set(0,0,0),Go,Ho),this.quaternion.setFromRotationMatrix(Wo)),super.updateMatrixWorld(e)}}ii.prototype.isTransformControlsPlane=!0;var ri=Object(o["defineComponent"])({name:"studio",components:{ApiService:co["a"]},props:{project:null,generator:null},setup:function(){var e,t="http://localhost:5000",n=Object(o["reactive"])({count:0,mounted:!1,list:[],busy:!1,output:"",progress:0,progressPercentage:"",preloadFrame:0,selectedFrame:0,autoPlay:!1,curFrame:{},keyframes:[]}),i=null,r=null,a=[],l=[],s=100,c=[],u=new lo["Gc"],d=new lo["Wb"],h=new lo["Fc"],p=new lo["Fc"],f=new lo["Fc"],m=new lo["h"](5,5,5),g=null,b=null,v={},y=null,w={uniform:!0,tension:.75,centripetal:!1,chordal:!1,addPoint:null,removePoint:null,exportSpline:null};return{state:n,enabled:!0,dragging:!1,apiUrl:t,transformControl:e,splineHelperObjects:l,raycaster:d,pointer:h,onUpPosition:p,onDownPosition:f,splines:v,params:w,positions:c,splinePointsLength:s,point:u,geometry:m,renderer:i,camera:r,previewMaterial:g,previewImage:b,tween:y,previewPlanes:a}},mounted:function(){this.renderer.onBeforeRender((function(){so["a"].update()}))},beforeDestroy:function(){},methods:{updateTimeframe:function(){var e=this,t=this.$refs.frameTimelineSlider;t.value=this.state.selectedFrame,this.state.selectedFrame=+this.state.selectedFrame;var n=this.camera.position.clone(),o=(new lo["Gc"]).copy(this.positions[this.state.selectedFrame]).clone();o.z+=100;var i=null;if(this.positions&&this.state.selectedFrame<this.positions.length-3){var r=this.positions[this.state.selectedFrame+1];r&&(i=(new lo["Gc"]).copy(r))}i&&(i.z+=100,o.y+=25,this.tween=new so["a"].Tween(n).to(o,1500).easing(so["a"].Easing.Linear.None).onUpdate((function(t){e.camera.position.set(t.x,t.y,t.z),i&&e.camera.lookAt(o)})),this.tween.start()),this.state.autoPlay&&setTimeout((function(){e.state.selectedFrame<e.generator.settings.max_frames-1&&(e.state.selectedFrame+=1,e.updateTimeframe())}),1500)},updateView:function(){var e=this;if(this.generator){var t=this.$refs.frameTimelineSlider;t.addEventListener("input",(function(){var n=t.value;document.getElementById("sliderDisplayValue").innerHTML=" "+n+" / "+e.generator.settings.max_frames})),t.addEventListener("change",(function(){e.state.selectedFrame=t.value,e.state.curFrame=e.state.keyframes[e.state.selectedFrame],e.updateTimeframe()})),t.addEventListener("mouseup",(function(){e.state.selectedFrame!==t.value&&(e.state.selectedFrame=t.value,e.updateTimeframe())})),this.params.addPoint=function(){e.addPoint()},this.params.removePoint=function(){e.removePoint()},this.params.exportSpline=function(){e.exportSpline()},console.log("window",window.innerWidth,window.innerHeight),this.initScene()}},initScene:function(){this.splinePointsLength=this.generator.settings.max_frames,this.state.curFrame={x:0,y:0,z:0},this.state.keyframes=[];for(var e=0;e<this.generator.settings.max_frames;e++)this.state.keyframes.push({x:0,y:0,z:-1});this.buildScene(),console.log(this.splinePointsLength,this.positions);for(e=0;e<this.splinePointsLength;e++)this.addSplineObject(this.positions[e]);this.positions.length=0;for(e=0;e<this.splinePointsLength;e++)this.positions.push(this.splineHelperObjects[e].position);console.log(this.splinePointsLength,this.positions),this.geometry=new lo["j"],this.geometry.setAttribute("position",new lo["i"](new Float32Array(3*this.generator.settings.max_frames),3));var t=new lo["k"](this.positions);for(var n in t.curveType="catmullrom",t.mesh=new lo["bb"](this.geometry.clone(),new lo["cb"]({color:16711680,opacity:.35})),t.mesh.castShadow=!0,this.splines.uniform=t,t=new lo["k"](this.positions),t.curveType="centripetal",t.mesh=new lo["bb"](this.geometry.clone(),new lo["cb"]({color:65280,opacity:.35})),t.mesh.castShadow=!0,this.splines.centripetal=t,t=new lo["k"](this.positions),t.curveType="chordal",t.mesh=new lo["bb"](this.geometry.clone(),new lo["cb"]({color:255,opacity:.35})),t.mesh.castShadow=!0,this.splines.chordal=t,this.splines){var o=this.splines[n];this.$refs.scene.scene.add(o.mesh)}var i=[];for(e=0;e<this.splinePointsLength;e++){var r=this.state.keyframes[e],a=new lo["Gc"];if(e>0){var l=i[e-1];a.x+=l.x+r.x,a.y+=l.y+r.y,a.z+=l.z+100*r.z}i.push(a)}this.load(i),this.onWindowResize()},buildScene:function(){var e=this,t=this.$refs.scene.scene;t.add(new lo["c"](15790320));var n=new lo["nc"](16777215,1.5);n.position.set(0,250,100),n.angle=.2*Math.PI,n.castShadow=!0,n.shadow.camera.near=200,n.shadow.camera.far=2e3,n.shadow.bias=-222e-6,n.shadow.mapSize.width=1024,n.shadow.mapSize.height=1024,t.add(n);var o=new lo["Lb"](2e3,2e3);o.rotateX(-Math.PI/2);new lo["fc"]({color:0,opacity:.2});var i=new lo["N"](1e4,100);i.position.y=-199,i.position.z=-100*this.generator.settings.max_frames/2,i.material.opacity=.25,i.material.transparent=!0,t.add(i),this.camera=this.$refs.camera.camera,this.renderer=this.$refs.renderer.renderer,this.camera.position.set(0,25,100),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0;var r=new _o({container:document.getElementById("threejs")});r.add(this.params,"uniform").onChange((function(){e.render()})),r.add(this.params,"tension",0,1).step(.01).onChange((function(t){e.splines.uniform.tension=t,e.updateSplineOutline(),e.render()})),r.add(this.params,"centripetal").onChange((function(){e.render()})),r.add(this.params,"chordal").onChange((function(){e.render()})),console.log(1231),r.add(this.params,"addPoint"),r.add(this.params,"removePoint"),r.add(this.params,"exportSpline"),r.open(),console.log(123);var a=new Eo["a"](this.camera,this.renderer.domElement);a.damping=.2,a.addEventListener("change",(function(){e.render()})),this.transformControl=new zo(this.camera,this.renderer.domElement),this.transformControl.addEventListener("change",(function(){e.render()})),this.transformControl.addEventListener("dragging-changed",(function(e){a.enabled=!e.value})),t.add(this.transformControl),this.transformControl.addEventListener("objectChange",(function(){e.updateSplineOutline()})),document.addEventListener("pointerdown",(function(t){e.onPointerDown(t)})),document.addEventListener("pointerup",(function(){e.onPointerUp()})),document.addEventListener("pointermove",(function(t){e.onPointerMove(t)})),window.addEventListener("resize",(function(){e.onWindowResize()}))},exportToKeyframes:function(){for(var e="",t="",n="",o=0;o<this.generator.settings.max_frames;o++){var i=this.state.keyframes[o];e+=o.toString()+": ("+i.x.toString()+"),",t+=o.toString()+": ("+i.y.toString()+"),",n+=o.toString()+": ("+i.z.toString()+"),"}this.generator.settings.translation_x=e,this.generator.settings.translation_y=t,this.generator.settings.translation_z=n,console.log(this.generator.settings)},addSplineObject:function(e){var t=new lo["tb"]({color:16777215*Math.random()}),n=new lo["qb"](this.geometry,t);return e?n.position.copy(e):(n.position.x=1e3*Math.random()-500,n.position.y=600*Math.random(),n.position.z=800*Math.random()-400,n.position.z=800*Math.random()-400),n.castShadow=!0,n.receiveShadow=!0,this.$refs.scene.scene.add(n),this.splineHelperObjects.push(n),n},addPoint:function(){this.splinePointsLength++,this.positions.push(this.addSplineObject(null).position),this.updateSplineOutline(),this.render()},removePoint:function(){if(!(this.splinePointsLength<=4)){this.splineHelperObjects.pop();this.splinePointsLength--,this.positions.pop(),this.transformControl.object===this.point&&this.transformControl.detach(),this.$refs.scene.scene.remove(this.point),this.updateSplineOutline(),this.render()}},updateSplineOutline:function(){var e=new lo["Gc"],t=new lo["Gc"](0,0,-1);for(var n in this.splines){for(var o=this.splines[n],i=o.mesh,r=i.geometry.attributes.position,a=function(n){var i=n/(l.generator.settings.max_frames-1);if(o.getPoint(i,l.point),r.setXYZ(n,l.point.x,l.point.y,l.point.z),console.log("updating kf"),n>0){var a=l.positions[n-1],s=l.state.keyframes[n];s.x=(l.point.x-a.x)/100,s.y=(l.point.y-a.y)/100,s.z=(l.point.z-a.z)/100,console.log(s)}var c=l.previewPlanes.find((function(e){return e.userData.id==n}));if(c){c.position.set(l.point.x,l.point.y,l.point.z);var u=o.getTangent(i).normalize();e.crossVectors(new lo["Gc"](0,0,-1),u).normalize();var d=Math.acos(t.dot(u));c.rotation.y=Math.PI/2,c.quaternion.setFromAxisAngle(e,d)}},l=this,s=0;s<this.generator.settings.max_frames;s++)a(s);r.needsUpdate=!0}},exportSpline:function(){for(var e=[],t=0;t<this.splinePointsLength;t++){var n=this.splineHelperObjects[t].position;e.push("new Vector3("+n.x+", "+n.y+", "+n.z+")")}console.log(e.join(",\n"));var o="["+e.join(",\n\t")+"]";prompt("copy and paste code",o)},delayLoadAnimation:function(){var e=this;setTimeout((function(){e.onWindowResize(),e.render()}),1e3)},load:function(e){while(e.length>this.positions.length)this.addPoint();while(e.length<this.positions.length)this.removePoint();for(var t=0;t<this.positions.length;t++)this.positions[t].copy(e[t]);this.updateSplineOutline()},render:function(){if(this.renderer){this.splines.uniform.mesh.visible=this.params.uniform,this.splines.centripetal.mesh.visible=this.params.centripetal,this.splines.chordal.mesh.visible=this.params.chordal;var e=this.renderer.scene,t=this.camera;this.renderer.render(e,t)}},onPointerDown:function(e){this.onDownPosition.x=e.clientX,this.onDownPosition.y=e.clientY},onPointerUp:function(){this.onUpPosition.x=event.clientX,this.onUpPosition.y=event.clientY,0===this.onDownPosition.distanceTo(this.onUpPosition)&&this.transformControl.detach()},onPointerMove:function(e){if(null!=this.$refs.renderer){var t=this.$refs.renderer.renderer,n=t.domElement.getBoundingClientRect();this.pointer.x=(e.clientX-n.left)/(n.right-n.left)*2-1,this.pointer.y=-(e.clientY-n.top)/(n.bottom-n.top)*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var o=this.raycaster.intersectObjects(this.splineHelperObjects,!1);if(o.length>0){var i=o[0].object;console.log("intersected"),i!==this.transformControl.object&&this.transformControl.attach(i)}}},onWindowResize:function(){if(null!=this.camera&&(this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()),this.renderer){try{this.renderer.setSize(window.innerWidth,window.innerHeight)}catch(po){}this.render()}},existsFile:function(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),404!=t.status},loadPreviewFrame:function(e){var t=this,n=parseInt((5*Math.round(e/20)).toString()),o="/data/projects/"+this.project.id.toString()+"/output/2/preview/"+n.toString()+"/preview.png";this.existsFile(this.apiUrl+o)?this.addPreviewToScene(o,e):co["a"].post(this.apiUrl+"/api/task/preview/"+this.project.id.toString()+"/"+n.toString(),{}).then((function(n){"Busy"!=n.data&&t.addPreviewToScene(o,e)})).catch((function(e){e.response}))},addPreviewToScene:function(e,t){lo["T"].crossOrigin="",console.log(this.apiUrl+e);var n=(new lo["uc"]).load(this.apiUrl+e,(function(){o.map.needsUpdate=!0})),o=new lo["rb"]({transparent:!0,map:n,opacity:.5,side:lo["C"]}),i=new lo["qb"](new lo["Lb"](200,200),o);i.userData.id=t,i.position.z=100*-t,i.overdraw=!0,this.previewPlanes.push(i),this.renderer.scene.add(i)},resetFrames:function(){for(var e=[],t=0;t<this.splinePointsLength;t++)e.push(new lo["Gc"](0,0,-100*t));this.load(e)},scrub_start:function(){this.state.autoPlay=!1,this.state.selectedFrame=0,this.updateTimeframe()},scrub_play:function(){this.state.autoPlay=!0,this.updateTimeframe()},scrub_pause:function(){this.state.autoPlay=!1},scrub_end:function(){this.state.autoPlay=!1,this.state.selectedFrame=this.generator.settings.max_frames-1,this.updateTimeframe()}}});const ai=yt()(ri,[["render",ao]]);var li=ai,si=n("6c02"),ci=Object(o["defineComponent"])({name:"studio",components:{KeyFrameEditor:li,AsideDefaultMenu:cn,Vue3LiveForm:tn,Flow:pt},setup:function(){var e=Object(o["ref"])(null),t=null,n="http://localhost:5000",i=[{type:1,title:"Glid-3-ML",description:"Latent diffusion model",folder:"latent_diffusion"},{type:2,title:"Disco Diffusion",description:"Disco diffusion network",folder:"disco_diffusion"},{type:3,title:"DALLE2 Pytorch",description:"Open DALLE2 + Extras",folder:"dalle2_pytorch"},{type:4,title:"Upscale",description:"BigJpg Upscaler API",folder:"go_big"}],r=null,a=Object(o["reactive"])({count:0,mounted:!1,project:null,list:[],generators:i,selectedGenerator:null,busy:!1,loading:!1,output:"",progress:0,progressPercentage:"",preloadFrame:0,selectedFrame:0,autoPlay:!1,sceneLines:"",sceneLinesFramesPerScene:10});return{state:a,timer:t,enabled:!0,dragging:!1,apiUrl:n,keyframeEditor:e,generator_disco:r}},mounted:function(){console.log(location.host),location.host.indexOf("localhost")>-1?this.apiUrl="http://localhost:5000":this.apiUrl="",this.state.mounted=!0;var e=Object(si["c"])();this.getProject(e.params.id)},beforeDestroy:function(){this.cancelAutoUpdate()},methods:{deleteGenerator:function(e){this.state.selectedGenerator=null,this.state.project.generators=this.state.project.generators.filter((function(t){return t.id!=e.id})),console.log(this.state.selectedGenerator)},selectGenerator:function(e){this.state.selectedGenerator=e,console.log(this.state.selectedGenerator)},addGenerator:function(e){n("3e8f");var t=Object.assign({},e);t.id=this.state.project.generators.length,t.enabled=!0,fetch(this.apiUrl+"/data/generators/"+t.folder+"/schema.json").then((function(e){return e.json()})).then((function(e){t.schema=e,console.log(e)})),fetch(this.apiUrl+"/data/generators/"+t.folder+"/defaults.json").then((function(e){return e.json()})).then((function(e){t.settings=e,console.log(e)})),this.state.project.generators.push(t),this.keyframeEditor.updateView()},log:function(e){console.log(e),this.array_move(this.state.list,e.oldIndex,e.newIndex),console.log(this.state.list)},array_move:function(e,t,n){if(n>=e.length){var o=n-e.length+1;while(o--)e.push(void 0)}return e.splice(n,0,e.splice(t,1)[0]),e},updateStatus:function(){var e=this;co["a"].post(this.apiUrl+"/api/task/update",{}).then((function(t){var n=t.data;console.log(n),e.state.output=n["output"],e.state.progress=n["progress"],e.state.busy=n["busy"],e.state.progressPercentage=Math.round(100*e.state.progress)+"%"})).catch((function(e){e.response}))},cancelAutoUpdate:function(){clearInterval(this.timer)},delayLoadAnimation:function(){var e=this;setTimeout((function(){e.keyframeEditor.updateView()}),1e3)},startProject:function(){var e=this;co["a"].post(this.apiUrl+"/api/project/save/"+this.state.project.id.toString(),this.state.project).then((function(t){t.data;co["a"].post(e.apiUrl+"/api/task/start/"+e.state.project.id.toString(),{}).then((function(t){var n=t.data;console.log(n),e.getProject(e.state.project.id)})).catch((function(e){e.response}))})).catch((function(e){e.response}))},getProject:function(e){var t=this;co["a"].post(this.apiUrl+"/api/project/"+e.toString(),{}).then((function(e){var n=e.data;t.state.project=n,console.log(n),t.generator_disco=t.state.project.generators.find((function(e){return 2==e.type})),t.keyframeEditor.updateView()})).catch((function(e){e.response}))},saveProject:function(){console.log(this.apiUrl),co["a"].post(this.apiUrl+"/api/project/save/"+this.state.project.id.toString(),this.state.project).then((function(e){e.data;console.log("saved")})).catch((function(e){e.response}))},refreshProject:function(){var e=this;console.log(this.apiUrl),co["a"].post(this.apiUrl+"/api/project/save/"+this.state.project.id.toString(),this.state.project).then((function(t){t.data;e.getProject(e.state.project.id)})).catch((function(e){e.response}))},deleteProject:function(e){console.log("delete"),co["a"].delete(this.apiUrl+"/api/project/"+e.toString()).then((function(e){e.data})).catch((function(e){e.response}))},createScenesFromLines:function(){this.state.loading=!0;for(var e=this.state.sceneLines.split("\n"),t=[],n=0;n<e.length;n++)t.push({start:n*this.state.sceneLinesFramesPerScene,prompt:e[n]});this.state.loading=!1;var o=this.state.selectedGenerator;o.settings.text_prompts=t,o.settings.max_frames=e.length*this.state.sceneLinesFramesPerScene,co["a"].post(this.apiUrl+"/api/project/save/"+this.state.project.id.toString(),this.state.project).then((function(e){e.data;location.reload()})).catch((function(e){e.response}))}}});const ui=yt()(ci,[["render",rt]]);t["default"]=ui},"9e48":function(e,t,n){},b9a3:function(e,t,n){},c2ea:function(e,t,n){"use strict";n("b9a3")},ca93:function(e,t,n){},daae:function(e,t,n){"use strict";n("0d74")},fa06:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return r}));var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:r.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var o=0;o<n.length;o++){var i=this._tweens[n[o]];i&&!1===i.update(e)&&(i._isPlaying=!1,t||delete this._tweens[n[o]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r=new i;r.Group=i,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"==typeof self&&"undefined"!=typeof e&&e.hrtime?r.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?r.now()+parseFloat(e):e:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==0&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,o;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,o=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,r=this._valuesEnd[t];r instanceof Array?this._object[t]=this._interpolationFunction(r,o):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?i+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[t]=i+(r-i)*o))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var l=0,s=this._chainedTweens.length;l<s;l++)this._chainedTweens[l].start(this._startTime+this._duration);return!1}},r.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},Bounce:{In:function(e){return 1-r.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*r.Easing.Bounce.In(2*e):.5*r.Easing.Bounce.Out(2*e-1)+.5}}},r.Interpolation={Linear:function(e,t){var n=e.length-1,o=n*t,i=Math.floor(o),a=r.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],o):1<t?a(e[n],e[n-1],n-o):a(e[i],e[n<i+1?n:i+1],o-i)},Bezier:function(e,t){for(var n=0,o=e.length-1,i=Math.pow,a=r.Interpolation.Utils.Bernstein,l=0;l<=o;l++)n+=i(1-t,o-l)*i(t,l)*e[l]*a(o,l);return n},CatmullRom:function(e,t){var n=e.length-1,o=n*t,i=Math.floor(o),a=r.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(o=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],o-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-o)-e[0]):1<t?e[n]-(a(e[n],e[n],e[n-1],e[n-1],o-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],o-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=r.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var o=t;1<o;o--)n*=o;return e[t]=n}}(),CatmullRom:function(e,t,n,o,i){var r=.5*(n-e),a=.5*(o-t),l=i*i;return(2*t-2*n+r+a)*(i*l)+(-3*t+3*n-2*r-a)*l+r*i+t}}},function(e){"function"==typeof define&&n("3c35")?define([],(function(){return r})):"object"==typeof exports?o.exports=r:void 0!==e&&(e.TWEEN=r)}(void 0)}).call(this,n("4362"),n("dd40")(e))}}]);
//# sourceMappingURL=chunk-106afe71.efccd9d8.js.map